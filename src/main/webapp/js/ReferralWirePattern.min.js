(function(d,b){if("object"===typeof exports){var t=require("jquery"),w=require("underscore"),k=require("backbone"),r=require("ReferralWireView");module.exports=b(t,w,k,r)}else"function"===typeof define&&define.amd&&define(["jquery","underscore","backbone","ReferralWireView"],b)})(this,function(d,b,t,w){var k=w||window.jQuery||window.Zepto||window.ender,r={GenericSummaryDetailPattern:function(a){var h=new k.FormView({applet:a.summaryapplet,clickRoute:a.clickRoute,templateHTML:b.isUndefined(a.summaryTemplate)?
"StdForm":a.summaryTemplate,showViewBar:!b.isUndefined(a.profileNavigation)&&!b.isNull(a.profileNavigation)?a.profileNavigation:!1,viewBarTemplate:!b.isUndefined(a.profileNavigation)&&!b.isNull(a.profileNavigation)&&a.profileNavigation?a.summaryTemplate:"ActionBarTemplate"}),e;(new rwcore.StandardModel({module:d.hasVal(a.actor)?a.actor:h.actor,calculatedFields:a.calculatedFields,id:a.selectedId})).fetch({add:!1,error:rwcore.showError,success:function(c){e=h.model=c;var g="CUDMenu";!b.isUndefined(a.appletMenu)&&
!b.isNull(a.appletMenu)&&(g=a.appletMenu);var l="AppletMenuTemplate";!b.isUndefined(a.appletMenuTemplate)&&!b.isNull(a.appletMenuTemplate)&&(l=a.appletMenuTemplate);c.clickRoute=a.clickRoute;g=new k.FormView({applet:g,templateHTML:"StdForm",showViewBar:!0,viewBarTemplate:l,model:c});c=new k.PhotoGallery({model:c,applet:a.detailapplet,templateHTML:d.hasVal(a.detailTemplate)?a.detailTemplate:"StdForm",showViewBar:!1});var l=d.hasVal(a.upsertApplet)?a.upsertApplet:a.detailapplet,m=new k.FormView({applet:a.viewBarApplet,
templateHTML:"StdForm",clickRoute:a.clickRoute,showViewBar:!b.isUndefined(a.profileNavigation)&&!b.isNull(a.profileNavigation)?!1:!0,viewBarTemplate:!d.hasVal(a.viewBarTemplate)?"ActionBarTemplate":a.viewBarTemplate});m.model=c.model;var q=a.viewTitle,p=[];if(!b.isUndefined(a.dynamicTitles)&&!b.isNull(a.dynamicTitles)){var n=h.model;for(i=0;i<a.dynamicTitles.length;i++){thisTitle=a.dynamicTitles[i];var s=thisTitle.template,u=thisTitle.fields;for(j=0;j<u.length;j++)for(f in thisField=u[j],thisField){var v=
n.get(f);!b.isUndefined(v)&&!b.isNull(v)&&(s=s.replace(thisField[f],v))}p[i]=s}}g=new k.ListDetailView({listview:h,detailview:c,templateHTML:!b.isUndefined(a.viewTemplate)?a.viewTemplate:"StdSummaryDetailView",route:a.clickRoute,appletMenu:g,appletMenuRight:a.appletMenuRight,upsertApplet:l,secondTierNav:a.secondTierNav,viewTitle:q,appletMenuRight:a.appletMenuRight,dynamicTitles:p,tooltipSource:a.tooltipSource,refWizard:a.refWizard,upsertWizard:a.upsertWizard,inlineMap:a.inlineMap,viewBar:m});d.hasVal(a.viewEL)?
(g.printContainer=a.viewEL,c=g.render().el):(c=g.render().el,d(rwApp.params.modules[1]).html(c).trigger("create"));!b.isUndefined(a.showLinkedInProfile)&&a.showLinkedInProfile&&(c=h.model.get("contact_firstName"),l=h.model.get("contact_lastName"),m=h.model.get("contact_postalCodeAddress"),q=h.model.get("contactLNId"),p=d.hasVal(rwApp.zip)?rwApp.zip:null,c={firstName:!b.isUndefined(c)&&!b.isNull(c)&&""!=c?c:null,lastName:!b.isUndefined(l)&&!b.isNull(l)&&""!=l?l:null,zipCode:!b.isUndefined(m)&&!b.isNull(m)&&
""!=m?m:p,contactLNId:q,dview:h},rwApp.showLinkedInList(c));d.hasVal(a.inlineMap)&&g.renderInLineMap();b.isUndefined(a.done)||a.done(g)}});return e},GenericListDetailPattern:function(a){var h=new k.ListView({applet:a.listapplet,listItemClass:a.listItemClass,usePaging:a.usePaging,clientSideSortAttr:a.clientSideSortAttr,clientSideSortDirection:a.clientSideSortDirection,listMap:a.listMap,filter:a.setFilter,calculatedFields:a.calculatedFields,template:b.isUndefined(a.listTemplate)?"StdList":a.listTemplate}),
e={module:d.hasVal(a.actor)?a.actor:h.actor,now:(new Date).getTime(),act:a.act,bo:h.bo,bc:h.bc,searchText:a.searchText,searchSpec:d.hasVal(a.searchSpec)?a.searchSpec:h.searchSpec,sortby:a.sortby,cacheOptimize:a.cacheOptimize,sortOrder:b.isUndefined(a.sortOrder)?"ASC":a.sortOrder,limit:b.isUndefined(a.usePaging)?void 0:rwcore.pagingSize,shape:!b.isUndefined(a.shape)?a.shape:"Skinny"};if(!b.isUndefined(a.detailSearchSpec))for(var c=Object.keys(a.detailSearchSpec),g=0;g<c.length;g++)e[c[g]]=a.detailSearchSpec[c[g]];
c=void 0;!b.isUndefined(a.savedSearch)&&!b.isUndefined(a.savedSearch.dssModel)&&(c=rwApp.xformSS(a.savedSearch.dssModel),e.searchRequest=rwApp.parseSavedSearch(c,a.savedSearch.searchAppletName));e.calculatedFields=a.calculatedFields;(new rwcore.StandardCollection(e)).fetch({add:!0,error:rwcore.showError,success:function(c){h.setModel(c);var g=h.model.models[0];!b.isUndefined(a.selectedId)&&!b.isNull(a.selectedId)&&(c=h.model.get(a.selectedId),b.isUndefined(c)||b.isNull(c)?(new rwcore.StandardModel({module:e.module,
shape:e.shape,id:a.selectedId})).fetch({async:!1,error:rwcore.showError,success:function(b){h.model.add(b);g=h.model.get(a.selectedId)}}):g=c);r.finishGenericListDetailPattern(a,g,h)}})},finishGenericListDetailPattern:function(a,h,e){var c=void 0;!b.isUndefined(a.savedSearch)&&!b.isUndefined(a.savedSearch.dssModel)&&(c=rwApp.xformSS(a.savedSearch.dssModel));var g=new k.FormView({model:h,applet:a.formapplet,templateHTML:b.isUndefined(a.formTemplate)?"StdForm":a.formTemplate,showViewBar:!1}),l=null,
m=null,q=null;d.hasVal(a.formapplet2)&&(l=new k.FormView({model:h,applet:a.formapplet2,templateHTML:b.isUndefined(a.formTemplate2)?"BasicForm":a.formTemplate,showViewBar:!1}));d.hasVal(a.formapplet3)&&(m=new k.FormView({model:h,applet:a.formapplet3,templateHTML:b.isUndefined(a.formTemplate3)?"BasicForm":a.formTemplate,showViewBar:!1}));d.hasVal(a.formapplet4)&&(q=new k.FormView({model:h,applet:a.formapplet4,templateHTML:b.isUndefined(a.formTemplate4)?"BasicForm":a.formTemplate,showViewBar:!1}));var p=
d.hasVal(a.upsertApplet)?a.upsertApplet:a.formapplet,n="CUDMenu";!b.isUndefined(a.appletMenu)&&!b.isNull(a.appletMenu)&&(n=a.appletMenu);var s="AppletMenuTemplate";!b.isUndefined(a.appletMenuTemplate)&&!b.isNull(a.appletMenuTemplate)&&(s=a.appletMenuTemplate);d.hasVal(g.model)&&(g.model.clickRoute=a.clickRoute);n=new k.FormView({applet:n,templateHTML:"StdForm",showViewBar:!0,viewBarTemplate:s,model:g.model});s=new k.FormView({applet:a.viewBarApplet,clickRoute:a.clickRoute,templateHTML:"StdForm",showViewBar:!0,
viewBarTemplate:!d.hasVal(a.viewBarTemplate)?"ActionBarTemplate":a.viewBarTemplate});s.model=g.model;c=new k.ListDetailView({listview:e,detailview:g,detailview2:l,detailview3:m,detailview4:q,templateHTML:d.hasVal(a.viewTemplate)?a.viewTemplate:"StdLDView",route:a.clickRoute,viewBar:s,appletMenu:n,appletMenuRight:a.appletMenuRight,upsertApplet:p,viewTitle:a.viewTitle,tooltipSource:a.tooltipSource,upsertWizard:a.upsertWizard,refWizard:a.refWizard,fixRecordApplet:a.fixRecordApplet,fixRecordWizard:a.fixRecordWizard,
inlineMap:a.inlineMap,inlineClock:a.inlineClock,listMap:a.listMap,secondTierNav:a.secondTierNav,savedSearch:a.savedSearch,ssModel:c,editRefreshFunction:a.editRefreshFunction,reportMeta:!b.isUndefined(a.isReport)&&a.isReport?e.model.models[0]:void 0});e.parentView=c;g=c.render().el;d(rwApp.params.modules[1]).html(g).trigger("create");d.hasVal(a.savedSearch)&&(g=d.hasVal(a.savedSearch.notUserConfigurable)&&a.savedSearch.notUserConfigurable?!0:!1,d(".listViewListContainer").addClass("hasAdvancedSearch"),
g&&d(".listViewListContainer").addClass("noconfig"),d(".listViewListContainer form").before("<div class='savedSearchDesc'><div class='savedSearchDisplay'><div class='savedSearchName'>All</div></div><div class='editSearchButton'></div></div>"),d.hasVal(a.savedSearch.dssName)&&d(".savedSearchName").html(a.savedSearch.dssName));rwApp.removeEmptyFields();b.isUndefined(a.done)||a.done(c);b.isUndefined(a.usePaging)||(d("#"+e.id).on("listviewbeforefilter",e,e.textSearchHandler),d("#"+e.id).on("scroll",e,
e.scrollHandler));e.refreshList();h?(e.selectItem(h.id),c.displaySelected(h)):c.displaySelected(e.model.models[0]);d.hasVal(a.inlineMap)&&c.renderInLineMap();d.hasVal(a.inlineClock)&&c.renderInLineClock(a.inlineClock)},GenericMergedListDetailPattern:function(a){var h=b.clone(a.dataOptions);rwApp.fetchMultipleLists({dataOptions:h}).done(function(e){var c=new k.ListView({applet:a.listapplet,listItemClass:a.listItemClass,usePaging:a.usePaging,clientSideSortAttr:a.clientSideSortAttr,clientSideSortDirection:a.clientSideSortDirection,
listMap:a.listMap,calculatedFields:a.calculatedFields,template:b.isUndefined(a.listTemplate)?"StdList":a.listTemplate});c.setModel(e);r.finishGenericListDetailPattern(a,c.model.models[0],c)})},GenericMasterDetailPattern:function(a){var h=new k.FormView({applet:a.masterApplet,templateHTML:b.isUndefined(a.masterTemplate)?"StdFormNarrow":a.masterTemplate,showViewBar:!b.isUndefined(a.profileNavigation)&&!b.isNull(a.profileNavigation)?a.profileNavigation:!1,viewBarTemplate:!b.isUndefined(a.profileNavigation)&&
!b.isNull(a.profileNavigation)?a.masterTemplate:"ActionBarTemplate"});(new rwcore.StandardModel({module:d.hasVal(a.actor)?a.actor:h.actor,bc:h.bc,bo:h.bo,id:a.masterRecordId})).fetch({add:!0,error:rwcore.showError,success:function(b){b.clickRoute=a.clickRoute;a.model=b;a.mview=h;rwApp.MasterDetailRenderChildren(a)}})},MasterDetailWithNextPrev:function(a){var h=new k.FormView({applet:a.masterApplet,templateHTML:b.isUndefined(a.masterTemplate)?"StdFormNarrow":a.masterTemplate,showViewBar:!b.isUndefined(a.profileNavigation)&&
!b.isNull(a.profileNavigation)?a.profileNavigation:!1,viewBarTemplate:!b.isUndefined(a.profileNavigation)&&!b.isNull(a.profileNavigation)?a.masterTemplate:"ActionBarTemplate"}),e=new k.ListView({applet:a.nextPrev.listapplet,listItemClass:a.listItemClass,clientSideSortAttr:a.nextPrev.clientSideSortAttr,clientSideSortDirection:a.nextPrev.clientSideSortDirection,template:b.isUndefined(a.listTemplate)?"StdList":a.listTemplate}),c={module:d.hasVal(a.nextPrev.actor)?a.actor:e.actor,act:a.nextPrev.act,bo:e.bo,
bc:e.bc,searchSpec:d.hasVal(a.nextPrev.searchSpec)?a.nextPrev.searchSpec:e.searchSpec,sortby:a.nextPrev.sortby,cacheOptimize:a.cacheOptimize,sortOrder:b.isUndefined(a.nextPrev.sortOrder)?"ASC":a.nextPrev.sortOrder};(new rwcore.StandardCollection(c)).fetch({add:!0,error:rwcore.showError,success:function(b){e.setModel(b);b=e.model.get(a.masterRecordId);a.model=b;a.mview=h;a.nextPrevListView=e;rwApp.MasterDetailRenderChildren(a)}})},MasterDetailRenderChildren:function(a){var h=a.model,e=a.mview;h.bc=
e.bc;h.bo=e.bo;e.model=h;e.render();var c=!b.isUndefined(a.detailListTemplate)&&!b.isNull(a.detailListTemplate)?a.detailListTemplate:"StdList",c={applet:b.isFunction(a.detailListApplet)?a.detailListApplet(e.model):a.detailListApplet,transformOptions:a.transformOptions,template:c,clientSideSortAttr:a.clientSideSortAttr,clientSideSortDirection:a.clientSideSortDirection,filter:!b.isUndefined(a.filter)&&a.filter?!0:!1,usePaging:a.usePaging,listItemClass:a.listItemClass},g=!b.isUndefined(a.detailRenderer)?
new a.detailRenderer(c):new k.ReferralMgmtListView(c);g.clickRoute=a.clickRoute;c={masterRecordId:a.masterRecordId,module:g.actor,act:a.act,searchSpec:d.hasVal(a.searchSpec)?a.searchSpec:d.hasVal(g.searchSpec)?g.searchSpec:void 0,sortby:a.sortby,bc:g.bc,bo:g.bo,limit:b.isUndefined(a.usePaging)?void 0:rwcore.pagingSize,sortOrder:b.isUndefined(a.sortOrder)?"ASC":a.sortOrder};if(!b.isUndefined(a.detailSearchSpec))for(var l=Object.keys(a.detailSearchSpec),m=0;m<l.length;m++){var q=l[m],p=a.detailSearchSpec[l[m]];
if(d.hasVal(a.parentKeyField)&&a.parentKeyField==p)if(p=h.get(p),a.clientFKFilter){var n="{ZKeyField : 'ZValue'}",n=n.replace("ZKeyField",q),n=n.replace("ZValue",p),q={ftype:"expr",expression:n};d.hasVal(c.searchSpec)?(b.isArray(c.searchSpec.filter)||(c.searchSpec.filter=[c.searchSpec.filter]),c.searchSpec.filter[c.searchSpec.filter.length]=q):c.searchSpec={filter:[q]}}else c[q]=p}(new rwcore.StandardCollection(c)).fetch({add:!0,error:rwcore.showError,success:function(c){c.bc=g.bc;c.bo=g.bo;g.setModel(c);
c=new k.FormView({applet:a.viewBarApplet,clickRoute:a.clickRoute,templateHTML:"StdForm",showViewBar:!b.isUndefined(a.profileNavigation)&&!b.isNull(a.profileNavigation)?!1:!0,viewBarTemplate:!d.hasVal(a.viewBarTemplate)?"ActionBarTemplate":a.viewBarTemplate()});c.model=e.model;var h="CUDMenu";!b.isUndefined(a.appletMenu)&&!b.isNull(a.appletMenu)&&(h=a.appletMenu);var l="AppletMenuTemplate";!b.isUndefined(a.appletMenuTemplate)&&!b.isNull(a.appletMenuTemplate)&&(l=a.appletMenuTemplate);var h=new k.FormView({applet:h,
templateHTML:"StdForm",showViewBar:!0,viewBarTemplate:l,model:e.model}),l=a.viewTitle,q=[];if(!b.isUndefined(a.dynamicTitles)&&!b.isNull(a.dynamicTitles)){var p=e.model;for(m=0;m<a.dynamicTitles.length;m++){thisTitle=a.dynamicTitles[m];var n=thisTitle.template,r=thisTitle.fields;for(j=0;j<r.length;j++)for(f in thisField=r[j],thisField){var t=p.get(f);!b.isUndefined(t)&&!b.isNull(t)&&(n=n.replace(thisField[f],t))}q[m]=n}}c=new k.MasterDetailView({masterview:e,d1view:g,templateHTML:!b.isUndefined(a.MDTemplate)?
a.MDTemplate:"StdMDView",viewBar:c,viewTitle:l,route:a.clickRoute,dynamicTitles:q,tooltipSource:a.tooltipSource,appletMenuRight:a.appletMenuRight,appletMenu:h,refWizard:a.refWizard,upsertWizard:a.upsertWizard,secondTierNav:a.secondTierNav,shareFunction:a.shareFunction,inviteFields:a.inviteFields,fixRecordApplet:a.fixRecordApplet,upsertApplet:a.upsertApplet,parentDefaultVals:a.parentDefaultVals,listItemClass:a.listItemClass,refreshModelView:e,nextPrevListView:a.nextPrevListView,allOptions:a});d(rwApp.params.modules[1]).html(c.render().el).trigger("create");
b.isUndefined(g.refreshList)||g.refreshList();b.isUndefined(a.usePaging)||(d("#"+g.id).on("listviewbeforefilter",g,g.textSearchHandler),d("#"+g.id).on("scroll",g,g.scrollHandler));b.isUndefined(a.done)||a.done(c)}})},ReferralsMasterTwoDetail:function(a){var h=new k.FormView({applet:a.masterApplet,templateHTML:"StdFormNarrowPub"});(new rwcore.StandardModel({module:d.hasVal(a.actor)?a.actor:h.actor,id:a.masterRecordId})).fetch({add:!0,error:rwcore.showError,success:function(e){h.model=e;h.render();
var c={applet:a.detail1ListApplet,template:a.detail1ListTemplate,filter:!1,ulClass:"d1List"},g=e.get("partnerId");a.viewTitle=d.hasVal(e.get("firstName"))?e.get("firstName"):e.get("firstName_pub");var l=new k.ReferralMgmtListView(c);(new rwcore.StandardCollection({module:l.actor,fromId:g,sortby:"rw_created_on",sortOrder:"DESC",searchSpec:{filter:[{ftype:"expr",expression:"{fromId : '"+g+"'}"},{ftype:"expr",expression:"{$or:[{toId : '"+rwFB.uId+"'},{toId2 : '"+rwFB.uId+"'}]}"}]}})).fetch({add:!0,error:rwcore.showError,
success:function(c){l.model=c;c={filter:[{ftype:"expr",expression:"{archiveFlag : { $ne : 'true'}}"},{ftype:"expr",expression:"{$or:[{toId : '"+g+"'},{toId2 : '"+g+"'}]}"},{ftype:"expr",expression:"{fromId : '"+rwFB.uId+"'}"}]};var e=new k.ListView({applet:a.detail2ListApplet,template:a.detail2ListTemplate,filter:!1,ulClass:"d2List"});(new rwcore.StandardCollection({module:e.actor,toId:g,searchSpec:c,sortby:"rw_created_on",sortOrder:"DESC"})).fetch({add:!0,error:rwcore.showError,success:function(c){e.model=
c;c=new k.FormView({applet:a.viewBarApplet,clickRoute:a.clickRoute,templateHTML:"StdForm",showViewBar:!0,viewBarTemplate:!d.hasVal(a.viewBarTemplate)?"ActionBarTemplate":a.viewBarTemplate});c.model=h.model;var g="CUDMenu";!b.isUndefined(a.appletMenu)&&!b.isNull(a.appletMenu)&&(g=a.appletMenu);var m="AppletMenuTemplate";!b.isUndefined(a.appletMenuTemplate)&&!b.isNull(a.appletMenuTemplate)&&(m=a.appletMenuTemplate);g=new k.FormView({applet:g,templateHTML:"StdForm",showViewBar:!0,viewBarTemplate:m,model:h.model});
m=[];if(!b.isUndefined(a.dynamicTitles)&&!b.isNull(a.dynamicTitles)){var u=h.model;for(i=0;i<a.dynamicTitles.length;i++){thisTitle=a.dynamicTitles[i];var v=thisTitle.template,t=thisTitle.fields;for(j=0;j<t.length;j++)for(f in thisField=t[j],thisField){var r=u.get(f);!b.isUndefined(r)&&!b.isNull(r)&&(v=v.replace(thisField[f],r))}m[i]=v}}c=new k.MasterDetailView({masterview:h,d1view:l,d2view:e,templateHTML:"MasterTwoDetail",viewBar:c,route:a.clickRoute,refreshModelView:h,dynamicTitles:m,viewTitle:a.viewTitle,
appletMenuRight:a.appletMenuRight,tooltipSource:a.tooltipSource,appletMenu:g,refWizard:a.refWizard});d(rwApp.params.modules[1]).html(c.render().el).trigger("create");l.refreshList();e.refreshList()}})}})}})},GenericSummaryTilesPattern:function(a){var h=new k.FormView({applet:a.summaryapplet,templateHTML:b.isUndefined(a.summaryTemplate)?"StdForm":a.summaryTemplate,showViewBar:!b.isUndefined(a.profileNavigation)&&!b.isNull(a.profileNavigation)?a.profileNavigation:!1,viewBarTemplate:!b.isUndefined(a.profileNavigation)&&
!b.isNull(a.profileNavigation)&&a.profileNavigation?a.summaryTemplate:"ActionBarTemplate"});h.model=new rwcore.StandardModel({id:a.selectedId});var e="CUDMenu";!b.isUndefined(a.appletMenu)&&!b.isNull(a.appletMenu)&&(e=a.appletMenu);var c="AppletMenuTemplate";!b.isUndefined(a.appletMenuTemplate)&&!b.isNull(a.appletMenuTemplate)&&(c=a.appletMenuTemplate);var e=new k.FormView({applet:e,templateHTML:"StdForm",showViewBar:!0,viewBarTemplate:c,model:h.model}),g=k.ChildViewContainer.findByCustom(a.detailapplet);
d.hasVal(g)?(g.model.reset(),b.isUndefined(a.data)||b.each(a.data.models,function(a){g.model.add(a,{silent:!0})}),g.$el.empty(),g.options.offset=0):(g=new k.TilesView({model:a.data,id:a.regionId,applet:a.detailapplet,rwuserId:a.selectedId,templateHTML:b.isUndefined(a.detailTemplate)?"StdForm":a.detailTemplate,showViewBar:!1}),k.ChildViewContainer.add(g,a.detailapplet));var c=d.hasVal(a.upsertApplet)?a.upsertApplet:a.detailapplet,l=new k.FormView({applet:a.viewBarApplet,clickRoute:a.clickRoute,templateHTML:"StdForm",
showViewBar:!b.isUndefined(a.profileNavigation)&&!b.isNull(a.profileNavigation)?!1:!0,viewBarTemplate:!d.hasVal(a.viewBarTemplate)?"ActionBarTemplate":a.viewBarTemplate});l.model=h.model;var m=a.viewTitle,q=[];if(!b.isUndefined(a.dynamicTitles)&&!b.isNull(a.dynamicTitles)){var p=h.model;for(i=0;i<a.dynamicTitles.length;i++){thisTitle=a.dynamicTitles[i];var n=thisTitle.template,s=thisTitle.fields;for(j=0;j<s.length;j++)for(f in thisField=s[j],thisField){var u=p.get(f);!b.isUndefined(u)&&!b.isNull(u)&&
(n=n.replace(thisField[f],u))}q[i]=n}}a=(new k.ListDetailView({listview:h,detailview:g,templateHTML:!b.isUndefined(a.viewTemplate)?a.viewTemplate:"StdSummaryDetailView",route:a.clickRoute,appletMenu:e,upsertApplet:c,viewTitle:m,appletMenuRight:a.appletMenuRight,dynamicTitles:q,tooltipSource:a.tooltipSource,refWizard:a.refWizard,viewBar:l})).render().el;d(rwApp.params.modules[1]).html(a).trigger("create");d(".mainPanelBody").on("scroll",g,g.scrollHandler)},GetUserLinkedInProfile:function(a,b){IN.API.Profile(a).fields("id firstName lastName headline pictureUrl emailAddress summary publicProfileUrl location positions skills educations certifications associations recommendationsReceived publications languages specialties numConnections".split(" ")).result(function(a){var c=
new rwcore.StandardModel({module:"UserMgr"});0<a._total&&(a=a.values[0],c.set({firstName:a.firstName,lastName:a.lastName,login:a.emailAddress,emailAddress:a.emailAddress,current:a.currentShare,jobTitle:a.headline,location:a.location,positions:a.positions,photoUrl:a.pictureUrl,bio:a.summary,LNProfileId:a.id,LNProfile:a.publicProfileUrl,skills:a.skills,educations:a.educations,certifications:a.certifications,associations:a.associations,recommendationsReceived:a.recommendationsReceived,publications:a.publications,
languages:a.languages,specialties:a.specialties,numConnections:a.numConnections}));b.success(c)}).error(function(a){b.error(a)})},lnPeopleSearch:function(a,h,e,c){b.isUndefined(IN)||IN.User.authorize(function(){IN.API.PeopleSearch().params({"first-name":a,"last-name":h,"postal-code":e,network:"S"}).fields("id firstName lastName headline pictureUrl publicProfileUrl location".split(" ")).result(function(a){var h=new rwcore.StandardCollection({module:"ContactsMgr"});h.reset();for(var e in a.people.values){var d=
a.people.values[e],k=new rwcore.StandardModel({module:"ContactsMgr"});k.set({LNProfileId:d.id,firstName:d.firstName,lastName:d.lastName,emailAddress:d.email1Address,jobTitle:d.headline,photoUrl:d.pictureUrl,publicProfileUrl:d.publicProfileUrl,location:!b.isUndefined(d.location)?d.location.name:""});h.add(k,{silent:!0})}!b.isUndefined(c)&&!b.isUndefined(c.success)&&c.success(h)}).error(function(){})})},ChartAdminPattern:function(a){d(a.containerEl).html(b.template("chartAdmin")).trigger("create");
d("#adminCharts").css("background","blue");d("#showchart").on("click",function(){var a={},e={},c=JSON.parse(d("#report").val().replace(/\'/g,'"')),g=c.dataclass;a.name=g+"Chart";a.dataclass=g;b.isUndefined(c.contextVar)||(e[c.contextVar.name]=c.contextVar.value);var g=JSON.parse(d("#filter").val().replace(/\'/g,'"')),l=d("#filter option:selected").text(),m=d("#period").val();if(""!=m){var q=(new Date).getTime(),m=parseInt(m);e.since_date=new Date(q-864E5*m)}else e.since_date=new Date("2012/01/01");
l=l+","+d("#period option:selected").text();a.filter=g;var p=JSON.parse(d("#groupby").val().replace(/\'/g,'"')),l=l+","+d("#groupby option:selected").text();a.groupby=p;e.chart=a;e.module=c.actor;e.act=c.act;e.name=c.series;a=new rwcore.StandardCollection(e);d.when(a.sync()).done(function(a){for(var g=[],e=0;e<a.length;e++){var h={},m=a.models[e].get("_id")[p.aggregate.name];b.isUndefined(m)&&(m=a.models[e].get("_id"));h.name=m;h.y=a.models[e].get(p.aggregate.name);g[e]=h}(new k.ChartView({containerEl:"#chartContainer",
ChartType:d("#type").val(),ChartTitle:c.Title,subTitle:l,yAxisTitle:"total",xAxisTitle:p.aggregate.name,series:g,formatter:function(){return"<span>"+this.value+"</span>"}})).render()})})},SystemMetricsReport:function(a){d(a.containerEl).html(b.template("systemMetrics")).trigger("create");d("#adminCharts").css("background","gold");d("#adminMetrics").css("background","blue");a=function(a,b,c,g,l){b=new rwcore.StandardCollection({module:"AnalyticsMgr",act:"getTrackerChart",name:"EventSeries",event:b,
unit:c,since_date:l});d.when(b.sync()).done(function(b){for(var e=[],d=0;d<b.length;d++){var n={};n.name=b.models[d].get("_id")[c];n.y=b.models[d].get("total");e[d]=n}(new k.ChartView({containerEl:g,ChartType:"line",ChartTitle:a,subTitle:l.toDateString()+" - "+(new Date).toDateString(),yAxisTitle:"total",xAxisTitle:c,series:e,formatter:function(){return"<span>"+this.value+"</span>"}})).render()})};a("Registrations Report","UM_REGISTER","dayOfMonth","#UM_REGISTRATION_REPORT",new Date("2014/01/01"));
a("Login Activity Report","UM_LOGIN","dayOfMonth","#UM_LOGIN_REPORT",new Date("2014/01/01"));a("Inivitations Report","UM_SENTINVITATION","dayOfMonth","#UM_SENTINVITATION_REPORT",new Date("2014/01/01"));a("Referrals Report","UM_REFERRAL","dayOfMonth","#UM_REFERRAL_REPORT",new Date("2014/01/01"));a("Add Connections Report","UM_ADDCONNECTION","dayOfMonth","#UM_ADDCONNECTION_REPORT",new Date("2014/01/01"));a("Chapter Creation Report","UM_CREATEORG","dayOfMonth","#UM_CREATEORG_REPORT",new Date("2014/01/01"))}};
t.ReferralWirePattern=ReferralWirePattern=r;return t.ReferralWirePattern});
