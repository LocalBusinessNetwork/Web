var pgReady=$.Deferred(),phoneapp={client:"phone",initialize:function(){console.log("PG initialize");this.bindEvents()},bindEvents:function(){console.log("PG bindevents");document.addEventListener("deviceready",phoneapp.onDeviceReady,!1);document.addEventListener("pause",phoneapp.onPause,!1);document.addEventListener("resume",phoneapp.onResume,!1);document.addEventListener("online",phoneapp.onOnLine,!1);document.addEventListener("offline",phoneapp.onOffLine,!1)},onDeviceReady:function(){pgReady.resolve();
"7.0"==window.device.version&&(console.log("device version "+window.device.version),document.body.style.marginTop="20px",$("body").addClass("margin-top","20px"))},onPause:function(){},onResume:function(){},onOnLine:function(){},onOffLine:function(){},GetAccurateGPSLocation:function(){var b=$.Deferred();$.mobile.loading("show",{html:"<div style='margin-top:25%;'><img width='100%' src='/images/gps.gif' alt='Locating GPS'/></div>"});navigator.geolocation.getCurrentPosition(function(a){$.mobile.loading("hide");
b.resolve(a);console.log("lat: "+a.coords.latitude+" long: "+a.coords.longitude)},function(a){$.mobile.loading("hide");a.code==PositionError.PERMISSION_DENIED?alert("GPS is not permitted on this device"):a.code==PositionError.POSITION_UNAVAILABLE?alert("Your location is temporarily unavailable on  this device"):a.code==PositionError.TIMEOUT?alert("Your location is temporarily unavailable on  this device, request timedout"):alert("Your location is temporarily unavailable on  this device : "+a.message);
console.log("GPSERROR: "+a.code+" : "+a.message);b.reject()},{maximumAge:12E4,timeout:6E4,enableHighAccuracy:!0});return b},addCalenderEvent:function(b){var a=$.Deferred();window.plugins.calendar.createEvent(b.get("title"),b.get("location"),b.get("notes"),b.get("startDate"),b.get("endDate"),function(b){a.resolve(b)},function(b){a.reject(b)});return a},modifyCalenderEvent:function(b,a){var c=$.Deferred();window.plugins.calendar.modifyEvent(title,location,notes,startDate,endDate,newTitle,location,notes,
startDate,endDate,b.get("title"),b.get("location"),b.get("notes"),b.get("startDate"),b.get("endDate"),a.get("title"),a.get("location"),a.get("notes"),a.get("startDate"),a.get("endDate"),function(a){c.resolve(a)},function(a){c.reject(a)});return c}};
