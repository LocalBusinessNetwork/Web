jQuery.extend({badges:[{largeTemplate:"BadgeRegionalAmbassador",inlineClass:"badgeRegAmbassadorInline",link:"http://resource.successfulthinkersnetwork.com/index.php/stn-programs-2/ambassador-certification/ambassador-certification-home/",inlineTemplate:"BadgeInlineRole",score:"foo",show:function(a){return $.hasVal(a.get("honoraryRoles"))&&-1<a.get("honoraryRoles").indexOf("REG_AMBASSADOR")}},{largeTemplate:"BadgeLeadAmbassador",inlineClass:"badgeLeadAmbassadorInline",inlineTemplate:"BadgeInlineRole",
link:"http://resource.successfulthinkersnetwork.com/index.php/stn-programs-2/ambassador-certification/ambassador-certification-home/",score:"foo",show:function(a){return a.get("org_ambassadorId")==a.get("id")?!0:!1}},{largeTemplate:"BadgeAssociateAmbassador",inlineClass:"badgeAssociateAmbassadorInline",inlineTemplate:"BadgeInlineRole",link:"http://resource.successfulthinkersnetwork.com/index.php/stn-programs-2/ambassador-certification/ambassador-certification-home/",score:"foo",show:function(a){return a.get("org_ambassadorId")!=
a.get("id")&&"true"==a.get("isAmbassador")?!0:!1}},{largeTemplate:"BadgeReferrals",inlineClass:"badgeReferralsGivenInline",inlineTemplate:"BadgeInlineScore",link:"http://resource.successfulthinkersnetwork.com/index.php/the-company-2/member-benefits-program/member-achievement-levels/",score:"totalProspects",show:function(a,b){return!_.isUndefined(b)&&0<b?!0:!1}},{largeTemplate:"BadgeAttendance",inlineClass:"badgeAttendanceInline",inlineTemplate:"BadgeInlineScore",link:"http://resource.successfulthinkersnetwork.com/index.php/the-company-2/member-benefits-program/member-achievement-levels/",
score:"totalMtgsAttended",show:function(a,b){return!_.isUndefined(b)&&0<b?!0:!1}},{largeTemplate:"BadgeInvitations",inlineClass:"badgeMembersInvitedInline",inlineTemplate:"BadgeInlineScore",link:"http://resource.successfulthinkersnetwork.com/index.php/the-company-2/member-benefits-program/member-achievement-levels/",score:"totalInvited",show:function(a,b){return!_.isUndefined(b)&&0<b?!0:!1}},{largeTemplate:"BadgeGenius",inlineClass:"badgeGeniusInline",link:"http://resource.successfulthinkersnetwork.com/index.php/the-company-2/member-benefits-program/member-achievement-levels/",
inlineTemplate:"BadgeInlineRole",score:"foo",show:function(a){return $.hasVal(a.get("honoraryRoles"))&&-1<a.get("honoraryRoles").indexOf("GENIUS")}}],getBadges:function(a,b){for(var c="",d=0;d<$.badges.length;d++){var e=$.badges[d],g=a.get(e.score),h="";_.isUndefined(g)||(g=parseInt(g),h=99<g?"99+":g);e.show(a,g)&&("large"==b&&(c+=_.template(e.largeTemplate,{score:h,model:a,link:e.link})),"inline"==b&&(g=_.template(e.inlineTemplate,{inlineClass:e.inlineClass,score:h,model:a}),c+=g),"phone"==b&&(g=
_.template(e.largeTemplate,{score:h,model:a,link:"#"}),c+=g))}return c},showBadges:function(a){for(var b=0;b<$.badges.length;b++){var c=$.badges[b],d=a.get(c.score);if(c.show(a,d))return""}return"hidden"},getLevelBadge:function(a,b){var c=!_.isUndefined(a.get("memberRankScore"))?parseInt(a.get("memberRankScore")):0,d="<div class='memberLevelBadge'><a href='Zlink' target='_blank'><img src='images/badges/levelZLevel.png' class='memberLevelBadgeInner'></a><div class='memberLevelBadgeLabel'>Level ZLevel</div></div>";
"phone"==b&&(d="<div class='memberLevelBadgePhone'><img src='images/badges/levelZLevel.png' class='memberLevelBadgeInner'><div class='memberLevelBadgeLabel'>Level ZLevel</div></div>");"small"==b&&(d="<img src='images/badges/levelZLevel.png' class='memberLevelBadgeInner'>");"home"==b&&(d="<div><a href='Zlink' target='_blank'><img src='images/badges/levelZLevel.png' class='memberLevelBadgeInner'></a><div class='memberLevelBadgeLabel'>Level ZLevel</div></div>");var e=1;15<=c&&250>c&&(e=2);250<=c&&2500>
c&&(e=3);2500<=c&&7500>c&&(e=4);7500<=c&&15E3>c&&(e=5);15E3<=c&&25E3>c&&(e=6);25E3<=c&&(e=7);d=d.replace(/ZLevel/g,e);return d=d.replace("Zlink","http://resource.successfulthinkersnetwork.com/index.php/the-company-2/member-benefits-program/member-achievement-levels/")},geoDistance:function(a,b,c,d){var e=(c-a).toRad();b=(d-b).toRad();a=a.toRad();c=c.toRad();a=Math.sin(e/2)*Math.sin(e/2)+Math.sin(b/2)*Math.sin(b/2)*Math.cos(a)*Math.cos(c);return 6371*2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))},lookupMultiLovs:function(a,
b,c){var d="";a=c.get(a);if(!_.isUndefined(a)){a=a.split(",");for(c=0;c<a.length;c++){""!=d&&(d+=",");var e=rwcore.getLovDisplayVal(b,a[c]),d=d+e}}return d},getFirstDayOfWeek:function(a,b,c){c+=6;var d=new Date(a,0,10,12,0,0);a=(new Date(a,0,4,12,0,0)).getTime()-864E5*d.getDay();c=new Date(a+864E5*(7*(b-1)+c));b=c.getMonth();c=c.getDate();return"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")[b]+" "+c},createUploadIframe:function(a,b){var c="juploadframe"+a,d='<iframe id="'+c+'" name="'+
c+'" style="position:absolute; top:-9999px; left:-9999px"';window.ActiveXObject&&("boolean"==typeof b?d+=' src="javascript:false"':"string"==typeof b&&(d+=' src="'+b+'"'));jQuery(d+" />").appendTo(document.body);return jQuery("#"+c).get(0)},createUploadForm:function(a,b,c){var d="juploadform"+a;a="jpploadfile"+a;d=jQuery('<form  action="" method="POST" name="'+d+'" id="'+d+'" enctype="multipart/form-data"></form>');if(c)for(var e in c)jQuery('<input type="hidden" name="'+e+'" value="'+c[e]+'" />').appendTo(d);
b=jQuery("#"+b);c=jQuery(b).clone();jQuery(b).attr("id",a);jQuery(b).before(c);jQuery(b).appendTo(d);jQuery(d).css("position","absolute");jQuery(d).css("top","-1200px");jQuery(d).css("left","-1200px");jQuery(d).appendTo("body");return d[0]},ajaxFileUpload:function(a){a=jQuery.extend({},jQuery.ajaxSettings,a);var b=(new Date).getTime(),c=jQuery.createUploadForm(b,a.fileElementId,"undefined"==typeof a.data?!1:a.data);jQuery.createUploadIframe(b,a.secureuri);var d="juploadframe"+b,b="juploadform"+b;
a.global&&!jQuery.active++&&jQuery.event.trigger("ajaxStart");var e=!1,g={};a.global&&jQuery.event.trigger("ajaxSend",[g,a]);var h=function(b){var f=document.getElementById(d);try{f.contentWindow?(g.responseText=f.contentWindow.document.body?f.contentWindow.document.body.innerText?f.contentWindow.document.body.innerText:$(f.contentWindow.document.body.innerHTML).text():null,g.responseXML=f.contentWindow.document.XMLDocument?f.contentWindow.document.XMLDocument:f.contentWindow.document):f.contentDocument&&
(g.responseText=f.contentDocument.document.body?f.contentDocument.document.body.innerHTML:null,g.responseXML=f.contentDocument.document.XMLDocument?f.contentDocument.document.XMLDocument:f.contentDocument.document)}catch(h){rwcore.FYI(h)}if(g||"timeout"==b){e=!0;var k;try{if(k="timeout"!=b?"success":"error","error"!=k){var m=jQuery.uploadHttpData(g,a.dataType);a.success&&a.success(m,k);a.global&&jQuery.event.trigger("ajaxSuccess",[g,a])}else $.mobile.loading("hide"),rwcore.FYI(k)}catch(n){$.mobile.loading("hide"),
alert(g.responseText.trim())}a.global&&jQuery.event.trigger("ajaxComplete",[g,a]);a.global&&!--jQuery.active&&jQuery.event.trigger("ajaxStop");a.complete&&a.complete(g,k);jQuery(f).unbind();setTimeout(function(){try{jQuery(f).remove(),jQuery(c).remove()}catch(a){rwcore.FYI(a)}},100);g=null}};0<a.timeout&&setTimeout(function(){e||h("timeout")},a.timeout);jQuery("#"+d).load(h);try{var f=jQuery("#"+b);f.attr("action",a.url);f.attr("method","POST");f.attr("target",d);f.encoding?f.attr("encoding","multipart/form-data"):
f.attr("enctype","multipart/form-data");f.submit()}catch(k){rwcore.FYI(k)}return{abort:function(){}}},uploadHttpData:function(a,b){var c;c="xml"==b||!b?a.responseXML:a.responseText;"script"==b&&jQuery.globalEval(c);("json"==b||"html"==b)&&eval("c = "+c);return c},rwFileUpload:function(a,b){$.mobile.loading("show",{text:"Uploading the picture, it may take few minutes, please wait.",textVisible:!0,theme:"b",html:""});$.ajaxFileUpload({url:"/rwFileUpload",secureuri:!1,fileElementId:a,dataType:"json",
success:function(a){if(!_.isUndefined(a)){var d=a.URL_tn;a=a.URL;var e=".upsertContainer img#"+b;$(e).attr("src",d);e=".upsertContainer input#"+b;$(e).attr("value",a);$(e).trigger("change")}$.mobile.loading("hide")},error:function(){$.mobile.loading("hide")}});return!1},rwVCFUpload:function(a){$.mobile.loading("show",{text:"Uploading the VCF File, it may take few minutes, please wait.",textVisible:!0,theme:"b",html:""});$.ajaxFileUpload({url:"/vcfUpload",secureuri:!1,fileElementId:a.target.id,dataType:"json",
success:function(){alert("Your contacts will be updated in few minutes. Please check back later.");$.mobile.loading("hide")},error:function(){rwcore.FYI("Error uploading the VCF file. Please try again later.");$.mobile.loading("hide")}});return!1},rwClearImage:function(a,b,c){a="#upsertRecord input#"+b;$(a).attr("value",null);$(a).trigger("change");$("#upsertRecord img#"+b).attr("src",c)},vcard_parse:function(a,b){$.mobile.loading("show",{text:"Loading your VCF file, please wait..",textVisible:!0,
theme:"b",html:""});a=a.replace(/;CHARSET=utf-8/g,"");a=a.replace(/\\,/g," ");a=a.replace(/\\n/g," ");a=a.replace(/\\r/g," ");a=a.replace(/\\:/g," ");a=a.replace(/\\\\/g," ");Array.prototype.forEach||(Array.prototype.forEach=function(a,b){b=b||this;for(var c=0,d=this.length;c<d;c++)a.call(b,this[c],c,this)});if("undefined"!=typeof Prototype||!Array.prototype.map)Array.prototype.map=function(a,b){b=b||this;for(var c=[],d=0,e=this.length;d<e;d++)c.push(a.call(b,this[d],d,this));return c};if("undefined"!=
typeof Prototype||!Array.prototype.filter)Array.prototype.filter=function(a,b){b=b||this;for(var c=[],d=0,e=this.length;d<e;d++)a.call(b,this[d],d,this)&&c.push(this[d]);return c};["forEach","map","filter","slice","concat"].forEach(function(a){Array[a]||(Array[a]=function(b){return this.prototype[a].apply(b,Array.prototype.slice.call(arguments,1))})});Date.ISO8601PartMap={Year:1,Month:3,Date:5,Hours:7,Minutes:8,Seconds:9};Date.matchISO8601=function(a){return a.match(/^(\d{4})(-?(\d{2}))?(-?(\d{2}))?(T(\d{2}):?(\d{2})(:?(\d{2}))?)?(Z?(([+\-])(\d{2}):?(\d{2})))?$/)};
Date.parseISO8601=function(a){if(a=this.matchISO8601(a)){var b=new Date,c=0,d;for(d in this.ISO8601PartMap)if(part=a[this.ISO8601PartMap[d]])b["set"+d]("Month"==d?parseInt(part)-1:parseInt(part));else b["set"+d]("Date"==d?1:0);a[11]&&(c=60*parseInt(a[14])+parseInt(a[15]),c*="-"==parseInt[13]?1:-1);c-=b.getTimezoneOffset();b.setTime(b.getTime()+6E4*c);return b}};var c={simple:/^(version|fn|title|org)\:(.+)$/i,complex:/^([^\:\;]+);([^\:]+)\:(.+)$/,key:/item\d{1,2}\./,properties:/((type=)?(.+);?)+/},
d=a.split(/\r?\n/),e;for(e in d){line=d[e];var g,h,f;c.simple.test(line)?(g=line.match(c.simple),h=g[1].toLowerCase(),g=g[2],b[h]=g):c.complex.test(line)&&(g=line.match(c.complex),h=g[1].replace(c.key,"").toLowerCase(),f=g[2].split(";"),f=Array.filter(f,function(a){return!a.match(/[a-z]+=[a-z]+/)}),f=Array.map(f,function(a){return a.replace(/type=/g,"")}),f=f.pop()||"default",f=f.toLowerCase(),g=g[3],g=/;/.test(g)?[g.split(";")]:g,b[h]=b[h]||{},b[h][f]=b[h][f]||[],b[h][f]=b[h][f].concat(g))}$.mobile.loading("hide")},
timeAgo:function(a){a=((new Date).getTime()-a)/1E3;var b=a/60,c=b/60,d=c/24,e=d/7;return 1<=e?Math.round(e)+" week"+(1<Math.round(e)?"s":"")+"  ago":1<=d?Math.round(d)+" day"+(1<Math.round(d)?"s":"")+"  ago":1<=c?Math.round(c)+" hour"+(1<Math.round(c)?"s":"")+"  ago":1<=b?Math.round(b)+" minute"+(1<Math.round(b)?"s":"")+"  ago":1<=a?Math.round(a)+" second"+(1<Math.round(a)?"s":"")+"  ago":"just now"},getTitleSummaryNews:function(a,b){var c="";1<a?(c='You have <font class="welcomeEm">'+a+"</font> new referrals",
1<b?c+=" and <font class='welcomeEm'>"+b+"</font> of the referrals that you've given your partners have been updated":0<b&&(c+=" and <font class='welcomeEm'>1</font> of the referrals that you've given to a partner has been updated")):0<a?(c='You have <font class="welcomeEm">1</font> new referral',1<b?c+=" and <font class='welcomeEm'>"+b+"</font> of the referrals that you've given your partners have been updated":0<b&&(c+=" and <font class='welcomeEm'>1</font> of the referrals that you've given to a partner has been updated")):
(c="You have no new referrals",1<b?c="<font class='welcomeEm'>"+b+"</font> of the referrals that you've given your partners have been updated":0<b&&(c="<font class='welcomeEm'>"+b+"</font> of the referrals that you've given to a partner has been updated"));""!=c&&(c+=" since your last log in.");return c},getCityState:function(a){var b=a.get("cityAddress_work");a=a.get("stateAddress_work");var c="";$.hasVal(b)&&$.hasVal(a)&&(c=b+", "+a);$.hasVal(b)&&!$.hasVal(a)&&(c=b);!$.hasVal(b)&&$.hasVal(a)&&(c=
a);return c},getMemberType:function(a){var b=$.hasVal(a.get("isSpeaker"))&&"true"==a.get("isSpeaker")?!0:!1;a=$.hasVal(a.get("org_ambassadorId"))&&a.get("org_ambassadorId")==a.get("id")?!0:!1;var c="Member";b&&a&&(c="Ambassador, Speaker");!b&&a&&(c="Ambassador");b&&!a&&(c="Speaker");return c},includeFieldDescription:function(a){return!_.isUndefined(a)&&!_.isNull(a)?"<div class='fieldDescription'>"+a+"</div>":""},showIncomplProf:function(a){retVal="display";var b=a.get("photoUrl"),c=a.get("profession"),
d=a.get("postalCodeAddress_work"),e=a.get("OrgId");a=a.get("powerpartner1");$.hasVal(b)&&($.hasVal(c)&&$.hasVal(d)&&$.hasVal(e)&&$.hasVal(a))&&(retVal="hidden");return retVal},getPowerPartnerClass:function(a){var b="arrow";a=a.get("profession");var c=rwFB.powerpartner1;$.hasVal(a)&&($.hasVal(c)&&-1<c.indexOf(a))&&(b="pp");return b},getPositionDetail:function(a,b,c){$.hasVal(a)&&$.hasVal(b)&&(c=a+", "+b);$.hasVal(a)&&!$.hasVal(b)&&(c=a);!$.hasVal(a)&&$.hasVal(b)&&(c=b);return c},getPosition:function(a,
b){return this.getPositionDetail(a,b,"&nbsp;")},getLongDate:function(a){a=a.get("datetime");return dateFormat(new Date(a),"mm-dd-yyyy")},getPositionComma:function(a){var b=a.get("jobTitle");a=a.get("business");b=this.getPosition(b,a);this.hasVal(b)&&"&nbsp;"!=b&&(b=", "+b);return b},getPositionParentheses:function(a,b,c){b=a.get(b);a=a.get(c);a=this.getPosition(b,a);this.hasVal(a)&&"&nbsp;"!=a&&(a=" ("+a+")");return a},getPositionList:function(a,b){return $.getPositionListClass(a,b,null)},getPositionListClass:function(a,
b,c){a=this.getPosition(a,b);b="</p><p>";$.hasVal(c)&&(b="</p><p class=''>");return a=a.replace(",",b)},getHiddenListFilters:function(a,b){var c="";for(i=0;i<a.length;i++)if(this.hasVal(a[i].filter)&&a[i].filter)var d=b.get(a[i].fldname),c=""!=c?c+" "+d:d;return c},getAltValue:function(a,b){return!_.isUndefined(a)&&!_.isNull(a)&&""!=a?a:b},getPlaceHolder:function(a,b){return!_.isUndefined(a)&&!_.isNull(a)&&""!=a?"":b},addPossessiveSuffix:function(a){var b=a;$.hasVal(a)&&(b="s"==a.charAt(a.length-
1)?b+"'":b+"'s");return b},urlPrefix:function(a){retVal="";$.hasVal(a)&&4<a.length&&(retVal="http"==a.substr(0,4)?a:"http://"+a);return retVal},getFormattedVal:function(a,b,c){!_.isUndefined(a)&&(!_.isNull(a)&&""!=a)&&(c=b.replace(/ZfieldVal/g,a));return c},getFormattedValInner:function(a,b,c,d){!_.isUndefined(a)&&(!_.isNull(a)&&""!=a)&&(d=a.replace(RegExp(b,"g"),c));return d},getQuestionClass:function(a,b,c){var d=a.get("question"+b);a=a.get("answer"+b);if(!this.hasVal(d)||!this.hasVal(a))c="hidden";
return c},getDayOfWeek:function(a){return rwcore.getLovDisplayVal("WEEKDAY",a)},getP2PAttr:function(a,b){var c="err";a.get("toId")==rwFB.uId&&(c=a.get(b+"2"));a.get("toId2")==rwFB.uId&&(c=a.get(b));return c},getP2PTopLineClass:function(a,b){return this.getP2PConditionalClass(a,b,"referralListItemTopLine")},getP2PConditionalClass:function(a,b,c){var d=!1;"PARTNER"==$.getP2PAttr(a,"to_partyType")&&(d=!0);d&&"isMember"!=b&&(c="hidden");!d&&"isContact"!=b&&(c="hidden");return c},getP2PStatusClass:function(a,
b,c){var d=a.get("status");a=a.get("waitingForId");"UNREAD"==d&&"unread"!=b&&(c="hidden");"ACCEPTED"==d&&"accepted"!=b&&(c="hidden");"WAITING"==d&&(a==rwFB.uId&&"waitingForMe"!=b)&&(c="hidden");"WAITING"==d&&(a!=rwFB.uId&&"waitingForOther"!=b)&&(c="hidden");return c},getP2POutStatusClass:function(a,b,c){var d=a.get("status"),e=a.get("waitingForId"),g=a.get("toId");a=a.get("toId2");"UNREAD"==d&&"unread"!=b&&(c="hidden");"ACCEPTED"==d&&"accepted"!=b&&(c="hidden");"WAITING"==d&&(e==g&&"waitingForToId"!=
b)&&(c="hidden");"WAITING"==d&&(e==a&&"waitingForToId2"!=b)&&(c="hidden");return c},getP2PAcceptStatus:function(a){var b=a.get("status");a=a.get("waitingForId");"UNREAD"==b&&(retVal="UNREAD");"ACCEPTED"==b&&(retVal="ACCEPTED");"WAITING"==b&&a==rwFB.uId&&(retVal="UNREAD");"WAITING"==b&&a!=rwFB.uId&&(retVal="WAITING");return retVal},getP2POutPartyHREF:function(a,b){var c=a.get(b);-1==b.indexOf("2")?a.get("to_partyType"):a.get("to_partyType2");return"#lookupPartnerProfile/"+c+"/PARTNER"},referralListToParty:function(a,
b){var c=a.get("referralType"),d=a.get("status"),e=a.get("toId"),g=a.get("toId2"),h="";"InBoxList"==b&&("CUST_FOR_PART"==c&&"UNREAD"!=d&&(h="<span class='contactName'>"+a.get("contact_fullName")+"</span> was referred to you"),"CUST_FOR_PART"==c&&"UNREAD"==d&&(h="A <span class='contactName'>prospect</span>  was referred to you"),"PART_FOR_PART"==c&e==rwFB.uId&&(h="<span class='partnerName'>"+a.get("to_fullName2")+"</span>"),"PART_FOR_PART"==c&g==rwFB.uId&&(h="<span class='partnerName'>"+a.get("to_fullName")+
"</span>"),"PART_INVITE"==c&&(h="<span class='partnerName'>"+a.get("from_fullName")+"</span>"),"INMAIL_REFERRAL"==c&&(h="Message from <span class='partnerName'>"+a.get("from_fullName")+"</span>"));"OutBoxList"==b&&(d=a.get("CFB_Answer1"),e=a.get("CFB_Answer2"),"CUST_FOR_PART"==c&&($.hasVal(d)&&"Yes"==d)&&(h="You referred <span class='contactName'>"+a.get("contact_fullName")+"</span><img src='"+rwFB.CDN+"/images/thumbsUp.png' style='height:16px'>"),"CUST_FOR_PART"==c&&($.hasVal(e)&&"No"==e)&&(h="You referred <span class='contactName'>"+
a.get("contact_fullName")+"</span><img src='"+rwFB.CDN+"/images/thumbsDown.png' style='height:16px'>"),"CUST_FOR_PART"==c&&(!$.hasVal(d)&&!$.hasVal(e))&&(h="You referred <span class='contactName'>"+a.get("contact_fullName")+"</span>"),"PART_FOR_PART"==c&&(h="You referred <span class='partnerName'>"+a.get("to_fullName2")+"</span>"),"PART_INVITE"==c&&(h="<span>You invited <font class='partnerName'>"+a.get("to_fullName")+"</font><span>"),"INMAIL_REFERRAL"==c&&(h="<span>Your Message to <font class='partnerName'>"+
a.get("to_fullName")+"</font><span>"));return h},getProspectReferralStatusOrder:function(a){var b="--";switch(a.get("status")){case "IGNORED":b="1 Unclaimed";break;case "UNREAD":b="1 Unclaimed";break;case "ACCEPTED":b="2 Claimed";break;case "CONFIRMED":b="3 Contacted";break;case "CONVERTED":b="4 Converted";break;case "NOSALE":b="5 Closed - No Sale";break;default:b=""}return b},getProspectReferralStatusDisplay:function(a,b){var c="--";switch(a.get(b)){case "IGNORED":c="1 Unclaimed";break;case "UNREAD":c=
"Unclaimed";break;case "ACCEPTED":c="Claimed";break;case "CONFIRMED":c="Contacted";break;case "CONVERTED":c="Converted";break;case "NOSALE":c="Closed - No Sale";break;default:c=""}return c},getConnectionReferralStatus:function(a){var b={},c="--",d=1;switch(a.get("status")){case "IGNORED":c="Not Yet Accepted";break;case "UNREAD":c="Not Yet Accepted";break;case "WAITING":c="Not Yet Accepted";a.get("waitingForId")!=rwFB.uId&&(c="Waiting For Other",d=2);break;case "ACCEPTED":c="Accepted",d=3}b.msg=c;
b.order=d;return b},getConnectionReferralOutStatus:function(a){var b={},c="--",d=1;switch(a.get("status")){case "IGNORED":c="Not Yet Accepted";break;case "UNREAD":c="Not Yet Accepted";break;case "WAITING":c="Waiting for One Party";d=2;break;case "ACCEPTED":c="Accepted",d=3}b.msg=c;b.order=d;return b},referralListStatus:function(a,b){var c=a.get("status"),d=a.get("referralType"),e=a.get("waitingForId");"InBoxList"==b&&("WAITING"==c&&e==rwFB.uId&&(c="UNREAD"),retVal="<span class='referralListStatusLabel'><font class='status-"+
c+" referralType-"+d+"'>"+$.formatOutBoxStatusShort(a)+"</font></span>");"OutBoxList"==b&&(retVal="<span class='referralListStatusLabel'><font class='status-"+c+" referralType-"+d+"'>"+$.formatOutBoxStatusShort(a)+"</font></span>");return retVal},referralListFrom:function(a,b){var c=a.get("referralType");"InBoxList"==b&&(retVal="<p>by <font style='font-weight:bold;color:firebrick;text-shadow:none'>"+a.get("from_fullName")+"</font> on "+$.getFormattedDate(a.get("rw_created_on").$date)+"</p>","PART_INVITE"==
c&&(retVal="<p>invited you to connect as partners</p>"));"OutBoxList"==b&&(retVal="<p>to <font class='partnerName'>"+a.get("to_fullName")+"</font> on "+$.getFormattedDate(a.get("rw_created_on").$date)+"</p>","PART_INVITE"==c&&(retVal="<p>to connect as partners</p>"));return retVal},getReferralUpdateButtonClass:function(a,b){var c=a.get("status"),d="hidden";"CUST_FOR_PART"==a.get("referralType")&&("ACCEPTED"==c&&"CONFIRM"==b&&(d="button"),"CONFIRMED"==c&&"CONVERT"==b&&(d="button"));return d},getRDStatus:function(a){var b=
a.get("status");a=a.get("waitingForId");"WAITING"==b&&a==rwFB.uId&&(b="UNREAD");return b},getRSStatus:function(a){var b=a.get("status");a=a.get("referralType");var c="ACCEPTED";"UNREAD"==b&&"PART_FOR_PART"==a&&(c="WAITING");return c},archiveButtonClass:function(a){var b=$.hasVal(a.get("archiveFlag"))&&("true"==a.get("archiveFlag")||!0==a.get("archiveFlag"))?!0:!1;a=$.getRDStatus(a);return!b&&"UNREAD"!=a?"button":"hidden"},getExpectCallText:function(a){var b="No";a=a.get("can_contact");$.hasVal(a)&&
a&&(b="Yes");return b},getReferralCustomQClass:function(a){var b=a.get("question1");a=a.get("can_contact");return $.hasVal(b)||$.hasVal(a)&&a?"hidden":""},getSearchResultDesc:function(a,b,c){var d="All businesses";"none"!=a&&("none"!=b&&"none"!=c)&&(d=a+" : '"+b+"' near "+c);"none"==a&&("none"!=b&&"none"!=c)&&(d="'"+b+"' near "+c);"none"==a&&("none"==b&&"none"!=c)&&(d="All businesses near "+c);"none"!=a&&("none"!=b&&"none"==c)&&(d=a+" : '"+b+"'");"none"!=a&&("none"==b&&"none"!=c)&&(d=a+" near "+c);
"none"!=a&&("none"==b&&"none"==c)&&(d=a);"none"==a&&("none"!=b&&"none"==c)&&(d="'"+b+"'");_.isUndefined(a)&&(_.isUndefined(b)&&_.isUndefined(c))&&(d="");return d},getInvitationText:function(a,b,c){a=!_.isUndefined(rwFB.fullName)?rwFB.fullName:"";var d=!_.isUndefined(rwFB.jobTitle)?rwFB.jobTitle:"",e=!_.isUndefined(rwFB.business)?rwFB.business:"",g=!_.isUndefined(rwFB.rwTenantDisplayName)?rwFB.rwTenantDisplayName:"this tool";c="PARTNER"==c?"ZtoFirstName,\n\nI'd like to invite you to become part of my partner network.\n\nZfromFullName\nZfromJobTitle\nZfromBusiness":
"ZtoFirstName,\n\nI'd like to invite you to connect through ZtenantName. I've found it to be a really useful way to share opportunities with other businesses.\n\nZfromFullName\nZfromJobTitle\nZfromBusiness";c=c.replace("ZtoFirstName",b);c=c.replace("ZfromFullName",a);c=c.replace("ZfromJobTitle",d);c=c.replace("ZfromBusiness",e);return c=c.replace("ZtenantName",g)},getLIList:function(a){retVal="";this.hasVal(a)&&(retVal=a.replace(/\n/g,"<br>"));return retVal},formatHref:function(a,b,c){var d="";this.hasVal(a)&&
(d=null,d=this.hasVal(b)&&"undefined"!=b?a+"/"+c.get(b):a);return d},getComposite:function(a,b){var c=b.split(","),d="";for(i=0;i<c.length;i++)var e=a.get(c[i]),d=d+(this.hasVal(e)&&0<i?" ":""),d=d+(this.hasVal(e)?e:"");return d},getFormattedLinkedInPositions:function(a){var b="";for(i=0;i<a.length;i++)if(!a[i].isCurrent){var c=a[i],d=c.title,e=c.company.name,c=c.summary,g="";!_.isUndefined(d)&&(!_.isNull(d)&&""!=d)&&(!_.isUndefined(e)&&!_.isNull(e)&&""!=e)&&(g=d+", "+e);if(!_.isUndefined(d)&&(!_.isNull(d)&&
""!=d)&&(_.isUndefined(e)||_.isNull(e)||""==e))g=d;if((_.isUndefined(d)||_.isNull(d)||""==d)&&!_.isUndefined(e)&&!_.isNull(e)&&""!=e)g=e;if(_.isUndefined(c)||_.isNull(c)||""==c)c="";d='<li><div class="experienceTitle">ZHeading</div><div>ZSummary</div></li>'.replace("ZHeading",g);d=d.replace("ZSummary",c);b+=d}""!=b&&(b="<tr><td class='pLeftCol'>Past</td><td><ul>Zpositions</ul></td></tr>".replace("Zpositions",b));return b},getSampleLinkedInModel:function(){var a=new ReferralWire.StandardModel({module:"UserMgr"});
a.set({LNProfileId:"Pcs8CZT_n8",firstName:"Alex",lastName:"Chervet",jobTitle:"Business & Marketing",bio:"Alex Chervet is the Senior Director of Marketing for Silicon Image, overseeing the companys Digital Television, Home Theater and Automotive businesses. \n \nHe is recognized as a highly imaginative creator of exceptional products who specializes in combining ideas from two or three separate disciplines to create something new and unique.  His 20 years of technical experience and practical business sense make him a trusted advisor to customers & colleagues and an effective business leader. \n\nMr. Chervet has a natural and engaging presentation style.  His insightful view of markets and trends combined with an ability to describe even the most complex systems in terms that anybody can understand, make him a highly sought after presenter. <br><br>Prior to joining Silicon Image, Mr. Chervet held various management and development positions in the USA and Europe at Echelon Corp., BASF, and Schindler Elevator Corp.  He has an extensive background in software, communication and networking systems, and has been awarded patents for his work in power line communications.  Mr. Chervet has participated in multiple standards efforts including IEEE 1473L / ANSI 709.1, HDMI and MHL technology.",
numConnections:255,LNProfile:"http://www.linkedin.com/in/alexchervet",positions:{_total:1,values:[{company:{id:7300,industry:"Semiconductors",name:"Silicon Image",size:"201-500 employees",ticker:"SIMG",type:"Public Company"},id:4038956,isCurrent:!0,startDate:{month:5,year:2005},summary:"Inventors of DVI, HDMI and MHL.  Three world-wide standards, over 3 billion (yes billion with a B) ports shipped!",title:"Sr. Director of Marketing"},{company:{id:7301,industry:"Semiconductors",name:"Echelon",size:"201-500 employees",
ticker:"EXPL",type:"Public Company"},id:4038957,isCurrent:!1,startDate:{month:5,year:2005},summary:"Networking everything that is *not* a computer. Products for buildings, utilities, factories, homes and transportation.",title:"Product management, Inventor of the i.LON Family of Products"},{company:{id:7301,industry:"Semiconductors",name:"BASF",size:"201-500 employees",ticker:"EXPL",type:"Public Company"},id:4038958,isCurrent:!1,startDate:{month:5,year:2005},summary:"One of the worlds largest chemical companies. They don't make stuff, they make stuff better. (And, yes, they also made cassette tapes)",
title:"Software Developer - Technology Applications Group"}]},location:{country:{code:"us"},name:"San Francisco Bay Area"}});return a},getCustomFieldClass:function(a,b){var c="hidden";!_.isUndefined(a)&&(!_.isNull(a)&&""!=a)&&(c="fauxLast",!_.isUndefined(b)&&(!_.isNull(b)&&""!=b)&&(c=""));return c},getConditionalVal:function(a,b,c,d){return a==b?c:d},getConditionalConnected:function(a,b,c,d,e){var g=$.getConditionalVal(a,b,c,d);if(!$.hasVal(a)||!$.hasVal(b)||g==c)return g;"connect"==e?(a=new rwcore.StandardModel({module:"PartnerMgr",
partnerId:a}),a=a.fetch({async:!1}),$.when(a).done(function(){g=c}).fail(function(){g=d})):"refer"==e&&(a=new rwcore.StandardModel({module:"PartnerMgr",partnerId:a}),a=a.fetch({async:!1}),$.when(a).done(function(){g=d}).fail(function(){g=c}));return g},getPlural:function(a,b,c){1==a&&(b=c);return b},getArticle:function(a){var b="a";a.toLowerCase().charAt(0)in{a:1,e:1,i:1,o:1,u:1}&&(b="an");return b},getFormattedDate:function(a){_.isObject(a)&&(a=a.$date);var b=new Date(a);a=b.getDate();var c=b.getMonth()+
1,b=b.getFullYear().toString(),b=b.substr(2,2);return c+"/"+a+"/"+b},formatOutBoxStatusShort:function(a){var b=a.get("status"),c=a.get("referralType"),d=a.get("fromId")==rwFB.uId?!1:!0,e=a.get("to_firstName"),g=a.get("contact_firstName"),h=$.timeAgo(a.get("statusChangeDate").$date);a.get("shareNoSaleUpdate");var f="";if("CUST_FOR_PART"==c)switch(b){case "IGNORED":f=d?"You <font class='status-Zstatus referralType-ZreferralType'> have not Claimed</font> the lead":"ZtoFirstName <font class='status-Zstatus referralType-ZreferralType'> has not Claimed</font> the lead";
break;case "UNREAD":f=d?"You <font class='status-Zstatus referralType-ZreferralType'> have not Claimed</font> the lead":"ZtoFirstName <font class='status-Zstatus referralType-ZreferralType'> has not Claimed</font> the lead";break;case "ACCEPTED":f=d?"You <font class='status-Zstatus referralType-ZreferralType'> have Claimed</font> the lead":"ZtoFirstName <font class='status-Zstatus referralType-ZreferralType'> Claimed</font> the lead <span class='extraRefDetail'>ZtimeAgo</span>";break;case "CONFIRMED":f=
d?"You <font class='status-Zstatus referralType-ZreferralType'> have Contacted</font> ZcontactFirstName":"ZtoFirstName <font class='status-Zstatus referralType-ZreferralType'> Contacted</font> ZcontactFirstName <span class='extraRefDetail'>ZtimeAgo</span>";break;case "CONVERTED":f=d?"You <font class='status-Zstatus referralType-ZreferralType'> have Converted</font> the lead":"ZtoFirstName <font class='status-Zstatus referralType-ZreferralType'> has Converted</font> the lead <span class='extraRefDetail'>ZtimeAgo</span>";
break;case "NOSALE":f=d?"You have marked the lead as <font class='status-Zstatus referralType-ZreferralType'>Closed-No Sale</font>":"ZtoFirstName has marked the lead as <font class='status-Zstatus referralType-ZreferralType'>Closed-No Sale</font> <span class='extraRefDetail'>ZtimeAgo</span>";break;default:f=""}if("PART_FOR_PART"==c){f=a.get("waitingForId");a.get("toId");a.get("toId2");var k="WAITING"==b&&f==a.get("toId")?a.get("to_firstName"):"WAITING"==b&&f==a.get("toId2")?a.get("to_firstName2"):
"Me",l="WAITING"==b&&a.get("waitingForId")==a.get("toId")?a.get("to_firstName2"):"WAITING"==b&&a.get("waitingForId")==a.get("toId2")?a.get("to_firstName"):"Me";switch(b){case "IGNORED":f="Not Accepted";break;case "UNREAD":f=d?"You <font class='status-Zstatus referralType-ZreferralType'>have Not Accepted</font> the introduction":"<font class='status-Zstatus referralType-ZreferralType'>has not been Accepted</font> by either party";break;case "ACCEPTED":f=d?"Both of you <font class='status-Zstatus referralType-ZreferralType'>have Accepted</font> - you're now connected to each other.":
"<font class='status-Zstatus referralType-ZreferralType'>has been Accepted</font> by both parties";break;case "WAITING":f=d?f==rwFB.uId?"You <font class='status-UNREAD referralType-ZreferralType'>have Not Accepted</font> the introduction":"You have <font class='status-ACCEPTED referralType-ZreferralType'>Accepted</font> the introduction; <font class='status-WAITING referralType-ZreferralType'>ZwaitingForFirstName has not.</font>":"ZnotWaitingForFirstName has accepted; the introduction is now <font class='status-Zstatus referralType-ZreferralType'>Waiting</font> on ZwaitingForFirstName";
break;default:f=""}}if("PART_INVITE"==c)switch(b){case "IGNORED":f="Not Accepted";break;case "UNREAD":f=d?"You <font class='status-Zstatus referralType-ZreferralType'>have Not Accepted</font> the invitation":"ZtoFirstName <font class='status-Zstatus referralType-ZreferralType'> has not Accepted</font> the invitation";break;case "ACCEPTED":f=d?"You <font class='status-Zstatus referralType-ZreferralType'>have Accepted</font> the invitation.":"<font class='status-Zstatus referralType-ZreferralType'>was Accepted</font>";
break;default:f=""}f=f.replace(/Zstatus/g,b);f=f.replace(/ZreferralType/g,c);f=f.replace(/ZtoFirstName/g,e);f=f.replace(/ZcontactFirstName/g,g);f=f.replace(/ZtimeAgo/g,h);f=f.replace(/ZnotWaitingForFirstName/g,l);return f=f.replace(/ZwaitingForFirstName/g,k)},formatOutBoxStatus:function(a,b,c){var d="";!_.isUndefined(c)&&(!_.isNull(c)&&""!=c)&&(d=this.getFormattedDate(c));switch(b){case "IGNORED":b="ZToFirst has not yet accepted the referral";break;case "UNREAD":b="ZToFirst has not yet accepted the referral";
break;case "ACCEPTED":b="ZToFirst accepted the referral on ZStatusChgDate";break;case "CONFIRMED":b="ZToFirst confirmed that the prospect is interested on ZStatusChgDate";break;case "CONVERTED":b="ZToFirst successfully converted the prospect into a customer on ZStatusChgDate";break;default:b=""}b=b.replace("ZToFirst",'<a class="partnerName light">ZToFirst</a>');b=b.replace("ZToFirst",a);return b=b.replace("ZStatusChgDate",d)},getDataGridLetter:function(a){var b="d";switch(a){case 1:b="a";break;case 2:b=
"a";break;case 3:b="b";break;case 4:b="c";break;case 5:b="d";break;default:b="d"}return b},getStarClass:function(a){retVal="stars none";0<a&&0.2>=a&&(retVal="stars one");0.2<a&&0.4>=a&&(retVal="stars two");0.4<a&&0.6>=a&&(retVal="stars three");0.6<a&&0.8>=a&&(retVal="stars four");0.8<a&&1>=a&&(retVal="stars five");return retVal},getHarveyClass:function(a,b){retVal="harveyBall empty";var c=$.hasVal(b)?b:0,d=$.hasVal(a)?a:0,c=c/d;0<c&&0.25>=c&&(retVal="harveyBall oneqtrs");0.25<c&&0.5>=c&&(retVal="harveyBall twoqtrs");
0.5<c&&0.75>=c&&(retVal="harveyBall threeqtrs");0.75<c&&1>=c&&(retVal="harveyBall full");return retVal},substituteVals:function(a,b){var c=a.match(RegExp(/\[(.*?)\]/g));if($.hasVal(c)&&0<c.length)for(j=0;j<c.length;j++){var d=c[j],e=d.replace("[",""),e=e.replace("]","");"_"==e.charAt(0)?(e=e.substr(1,e.length-1),e=b.get(e),e=this.addPossessiveSuffix(e)):e=b.get(e);a=a.replace(d,e)}return a},getLOV:function(a,b,c){b=c.get(b);return rwcore.getLovDisplayVal(a,b)},formatLOV:function(a,b,c){b=c.get(b);
a=rwcore.getLovDisplayVal(a,b);return this.substituteVals(a,c)},getFieldValOrDefault:function(a,b,c){return $.hasVal(a)&&$.hasVal(a.get(b))?a.get(b):c},nextDate:function(a){return(new Date(this.nextDateObj(a))).getDate()},nextDateObj:function(a){var b=parseInt(a);a=new Date;var c=a.getDay(),b=(b<=c?b+7:b)-c;return(new Date).setDate(a.getDate()+b)},nextMonthName:function(a){return"January February March April May June July August September October November December".split(" ")[(new Date(this.nextDateObj(a))).getMonth()]},
getDateElement:function(a,b,c){a=a.get(b);a=a.hasOwnProperty("$date")?new Date(a.$date):new Date(a);if("month"==c)return"January February March April May June July August September October November December".split(" ")[a.getMonth()];if("day"==c)return"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" ")[a.getDay()];if("date"==c)return a.getDate()},concat:function(a){a=a.hasOwnProperty(0)?a[0]:a;var b=$.nextDateObj(a.meetingDayOfWeek),b=dateFormat(new Date(b),"m/d/yyyy");return a.businessName+
" weekly meeting "+b},calcNextMeeting:function(a){var b=a.hasOwnProperty(0)?a[0]:a,c=$.nextDateObj(b.meetingDayOfWeek);a=(new Date(c)).getDate();var d=(new Date(c)).getMonth(),c=(new Date(c)).getFullYear(),e=b.meetingHour.hasOwnProperty("$date")?new Date(b.meetingHour.$date):new Date(b.meetingHour),b=e.getHours(),e=e.getMinutes(),g=new Date;g.setFullYear(c);g.setDate(a);g.setMonth(d);g.setHours(b);g.setMinutes(e);return g.getTime()},calcNextMeetingDate:function(a){a=a.hasOwnProperty(0)?a[0]:a;var b=
$.nextDateObj(a.meetingDayOfWeek);a=(new Date(b)).getDate();var c=(new Date(b)).getMonth(),b=(new Date(b)).getFullYear();return(new Date(b,c,a,0,0,0)).getDate()},calcNextMeetingDay:function(a){a=a.hasOwnProperty(0)?a[0]:a;var b=$.nextDateObj(a.meetingDayOfWeek);a=(new Date(b)).getDate();var c=(new Date(b)).getMonth(),b=(new Date(b)).getFullYear();return"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" ")[(new Date(b,c,a,0,0,0)).getDay()]},formatDateTime:function(a){return $.formatDateTimeOptions(a,
"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),"m/d/yyyy")},formatDateTimeShort:function(a){return $.formatDateTimeOptions(a,"Sun Mon Tue Wed Thu Fri Sat".split(" "),"m/d/yy")},formatDateTimeOptions:function(a,b,c){_.isObject(a)&&(a=a.$date);a=new Date(a);b=b[a.getDay()];c=dateFormat(a,c);a=dateFormat(a,"h:MM TT");return b+", "+c+" at "+a},getDateTime:function(a,b){var c=a.get(b);if(!_.isUndefined(c)&&!_.isNull(c)){c.hasOwnProperty("$date")&&(c=c.$date);var d=new Date(c),c=
dateFormat(d,"m/d/yyyy"),d=dateFormat(d,"h:MM TT");retVal=c+" "+d}else retVal="";return retVal},getTimeString:function(a,b){return $.getTimeStringDetail(a,b,"h:MM TT")},getTimeStringDetail:function(a,b,c){a=a.get(b);!_.isUndefined(a)&&!_.isNull(a)?(a.hasOwnProperty("$date")&&(a=a.$date),c=dateFormat(new Date(a),c)):c="";return c},getTimeStringVal:function(a){!_.isUndefined(a)&&!_.isNull(a)?(a.hasOwnProperty("$date")&&(a=a.$date),a=dateFormat(new Date(a),"h:MM TT")):a="";return a},getLocalTimeFromGMT:function(a){a=
new Date(a);new String(window.location);a.setTime(a.getTime()-6E4*a.getTimezoneOffset());return a},getGMTTimeFromLocal:function(a){a=new Date(a);-1!=(new String(window.location)).indexOf("localhost")&&a.setTime(a.getTime()+6E4*a.getTimezoneOffset());return a},getDateString:function(a,b){var c=a.get(b);$.hasVal(c)?(c.hasOwnProperty("$date")&&(c=c.$date),c=$.getLocalTimeFromGMT(c),c=dateFormat(new Date(c),"m/d/yyyy")):c="";return c},getDateStringNoAdjust:function(a,b){var c=a.get(b);$.hasVal(c)?(c.hasOwnProperty("$date")&&
(c=c.$date),c=dateFormat(new Date(c),"m/d/yyyy")):c="";return c},getMonthAndDate:function(a,b){var c=a.get(b);_.isObject(c)&&(c=c.$date);var d="January February March April May June July August September October November December".split(" "),e="Sun Mon Tue Wed Thu Fri Sat".split(" ");if($.hasVal(c))var g=(new Date(c)).getMonth(),h=(new Date(c)).getDate(),d=d[g],c=(new Date(c)).getDay(),e=e[c]+", "+d+" "+h;else e="";return e},getImageTN:function(a,b,c,d){a=$.getAltValue(a.get(b),c);console.log(a+":"+
rwFB.ImageCDN);return retVal=-1==a.indexOf(rwFB.ImageCDN)?'<img src="'+a+'" class="'+d+'">':'<img src="'+a+'_tn" class="'+d+'">'},getImage:function(a,b,c,d){return retVal='<img src="'+$.getAltValue(a.get(b),c)+'" class="'+d+'">'},getImageWithId:function(a,b,c,d,e){return retVal='<img src="'+$.getAltValue(a.get(b),c)+'" class="'+d+'" id="'+e+'">'},getMemberBadgeClass:function(a){var b="hidden";"true"==a.get("isAmbassador")&&(b="associateAmbassadorBadge");a.get("org_ambassadorId")==a.get("id")&&(b=
"primaryAmbassadorBadge");return b},calculateDistance:function(a){var b=a.firstPosition.lat,c=a.secondPosition.lat,d=a.firstPosition.lng;a=a.secondPosition.lng;unit="M";b=Math.PI*b/180;c=Math.PI*c/180;d=Math.PI*(d-a)/180;d=Math.sin(b)*Math.sin(c)+Math.cos(b)*Math.cos(c)*Math.cos(d);d=Math.acos(d);d=180*d/Math.PI;d*=69.09;"K"==unit&&(d*=1.609344);"N"==unit&&(d*=0.8684);return d},formatGroupBy:function(a,b){for(var c={categoryAry:[],series:{}},d=0;d<b.series.length;d++)c.series[b.series[d].name]={},
c.series[b.series[d].name].field=b.series[d].field,c.series[b.series[d].name].label=b.series[d].label,c.series[b.series[d].name].values=[];for(var e=0;e<a.length;e++){var g=a[e];c.categoryAry[e]=g.get(b.categoryField);for(d=0;d<b.series.length;d++)if(b.hasOwnProperty("drillDownString")){var h=g.get(b.ZIdentifier),f=b.drillDownString.replace("ZIdentifier",h),h=b.series[d].name,f={y:g.get(b.series[d].field),url:f};c.series[h].values[e]=f}else c.series[b.series[d].name].values[e]=g.get(b.series[d].field)}return c},
groupByTransform:function(a,b){for(var c={},d=0;d<a.length;d++){for(var e=a[d],g=e.get(b.categoryField),h={},f=0;f<b.series.length;f++)thisSeries=b.series[f],thisSeriesVal=e.get(thisSeries.description.fieldName),$.hasVal(thisSeriesVal)?"count"==thisSeries.description.aggregateFunction&&(thisSeriesVal=1):thisSeriesVal=0,h[thisSeries.name]=thisSeriesVal;e=null;if(_.has(c,g)){e=c[g];for(f=0;f<b.series.length;f++)thisSeries=b.series[f],thisSeriesVal=h[thisSeries.name],e.series[thisSeries.name]+=thisSeriesVal,
e.rowTotal+=thisSeriesVal}else{e={series:{}};e.category=g;for(f=0;f<b.series.length;f++)thisSeries=b.series[f],thisSeriesVal=h[thisSeries.name],e.series[thisSeries.name]=thisSeriesVal,e.rowTotal+=thisSeriesVal;c[g]=e}}d=[];0<a.length&&("series"==b.sortByType&&(d=_.sortBy(c,function(a){return a.series[b.sortBy]})),"category"==b.sortByType&&(d=_.sortBy(c,function(a){return a.category[b.sortBy]})),$.hasVal(b.sortOrder)&&"DESC"==b.sortOrder&&(d=d.reverse()),$.hasVal(b.limit)&&(d=_.first(d,b.limit)));
return d},tableTransform:function(a,b,c){for(var d={rowObjects:{},guestRowAry:[{},{}],totalFloaters:0,totalNewMembers:0},e={},g=0;g<a.length;g++){var h=a[g],f=h.get(b),k=this.getFormattedDate(h.get(c)),l=h.get("id"),h=h.get("guestType");"MEMBER"==h?(h=null,_.has(d.rowObjects,f)?(h=d.rowObjects[f],h[k]=l,e[(new Date(k)).getTime()]=k):(h={},h[k]=l,e[(new Date(k)).getTime()]=k,d.rowObjects[f]=h)):("FLOATER"==h?(d.totalFloaters++,guestRowAryIndex=0):(d.totalNewMembers++,guestRowAryIndex=1),h=d.guestRowAry[guestRowAryIndex],
h[k]=_.has(h,k)?h[k]+1:1)}if(0<a.length){colArray=_.keys(e);rowArray=$.hasVal(d.rowObjects)?_.keys(d.rowObjects):[""];a=colArray.sort();d.colIndex=[];for(g=0;g<a.length;g++)d.colIndex[g]=e[a[g]];d.rowIndex=rowArray.sort()}return d},formatThumbnailCat:function(){var a="<a href='#memberProfile/id'><div class='chartLabelFrame'><img class='chartLabelImg' src='photoUrl'><div class='chartLabelName'>fullName</div></div></a>";if($.hasVal(this.value))for(var b in this.value)var c=!_.isUndefined(this.value[b])?
this.value[b]:"",a=a.replace(b,c);return a},wizardChartTemplates:{bar:{chart:{renderTo:"chartContainer",type:"bar"},title:{text:"Bar Title"},credits:{enabled:!1},xAxis:{tickLength:0,lineWidth:0,categories:["cat1","cat2"],title:{text:"groupByDisplay",margin:20},labels:{color:"#fff",x:-5,useHTML:!0,formatter:function(){return 22<this.value.length?this.value.slice(0,22)+"...":this.value},style:{width:"160px",whiteSpace:"nowrap"}}},yAxis:{min:0,title:{text:"yAxisTitle"},minTickInterval:1,allowDecimals:!1},
plotOptions:{bar:{dataLabels:{enabled:!0,color:"black"}}},legend:{backgroundColor:"#FFFFFF",reversed:!0,verticalAlign:"bottom",align:"center"},series:[{borderWidth:1,borderRadius:1,pointWidth:20,shadow:!1,data:[0,0],name:"metricName"}]},pie:{chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1},title:{text:"Pie title"},tooltip:{pointFormat:"{series.name}: <b>{point.percentage:.1f}%</b>"},credits:{enabled:!1},plotOptions:{pie:{allowPointSelect:!0,slicedOffset:20,point:{events:{}},cursor:"pointer",
dataLabels:{enabled:!0,color:"#000000",connectorColor:"#000000",format:"<b>{point.name}</b>: {point.percentage:.1f} %"}}},series:[{type:"pie",data:[0,0],name:"metricName"}]}},renderStandardBarChart:function(a){chartData=a;new Highcharts.Chart({chart:{type:"bar",renderTo:chartData.renderTo,backgroundColor:"rgba(255,255,255,.3)"},title:{text:chartData.title,style:{fontWeight:"bold",textShadow:"none",fontSize:"16pt"}},xAxis:{categories:chartData.topMembers,labels:{style:{fontSize:"12pt",fontWeight:"bold"}}},
yAxis:{min:0,labels:{overflow:"justify",style:{fontSize:"12pt"}},title:{text:chartData.unitLabel},allowDecimals:!1},plotOptions:{bar:{dataLabels:{enabled:!0},color:"#008000"},series:{cursor:"pointer",point:{events:{click:function(){$.hasVal(this.options)&&$.hasVal(this.options.url)&&(window.location=this.options.url)}}}}},legend:{enabled:!1},credits:{enabled:!1},series:[{data:chartData.topMemberValues}]})},renderReferralStackedBarChart:function(a){chart=new Highcharts.Chart({chart:{renderTo:a.barDiv,
type:"bar"},credits:{enabled:!1},title:null,xAxis:{categories:["Given","Received"]},yAxis:{min:0,title:{text:"Number of Referrals"},minTickInterval:1,allowDecimals:!1},legend:{backgroundColor:"#FFFFFF",reversed:!0,itemStyle:a.itemStyle,width:a.barLegendWidth,x:a.barLegendStart,symbolWidth:a.barSymbolWidth},tooltip:{formatter:function(){return""+this.series.name+": "+this.y+""}},plotOptions:{series:{stacking:"normal",animation:a.animation}},series:[{name:"Converted",data:[a.DValues.Converted.given,
a.DValues.Converted.received],color:"#2E8B57"},{name:"Confirmed",data:[a.DValues.Confirmed.given,a.DValues.Confirmed.received],color:"#bbf9bb"},{name:"Accepted",data:[a.DValues.Accepted.given,a.DValues.Accepted.received],color:"yellow"}]})},renderContactMarketSummaryChart:function(a){chart=new Highcharts.Chart({chart:{renderTo:a.renderTo,type:"bar"},title:{text:"Contacts who Match My Criteria"},xAxis:{categories:["Estimated Income","Location","Occupation","Business: Recent activity","Property: Recent activity"],
title:{text:null}},credits:{enabled:!1},yAxis:{min:0,title:{text:"% of My Contacts"}},tooltip:{pointFormat:'<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b> ({point.percentage:.0f}%)<br/>',shared:!0},plotOptions:{bar:{stacking:"percent"}},legend:{backgroundColor:"#FFFFFF",reversed:!0},series:[{name:"No Match",color:"gray",data:[175,92,297,376,365]},{name:"Match",color:"#228B22",data:[225,308,103,24,35]}]})},renderDeDupChart:function(a){new Highcharts.Chart({chart:{type:"bar",
renderTo:a.renderTo},title:{text:"Contacts with the Most Duplicates Before Merge"},subtitle:{text:"Click bar for details"},tooltip:{enabled:!1},credits:{enabled:!1},xAxis:{categories:"George Brown;Wells Fargo;Kelly Ryan;Dean Walter;Stacey Newman;Sandra Davies;Amicis;Brian Jones;Susan - Home;Susan - Work;Kyle Lipton".split(";"),title:{text:null},tickInterval:1},yAxis:{min:0,title:{text:"Count",align:"high"},labels:{overflow:"justify"}},legend:{layout:"vertical",align:"right",verticalAlign:"top",x:-100,
y:250,floating:!0,borderWidth:1,backgroundColor:"#FFFFFF",shadow:!0},plotOptions:{series:{stacking:"normal",cursor:"pointer",point:{events:{click:function(){alert("Category: "+this.category+", value: "+this.y)}}}}},legend:{enabled:!1},credits:{enabled:!1},series:[{name:"Before Merge",data:[12,9,8,8,6,3,2,2,2,2,2]}]})},renderDeDupPieChart:function(a){new Highcharts.Chart({chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,renderTo:a.renderTo},title:{text:"Copies of Each Contact Before Merge"},
tooltip:{headerFormat:"",pointFormat:"{series.name}: <b>{point.percentage}%</b>",percentageDecimals:1},credits:{enabled:!1},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,color:"#000000",connectorColor:"#000000",formatter:function(){return"<b>"+this.point.name+"</b>: "+this.percentage+" %"}}}},series:[{type:"pie",name:"Duplicates",data:[["10+",25],["3-10",15],["2",10],["1",50]]}]})},renderClock:function(a){new Highcharts.Chart({chart:{type:"gauge",plotBackgroundColor:null,
plotBackgroundImage:null,plotBorderWidth:0,plotShadow:!1,height:140,renderTo:a.renderTo,spacingTop:0,spacingBottom:0,spacingLeft:0,spacingRight:0},credits:{enabled:!1},title:null,plotOptions:{gauge:{dial:{radius:"100%",borderColor:"black",borderWidth:5,baseLength:"50%",rearLength:"20%"}}},pane:{background:[{},{borderWidth:6,borderColor:"black",backgroundColor:"white"}]},yAxis:{labels:{enabled:!1},min:0,max:12,lineWidth:0,showFirstLabel:!1,minorTickInterval:null,minorTickWidth:1,minorTickLength:5,
minorTickPosition:"inside",minorGridLineWidth:0,minorTickColor:"#666",tickInterval:1,tickWidth:0,tickPosition:"inside",tickLength:10,tickColor:"#666",title:{text:"A M",style:{color:"darkgray",fontWeight:"normal",fontSize:"24px",lineHeight:"10px"},y:16}},tooltip:{enabled:!1},series:[{data:[{id:"hour",y:a.hours,dial:{radius:"60%",baseWidth:4,baseLength:"95%",rearLength:0}},{id:"minute",y:a.minutes,dial:{radius:"80%",baseLength:"95%",rearLength:0}}],animation:!1,dataLabels:{enabled:!1}}]})},renderCriteriaMatchWaterfallChart:function(a){new Highcharts.Chart({chart:{type:"waterfall",
renderTo:a.renderTo},title:{text:"Contacts Who Match Criteria"},xAxis:{type:"category",title:{text:"Criteria that Match"}},yAxis:{title:{text:"Number of Your Contacts"}},legend:{enabled:!1},tooltip:{headerFormat:"",pointFormat:"<b>${point.y}</b>"},series:[{color:"#228B22",data:[{name:"None",y:220},{name:"1 Only",y:72},{name:"2",y:54},{name:"3",y:38},{name:"4+",y:16}],dataLabels:{enabled:!0,formatter:function(){return this.y},style:{color:"white",fontWeight:"bold"}},pointPadding:0}]})},renderIncompleteRecordsChart:function(a){chart=
new Highcharts.Chart({chart:{renderTo:a.renderTo,type:"bar"},title:{text:"Records that couldn't be enhanceed because they lack..."},xAxis:{categories:["First Name","Last Name","Phone","Email"],title:{text:null}},credits:{enabled:!1},yAxis:{min:0,max:100,title:{text:"% of My Contacts"}},tooltip:{headerFormat:"",pointFormat:'<span style="color:{series.color}">{series.name}</span>: <b>{point.y}%</b><br/>',shared:!0},plotOptions:{},legend:{backgroundColor:"#FFFFFF",reversed:!0},series:[{name:"No Match",
color:"#b22222",data:[25,28,32,46]}]})},renderEnrichmentResultsChart:function(a){chart=new Highcharts.Chart({chart:{renderTo:a.renderTo,type:"bar"},title:{text:"% of Records with Values Before and After Enhancement"},xAxis:{categories:"First Name;Last Name;Work Phone;Home Phone;Mobile Phone;Work Email;Personal Email;Photograph;Home Street Address;Home City;Home Postal Code;Work Street Address;Work City;Work Postal Code".split(";"),title:{text:null}},credits:{enabled:!1},yAxis:{min:0,max:100,title:{text:"% of My Contacts"}},
tooltip:{headerFormat:"",pointFormat:'<span style="color:{series.color}">{series.name}</span>: <b>{point.y}%</b><br/>',shared:!0},plotOptions:{},legend:{backgroundColor:"#FFFFFF",reversed:!0,verticalAlign:"top",align:"right"},series:[{name:"After",color:"#228B22",data:[74,72,77,74,74,88,71,43,50,52,45,32,34,49]},{name:"Before",color:"#b22222",data:[64,62,57,44,34,38,41,0,31,5,8,12,14,9]}]})},formatImageLabel:function(a,b){var c=b[a].displayName,d="<div class='chartLabelFrame'><img class='chartLabelImg' src='Zsrc'><div class='chartLabelName'>ZfullName</div></div>".replace("Zsrc",
b[a].imgUrl);return d=d.replace("ZfullName",c)},renderLeaderBoardChartGiven:function(a){var b=a.model;chart=new Highcharts.Chart({chart:{renderTo:"chart1",type:"bar",backgroundColor:"transparent"},title:{text:null},subtitle:{text:null},xAxis:{tickLength:0,lineWidth:0,categories:["AA1","AA2","AA3","AA4","AA5"],title:{text:null},labels:{color:"#fff",x:5,useHTML:!0,formatter:function(){console.log(this);return $.formatImageLabel(this.value,b)}}},yAxis:{min:0,gridLineWidth:0,title:{text:null},labels:{enabled:!1}},
tooltip:{enabled:!1},plotOptions:{bar:{dataLabels:{enabled:!0,color:"black"}}},legend:{enabled:!1},credits:{enabled:!1},series:[{borderWidth:0,borderRadius:3,pointWidth:30,shadow:!1,data:a.chartSeries}]})},renderReferralProfessionPieChart:function(a){chart=new Highcharts.Chart({chart:{renderTo:a.pieDiv,plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,marginTop:0,spacingTop:0},credits:{enabled:!1},title:null,tooltip:{pointFormat:"{series.name}: <b>{point.percentage}%</b>",percentageDecimals:1},
legend:{itemStyle:a.itemStyle,margin:a.pieLegendMargin},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!1},showInLegend:!0},series:{animation:a.animation}},series:[{type:"pie",name:"Activity share",data:a.DValues}]})},renderGaugeChart:function(a,b){new Highcharts.Chart({chart:{renderTo:a,type:"gauge",alignTicks:!1,plotBackgroundColor:null,plotBorderWidth:0,plotShadow:!1,plotBackgroundImage:"images/gaugeChartBackgroundWhite.png",backgroundColor:"Blue",borderWidth:0,borderRadius:0,
spacingTop:0,spacingRight:0,spacingBottom:0,spacingLeft:0,style:{textAlign:"center",left:0,cursor:"pointer"}},exporting:{enabled:!1},credits:{enabled:!1},title:null,tooltip:{enabled:!1},pane:{startAngle:-108,endAngle:108,background:[{backgroundColor:null,borderWidth:0}]},yAxis:{min:0,max:20,labels:{step:2,rotation:"auto",style:{color:"white",fontSize:"12px"}},title:{text:null},lineWidth:0,minorTickInterval:"auto",minorTickWidth:0,minorTickLength:10,minorTickPosition:"inside",minorTickColor:"#666",
tickPixelInterval:30,tickWidth:1,tickPosition:"inside",tickLength:10,tickColor:"white"},series:[{name:"",dataLabels:{borderColor:null,borderWidth:0,color:"black",y:12,style:{fontSize:"44px"}},dial:{backgroundColor:"red"},data:[b],tooltip:{valueSuffix:""}}]})}});
