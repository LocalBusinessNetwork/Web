(function(c,f){if("object"===typeof exports){var p=require("jquery"),n=require("underscore"),a=require("backbone"),b=require("ReferralWireRouterBase");module.exports=f(p,n,a,b)}else"function"===typeof define&&define.amd&&define(["jquery","underscore","backbone","ReferralWireRouterBase"],f)})(this,function(c,f,p,n){n=(n||window.jQuery||window.Zepto||window.ender).extend({routes:{home:"home",Profile:"Profile","Profile/:profileId":"Profile",PublicProfile:"PublicProfile","PublicProfile/:profileId":"PublicProfile",
"prospectVals/:partnerId":"prospectVals",contactList:"ContactListDetail","contactList/:contactId":"ContactListDetail",memberList:"MemberListDetail","memberList/:PartnerId":"MemberListDetail",PowerPartnerCenter:"PowerPartnerCenter","PowerPartnerCenter/:id":"PowerPartnerCenter",PowerPartnerCenterByPro:"PowerPartnerCenterByPro","PowerPartnerCenterByPro/:id":"PowerPartnerCenterByPro",memberListDemo:"MemberListDetailDemo","memberListDemo/:PartnerId":"MemberListDetailDemo",memberListAdmin:"MemberListDetailAdmin",
"memberListAdmin/:PartnerId":"MemberListDetailAdmin",partnerList:"PartnerListDetail","partnerList/:PartnerId":"PartnerListDetail","partnerListDrill/:partyId":"PartnerListDrill",partnerStats:"partnerStats","partnerStats/:PartnerId":"partnerStats","partnerProfile/:PartnerId":"PartnerSocial","memberProfile/:PartnerId":"MemberSocial","memberPhotos/:PartnerId":"MemberPhotos","MemberOnlineInvites/:PartnerId":"MemberOnlineInvites","MemberGuestInvites/:PartnerId":"MemberGuestInvites","MemberMap/:PartnerId":"MemberMap",
"PartnerMap/:PartnerId":"PartnerMap",BusinessDirectorySearch:"BusinessDirectorySearch","BusinessDirectorySearch/:keyword/:zipCode":"BusinessDirectorySearch","BusinessDirectorySearch/:id/:category/:keyword/:zipCode":"BusinessDirectorySearch",BusinessDirectoryMap:"BusinessDirectoryMap","BusinessDirectoryMap/:id":"BusinessDirectoryMap","BusinessDirectoryMap/:id/:category/:keyword/:zipCode":"BusinessDirectoryMap",BusinessDirectoryDetails:"BusinessDirectoryDetails","BusinessDirectoryDetails/:id":"BusinessDirectoryDetails",
"BusinessDirectoryDetails/:id/:category/:keyword/:zipCode":"BusinessDirectoryDetails",speakerList:"speakerList","speakerList/:id":"speakerList",speakerMap:"speakerMap","speakerEngagements/:id":"speakerEngagements",speakerReport:"speakerReport","speakerReport/:id":"speakerReport",speakerRatingReport:"speakerRatingReport","speakerRatingReport/:id":"speakerRatingReport",partnerPhotos:"PartnerPhotos","partnerPhotos/:PartnerId":"PartnerPhotos",partnerTestimonials:"PartnerTestimonials","partnerTestimonials/:PartnerId":"PartnerTestimonials",
partnerReferrals:"PartnerReferrals","partnerReferrals/:PartnerId":"PartnerReferrals","partnerRecommendations/:PartnerId":"PartnerRecommendations","powerRecommendations/:PartnerId":"PowerPartnerRecommendations","resourceRecommendations/:PartnerId":"ResourceRecommendations",OrgList:"OrgListDetail","OrgList/:OrgId":"OrgListDetail",OrgListMap:"OrgListMap","OrgMembers/:OrgId":"OrgMembers","OrgPhotos/:id":"OrgPhotos","OrgEvents/:id":"OrgEvents","OrgDashboard/:id":"OrgDashboard","OrgDashReferrals/:id":"OrgDashReferrals",
"OrgDashGuests/:id":"OrgDashGuests","OrgDashProspectRef/:id":"OrgDashProspectRef",AllUpcomingEvents:"AllUpcomingEvents","AllUpcomingEvents/:id":"AllUpcomingEvents",MyEvents:"MyEvents","MyEvents/:id":"MyEvents","EventExpected/:id":"EventExpected","EventCheckedIn/:id":"EventCheckedIn","EventGuests/:id":"EventGuests",AssocList:"AssocListDetail","AssocList/:AssocId":"AssocListDetail",offers:"ReferralOffersList","offers/:id":"ReferralOffersList","contactReferrals/:contactId":"ContactReferrals",referralLBMyProf:"referralLBMyProf",
"referralLBMyProf/:id":"referralLBMyProf",referralLBMyPowerPartners:"referralLBMyPowerPartners","referralLBMyPowerPartners/:id":"referralLBMyPowerPartners",referralLeaderBoardMade:"referralLeaderBoardMade",referralLeaderBoardConverted:"referralLeaderBoardConverted",referralLeaderBoardInvited:"referralLeaderBoardInvited",referralLeaderBoardGuests:"referralLeaderBoardGuests",referralInbox:"ReferralInbox","referralInbox/:selectedId":"ReferralInbox",ReferralInboxConnections:"ReferralInboxConnections",
"referralProspect/:selectedId":"ReferralProspect",referralOutbox:"ReferralOutbox",ReferralOutboxConnections:"ReferralOutboxConnections","referralOutbox/:selectedId":"ReferralOutbox",referralArchive:"ReferralArchive","referralArchive/:selectedId":"ReferralArchive",requestReferrals:"RequestReferrals","requestReferrals/:id":"RequestReferrals",recedeReferrals:"RecedeReferrals","recedeReferrals/:id":"RecedeReferrals","MostPRefInChapterDrill/:id":"MostPRefInChapterDrill","importContacts/:id":"importContacts",
showError:"showError","help/:page":"help","profileSocial/:id":"profileSocial","speakerBio/:id":"speakerBio",profileSocial:"profileSocial",profilePhotos:"profilePhotos",profileTarget:"profileTarget","profileTarget/:id":"profileTarget","profilePhotos/:id":"profilePhotos",profileTestimonials:"profileTestimonials","profileTestimonials/:id":"profileTestimonials",myRecommendations:"myProspectRecs","myRecommendations/:id":"myProspectRecs","targetAnalysis/:id":"myTargetAnalysis",stats:"stats","stats/:id":"stats",
"enrichResults/:id":"enrichedRecords","incompleteRecords/:id":"incompleteRecords",preferences:"preferences","preferences/:id":"preferences",Pay:"Paypaldialog",signout:"signout","billing/:id":"billingMD","receipts/:id":"receiptsMD","lookupPartnerProfile/:partyId":"lookupPartnerProfile","lookupContactProfile/:partyId":"lookupContactProfile","lookupPartnerProfile/:partyId/:partyType":"lookupPartnerProfile_P2P",passwordReset:"passwordReset","password/:id":"passwordChange","paypalSetup/:id":"paypalIdChange",
facebook:"facebook","facebook/:id":"facebook","invite_linkedin/:id":"invite_linkedin",invite_linkedin:"invite_linkedin",professionList:"professionList","professionList/:id":"professionList","professionTarget/:id":"professionTarget","professionRefReason/:id":"professionRefReason",infoConnectList:"infoConnectList","infoConnectList/:id":"infoConnectList","infoConCriteria/:id":"infoConCriteria","infoConParty/:id":"infoConParty",criteriaList:"criteriaList","criteriaList/:id":"criteriaList","criteriaRefReason/:id":"criteriaRefReason",
"criteriaInfoConnect/:id":"criteriaInfoConnect","criteriaCategories/id":"criteriaCategories","PowerPartners/:id":"PowerPartners",BusinessList:"BusinessListDetail","BusinessList/:id":"BusinessListDetail",awardList:"awardList","awardList/:id":"awardList",metricList_admin:"metricList_admin","metricList_admin/:id":"metricList_admin",emailTemplateList_admin:"emailTemplateList_admin","emailTemplateList_admin/:id":"emailTemplateList_admin",imageList_admin:"imageList_admin","imageList_admin/:id":"imageList_admin",
reports_admin:"reports_admin","reports_admin/:id":"reports_admin",listadmin:"listadmin","listadmin(/:type)(/:id)":"listadmin","accountadmin(/:id)":"accountadmin","tenant(/:id)":"tenant","*actions":"defaultRoute"},home:function(){var a=new ReferralWire.HomePageModel;rwcore.spinOn();a.fetch({error:function(){rwcore.spinOff();window.location="/login.jsp"},success:function(a){new ReferralWire.HomePageView({model:a,template:"home"});rwApp.uId=a.get("id");rwApp.zip=a.get("postalCodeAddress");rwFB.iconDirectory=
rwFB.CDN+"/images/icons/";rwFB.HeaderName="ReferralWire";c.renderGaugeChart("givenGauge",a.get("LastTwoWeeksReferralsSent"));c.renderGaugeChart("receivedGauge",a.get("LastTwoWeeksReferralsRcvd"));a=c("#left-panel").attr("client");c.hasVal(a)&&"web"==a&&(c("#left-panel").html(f.template("WebNavPanel")()).trigger("create"),c("[group]").hoverIntent(hoverToggleMenu),c(".menuPull").hoverIntent(panelOpen));rwcore.spinOff()}})},importContacts:function(){var a=new ReferralWireView.PopupView({template:"ImpConTemplate"});
c("#PopupContainer").html(a.render().el).trigger("create");c("#pickBackground").show(50);c("#PopupContainer").show(50)},printProfile:function(a){var b=document.getElementById("printcontent").outerHTML;a="<html><head><title>ZName ReferralWire Profile</title>".replace("ZName",a);var c=window.open("","printPage","height=1400,width=685");c.document.write(a);c.document.write('<link rel="stylesheet" href="/style/jquery.mobile120.min.css" type="text/css" />');c.document.write('<link rel="stylesheet" href="/style/ss_style.css" type="text/css" />');
c.document.write('</head><body style="font-family: Helvetica, Arial, sans-serif;">');c.document.write(b);c.document.write("</body></html>")},sharePartnerInfo:function(a){var b=a.model;a=c.hasVal(a.sendTo)?a.sendTo:"";var d=b.get("fullName_pub"),e=c.getPosition(b.get("jobTitle_pub"),b.get("business_pub")),h=b.get("bio"),j=b.get("emailAddress_pub"),f=b.get("workPhone_pub"),l=b.get("mobilePhone_pub"),b=d+"%0D%0A"+(e+"%0D%0A %0D%0A"),b=b+(c.hasVal(h)?encodeURI(h)+"%0D%0A %0D%0A":""),b=b+(c.hasVal(j)?
j+"%0D%0A":""),b=b+(c.hasVal(f)?f+" (work) %0D%0A":""),b=b+(c.hasVal(l)?l+" (mobile)":""),d="Contact Information for "+d+(c.hasVal(e)?": "+e:"");a="mailto:ZSendTo?subject=ZSubject&body=ZBody".replace("ZSendTo",a);a=a.replace("ZSubject",d);a=a.replace("ZBody",b);a=a.replace(" ","%20");window.location.href=a},removeEmptyFields:function(){c(".remove").remove();c("ul.formfields li:last-child").addClass("ui-corner-bottom");c("ul.formfields li:last-child").addClass("ui-li-last");c("ul.formfields li:first-child").addClass("ui-first-child");
c("div.cPanel.std:not(:has(li))").remove()},addAdvancedSearch:function(){alert("add advancedSearch")},getAddrHistoryViewBarApplet:function(a){var b="ContactHistoryViewBar";c.hasVal(a)&&"REFERRAL_PARTNER"==a.get("type")&&(b="PartnerReferralsViewBar");return b},getAddrViewBarTemplate:function(a){var b="ActionBarTemplate";c.hasVal(a)&&"REFERRAL_CONTACT"==a.get("type")&&(b="ContactActionBarTemplate");return b},getEventsList:function(a){var b="UpcomingEventListFuture";c.hasAccess({routeName:a.clickRoute,
record:a,privilege:"add"})&&(b="EventList");return b},getAppletMenu:function(a){var b="EmptyMenu";if(!f.isUndefined(a)){var d=a.clickRoute,e={routeName:d,record:a};f.contains(["memberList","memberProfile","memberListDemo"],d)&&(e.privilege="editFull",c.hasAccess(e)?b="EditMemberRoleMenu":(e.privilege="designateAmbassador",c.hasAccess(e)&&(b="DesignateAmbassadorMenu")));f.contains(["memberListAdmin"],d)&&(e.privilege="editFull",c.hasAccess(e)&&(b="ProfilePubMenu"));"OrgList"==d&&(e.privilege="editFull",
c.hasAccess(e)?b="OrgListAppletMenu":(e.privilege="edit",c.hasAccess(e)&&(b="OrgListEditMenu")));"OrgPhotos"==d&&(e.privilege="edit",c.hasAccess(e)&&(b="OrgListEditMenu"));"OrgEvents"==d&&(e.privilege="add",c.hasAccess(e)&&(b="OrgEventsMenu"));f.contains(["EventExpected","EventCheckedIn","EventGuests"],d)&&(e.privilege="editFull",c.hasAccess(e)?b="EventFullEditMenu":(e.privilege="addGuest",c.hasAccess(e)&&(b="EventAddGuestMenu")));"speakerBio"==d&&(e.privilege="edit",c.hasAccess(e)&&(b="ProfileMenu"));
if("BusinessDirectoryDetails"==d&&(a.get("id")==rwFB.employerId||"admin.user@referralwire.com"==rwFB.emailAddress))b="ProfileMenu"}return b},criteriaAssociationMap:{GlobalVal:"GlobalVal",name:"DisplayVal",DisplaySeq:"DisplaySeq",category:"Group"},professionCriteriaAssociationMap:{child_GlobalVal:"GlobalVal",child_DisplayVal:"DisplayVal",child_DisplaySeq:"DisplaySeq",child_LovType:"LovType",childId:"id",child_Group:"Group"},refreshContactAfterInsert:function(a){a="lookupContactProfile/"+a.get("id");
p.history.fragment==a&&(p.history.fragment=null);rwApp.navigate(a,{trigger:!0,replace:!0})},refreshEventInvite:function(){alert("refresh")},updateKeyFieldSilent:function(a){var b=a.actionRecordId,d=a.dview,b=d.model.hasOwnProperty("models")?d.model.get(b):d.model;b.get("id");var e=a.hasOwnProperty("refreshFunction")?a.refreshFunction:"";for(item in a.setFieldMap)b.set(item,a.setFieldMap[item]);b.save({},{success:function(){c.hasVal(e)&&e()},error:function(a,b,c){f.isUndefined(d.error)||d.error(a,
b,c)},done:function(){}})},SaveCriteria:function(a){var b=a.model,c=a.currentAppletView;a=a.parentView.options.masterview.model.id;b.query.act="associate";b.query.partyId=a;b.query.partyRelation="TARGET";a=b.toJSON();b.query.data=a;b.dataout={data:JSON.stringify(b.query)};b.sync("associate",b,{success:function(){c.cancelUpdate()},error:rwcore.showError})},SaveGenericAssociation:function(a){var b=a.model,d=a.parentView.options.masterview.model.id,e=a.currentAppletView;c.hasVal(b.query)||(b.query={},
b.query.module="LOVMapMgr");b.query.act="associate";b.query.parentKey="eventId";b.query.parentKeyVal=d;b.query.defaultVals=[{foo:"bar"},{bada:"bing"}];a=b.toJSON();b.query.data=a;b.dataout={data:JSON.stringify(b.query)};b.options.act="associate";b.sync("associate",b,{success:function(){e.cancelUpdate()},error:rwcore.showError})},SaveLovAssociation:function(a){var b=a.model,d=a.currentAppletView,e=a.parentView.options.masterview.model.id,h=a.parentView.options.masterview.model.get("GlobalVal"),j=a.parentView.options.masterview.model.get("DisplayVal"),
f=a.parentView.options.masterview.model.get("LovType");a=a.wizardSpec.saveAssociationLovTypes;c.hasVal(b.query)||(b.query={});b.query.act="associate";b.query.parentId=e;b.query.module="LOVMapMgr";b.query.childLovTypes=a;b.query.parent_GlobalVal=h;b.query.parent_DisplayVal=j;b.query.parent_LovType=f;e=b.toJSON();b.query.data=e;b.dataout={data:JSON.stringify(b.query)};b.options.act="associate";b.sync("associate",b,{act:"associate",success:function(){d.cancelUpdate()},error:rwcore.showError})},OONReferral:function(a){a.save({},
{success:function(){c("#upsertRecord").animate({top:1E3},500,function(){c(this.el).hide(50);c(".overlay-background").toggle(0);c("#upsertRecord").css("bottom","auto");c("#upsertRecord").css("height","99%");c("#upsertRecord").css("top","100%");c("#upsertRecord").hide();var a=c("#PopupContainer");a.html(f.template("ReferralSentConfirmation")());a.addClass("confirmation");c(".overlay-background").show();a.show();a.one("click","[popEvent]",function(){a.hide();c(".overlay-background").hide();a.removeClass("confirmation");
rwApp.preventNavigation=!1})})},error:rwcore.showError})},newInvitationWizard:function(){},PublicProfile:function(a){this.GenericSummaryDetailPattern({selectedId:a,summaryapplet:"PartnerProfileViewBar",summaryTemplate:"ProfileNavigation",viewBarApplet:"PartnerProfileViewBar",profileNavigation:!0,detailapplet:"Qualifications",detailTemplate:"PublicProfileForm",clickRoute:"PublicProfile",appletMenu:"PublishProfileMenu",viewTitle:"My Public Profile",viewTemplate:"LeftNavSummaryDetailView"})},Profile:function(a){this.GenericSummaryDetailPattern({summaryapplet:"PartnerProfileViewBar",
summaryTemplate:"ProfileNavigation",viewTemplate:"LeftNavSummaryDetailView",detailapplet:"PartyAppletForm",upsertApplet:"PartyUpsertForm",viewBarApplet:"PartnerProfileViewBar",clickRoute:"Profile",appletMenu:"ProfileMenu",viewTitle:"My Contact Information",selectedId:a,profileNavigation:!0,detailTemplate:"StdForm"})},speakerBio:function(a){this.GenericSummaryDetailPattern({summaryapplet:"PartnerProfileViewBar",summaryTemplate:"ProfileNavigation",viewTemplate:"LeftNavSummaryDetailViewIFrame",detailapplet:"PartySpeakerForm",
detailTemplate:"STN_speakerInviteMessage",upsertApplet:"PartySpeakerUpsertForm",viewBarApplet:"PartnerProfileViewBar",clickRoute:"speakerBio",appletMenu:"ProfileMenu",viewTitle:"My Speaking Qualifications",selectedId:a,profileNavigation:!0})},profileSocial:function(a){this.GenericSummaryDetailPattern({profileId:a,summaryapplet:"PartnerProfileViewBar",summaryTemplate:"ProfileNavigation",viewBarApplet:"PartnerProfileViewBar",profileNavigation:!0,detailapplet:"Qualifications",detailTemplate:"QualificationsForm",
viewTemplate:"ProfileEditorView",clickRoute:"profileSocial",appletMenu:"ProfileWizardEdit",viewTitle:"About Me",upsertWizard:{viewTemplate:"WizardUpsertView",stations:["Pictures and Web Links","Introduction & Specialties","Testimonials"],firstApplet:{name:"PicturesAndLinksUpsert"},nextAppletFunctions:{PicturesAndLinksUpsert:function(){return{name:"QualificationsUpsert"}},QualificationsUpsert:function(){return{name:"Testimonials"}}}}})},printProfileViewDef:{summaryapplet:"PartyAppletForm",summaryTemplate:"StdForm",
detailapplet:"Qualifications",detailTemplate:"QualificationsForm",viewBarApplet:"PartnerSocialViewBar",appletMenu:"PartnerMenu",viewTemplate:"ProfilePrintView",clickRoute:"partnerSocial",showProfileViewBar:!0,viewTitle:"Partner Profile",viewEL:"#printPage",done:function(a){c("#printPage").hide();a=a.options.listview.model.get("fullName");rwApp.printProfile(a)}},preferences:function(a){this.GenericSummaryDetailPattern({summaryapplet:"PartnerProfileViewBar",summaryTemplate:"ProfileNavigation",viewTemplate:"LeftNavSummaryDetailView",
profileNavigation:!0,viewBarApplet:"PartnerProfileViewBar",detailapplet:"ProfilePreferences",clickRoute:"preferences",selectedId:a,appletMenu:"ProfileMenu",viewTitle:"My Preferences",detailTemplate:"PreferencesForm",tooltipSource:"preferences"})},profilePhotos:function(a){this.GenericSummaryDetailPattern({summaryapplet:"PartnerProfileViewBar",summaryTemplate:"ProfileNavigation",viewTemplate:"LeftNavSummaryDetailView",profileNavigation:!0,detailapplet:"ProfileImages",viewBarApplet:"PartnerProfileViewBar",
clickRoute:"profilePhotos",viewTitle:"My Photos",selectedId:a,appletMenu:"ProfileMenu",detailTemplate:"PhotoGalleryThumbs"})},profileTarget:function(){this.GenericMasterDetailPattern({masterApplet:"ProfileSocialForm",masterTemplate:"SpecialtiesMasterUser",usePaging:!0,detailListApplet:"TargetCriteriaList",viewBarApplet:"MyCriteriaViewBar",detailListTemplate:"StdList",detailRenderer:ReferralWireView.ListView,MDTemplate:"StdMasterDetailView",searchSpec:{filter:[{ftype:"expr",expression:"{partyRelation : 'TARGET'}"}]},
parentKeyField:"id",detailSearchSpec:{partyId:"id"},viewTitle:"My Target Customer Profile",appletMenu:"ProfileTargetMenu",sortby:"DisplaySeq",upsertWizard:{saveFunction:rwApp.SaveCriteria,viewTemplate:"WizardUpsertView",stations:["Household","Wealth and Property","Professional"],firstApplet:{name:"HouseHoldCriteria",renderer:ReferralWireView.AssociationView,template:"StdList",setFilter:!1,toApplet:"TargetCriteriaList",toSetFilter:!1,toHtmlTemplate:"StdList",toClientSideSortAttr:"DisplaySeq",toCustomRowAttr:{attrName:"data-icon",
attrVal:"delete"},associationMap:rwApp.criteriaAssociationMap},nextAppletFunctions:{HouseHoldCriteria:function(){return{name:"WealthAndPropertyCriteria",renderer:ReferralWireView.AssociationView,template:"StdList",setFilter:!1,toApplet:"TargetCriteriaList",toSetFilter:!1,toHtmlTemplate:"StdList",toClientSideSortAttr:"DisplaySeq",toCustomRowAttr:{attrName:"data-icon",attrVal:"delete"},associationMap:rwApp.criteriaAssociationMap}},WealthAndPropertyCriteria:function(){return{name:"BusinessCriteria",
renderer:ReferralWireView.AssociationView,template:"StdList",setFilter:!1,toApplet:"TargetCriteriaList",toSetFilter:!1,toHtmlTemplate:"StdList",toClientSideSortAttr:"DisplaySeq",toCustomRowAttr:{attrName:"data-icon",attrVal:"delete"},associationMap:rwApp.criteriaAssociationMap}}}}})},prospectVals:function(a){this.GenericMasterDetailPattern({masterApplet:"PartnerSocialForm",masterTemplate:"SpecialtiesMasterPartner",masterRecordId:a,detailListApplet:"TargetCriteriaList",viewBarApplet:"MyCriteriaViewBar",
detailListTemplate:"StdList",detailRenderer:ReferralWireView.ListView,MDTemplate:"StdMasterDetailView",viewTitle:"Prospect Profile",appletMenu:"ProfileTargetMenu",clientSideSortAttr:"child_DisplaySeq",parentKeyField:"partnerId",searchSpec:{filter:[{ftype:"expr",expression:"{partyRelation : 'DESCRIPTOR'}"}]},detailSearchSpec:{partyId:"partnerId"},sortby:"category",upsertWizard:{saveFunction:rwApp.SaveCriteria,viewTemplate:"WizardUpsertView",stations:["Wealth and Property","Household","Professional"],
firstApplet:{name:"WealthAndPropertyCriteria",renderer:ReferralWireView.AssociationView,template:"StdList",setFilter:!1,toApplet:"TargetCriteriaList",toSetFilter:!1,toHtmlTemplate:"StdList",toClientSideSortAttr:"name",toCustomRowAttr:{attrName:"data-icon",attrVal:"delete"}},nextAppletFunctions:{WealthAndPropertyCriteria:function(){return{name:"HouseHoldCriteria",renderer:ReferralWireView.AssociationView,template:"StdList",setFilter:!1,toApplet:"TargetCriteriaList",toSetFilter:!1,toHtmlTemplate:"StdList",
toClientSideSortAttr:"name",toCustomRowAttr:{attrName:"data-icon",attrVal:"delete"}}},HouseHoldCriteria:function(){return{name:"BusinessCriteria",renderer:ReferralWireView.AssociationView,template:"StdList",setFilter:!1,toApplet:"TargetCriteriaList",toSetFilter:!1,toHtmlTemplate:"StdList",toClientSideSortAttr:"name",toCustomRowAttr:{attrName:"data-icon",attrVal:"delete"}}}}}})},profileTestimonials:function(a){this.GenericSummaryDetailPattern({summaryapplet:"ProfileTestimonialsViewBar",summaryTemplate:"ProfileNavigation",
viewTemplate:"LeftNavSummaryDetailView",profileNavigation:!0,detailapplet:"Testimonials",viewBarApplet:"ProfileTestimonialsViewBar",clickRoute:"profileTestimonials",viewTitle:"My Testimonials",selectedId:a,appletMenu:"ProfileMenu",viewTitle:"Testimonials",detailTemplate:"Testimonials"})},myProspectRecs:function(){var a=rwApp.ContactRefWizard_Recommendation();this.GenericMasterDetailPattern({masterApplet:"ProfileSocialForm",masterTemplate:"SpecialtiesMasterUser",parentKeyField:"credId",appletMenu:"EmptyMenu",
detailListApplet:"RecommendedProspects",detailListTemplate:"RecommendationsListUser",searchSpec:{filter:[{ftype:"expr",expression:"{type : 'CUST_FOR_USER'}"},{ftype:"expr",expression:"{status : {$ne:'IGNORED'}}"}]},detailSearchSpec:{memberId:"credId"},dynamicTitles:[{template:"Best Prospects Among my Contacts",fields:[{fullName:"ZValue"}]}],viewBarApplet:"MyRecommendationsViewBar",MDTemplate:"MasterDetailViewNarrow",sortby:"score",sortOrder:"DESC",limit:6,shareFunction:function(a){var c=a.detailRecord.get("contact_emailAddress");
rwApp.sharePartnerInfo({model:a.model,sendTo:c})},refWizard:a,inviteFields:{toFirstNameField:"contact_firstName",toFullNameField:"contact_fullName",toPartyIdField:"contactPartyId",toPartyTypeField:"contact_partyType",toEmailField:["contact_emailAddress","contact_emailAddress"]}})},myTargetAnalysis:function(){this.GenericSummaryDetailPattern({summaryapplet:"ProfileSocialForm",summaryTemplate:"SpecialtiesMasterUser",viewTemplate:"StdSummaryChartView",detailapplet:"Testimonials",viewBarApplet:"MyTargetAnalysisViewBar",
viewTitle:"Market Analysis of My Contacts",appletMenu:"EmptyMenu",done:function(){var a=c(_template("Snippets")()).find("#CriteriaMatchSummary").html();c("#chart1").html(a);c.renderContactMarketSummaryChart({renderTo:"chart2"})}})},stats:function(){this.GenericSummaryDetailPattern({summaryapplet:"StatsDuplicatesViewBar",summaryTemplate:"ProfileNavigation",viewTemplate:"LeftNavSummaryChartView",profileNavigation:!0,detailapplet:"Testimonials",viewBarApplet:"StatsDuplicatesViewBar",appletMenu:"EmptyMenu",
viewTitle:"Merged Duplicates",detailTemplate:"Testimonials",done:function(){c.renderDeDupPieChart({renderTo:"chart1"});c.renderDeDupChart({renderTo:"chart2"})}})},incompleteRecords:function(){this.GenericSummaryDetailPattern({summaryapplet:"StatsIncompleteViewBar",summaryTemplate:"ProfileNavigation",viewTemplate:"LeftNavSummaryChartView",profileNavigation:!0,detailapplet:"Testimonials",viewBarApplet:"StatsIncompleteViewBar",viewTitle:"Incomplete Records",appletMenu:"EmptyMenu",detailTemplate:"Testimonials",
done:function(){c.renderIncompleteRecordsChart({renderTo:"chart3"});c("#detailRecords").html("filtered list goes here")}})},enrichedRecords:function(){this.GenericSummaryDetailPattern({summaryapplet:"StatsEnhancementViewBar",summaryTemplate:"ProfileNavigation",viewTemplate:"LeftNavSummaryChartView",profileNavigation:!0,detailapplet:"Testimonials",viewBarApplet:"StatsEnhancementViewBar",viewTitle:"Enhancement Results",appletMenu:"EmptyMenu",detailTemplate:"Testimonials",done:function(){c("#chart3").css("height",
"800px");c.renderEnrichmentResultsChart({renderTo:"chart3"})}})},billingMD:function(a){this.GenericMasterDetailPattern({masterApplet:"ProfileBillingViewBar",masterTemplate:"ProfileNavigation",profileNavigation:!0,masterRecordId:a,detailListApplet:"BillingAppletList",viewBarApplet:"ProfileBillingViewBar",detailListTemplate:"MultiColumnList",detailRenderer:ReferralWireView.MultiColumnListView(),MDTemplate:"LeftNavMDMCView",viewTitle:"Billing",appletMenu:"BillingMenu",sortby:"rw_created_on",sortOrder:"DESC",
tooltipSource:"billingMD"})},receiptsMD:function(a){this.GenericMasterDetailPattern({masterApplet:"ProfileReceiptsViewBar",masterTemplate:"ProfileNavigation",profileNavigation:!0,masterRecordId:a,detailListApplet:"ReceiptsAppletList",viewBarApplet:"ProfileReceiptsViewBar",detailListTemplate:"MultiColumnList",detailRenderer:ReferralWireView.MultiColumnListView,MDTemplate:"LeftNavMDMCView",viewTitle:"Receipts",appletMenu:"EmptyMenu",sortby:"rw_created_on",sortOrder:"ASC",tooltipSource:"receiptsMD"})},
passwordChange:function(a){var b=this;this.GenericSummaryDetailPattern({summaryapplet:"PartnerProfileViewBar",summaryTemplate:"ProfileNavigation",viewTemplate:"LeftNavSummaryDetailView",profileNavigation:!0,viewBarApplet:"PartnerProfileViewBar",detailapplet:"ChangePasswordForm",clickRoute:"password",selectedId:a,appletMenu:"shortUpdate",viewTitle:"Change Password",tooltipSource:"passwordChange",detailTemplate:"changePasswordTemplate",done:function(){c(rwApp.params.modules[1]).off("click","#Submit");
c(rwApp.params.modules[1]).on("click","#Submit",b,function(){var a=c("#newPassword_1").val(),b=c("#newPassword_2").val(),h=c("#currentPassword").val();f.isEmpty(h)?rwcore.FYI("Current Password Can't be empty"):f.isEmpty(a)?rwcore.FYI("New Password Con't be empty"):6>a.length?rwcore.FYI("New Password need to be 6 letters minimum"):a!=b?rwcore.FYI("Please verify new password"):(a=new rwcore.StandardModel({module:"SecMgr"}),a.set({password:h}),a.set({newPassword:b}),a.call("changePassword",a,{add:!0,
error:rwcore.showError,success:function(){rwcore.FYI("Your Password Changed successfully");rwApp.navigate("#home",{trigger:!0})}}))})}})},facebook:function(a){var b=this;rwcore.FBMatch({offset:"0"}).done(function(c){b.GenericSummaryTilesPattern({summaryapplet:"PartnerProfileViewBar",summaryTemplate:"ProfileNavigation",viewTemplate:"LeftNavTilesDetailView",detailapplet:"FaceBookFriendsList",upsertApplet:"FaceBookFriendsList",viewBarApplet:"PartnerProfileViewBar",clickRoute:"facebook",appletMenu:"EmptyMenu",
viewTitle:"Invite Facebook Friends <font class='titlehighlight'>(limit to 5 per day)</font>",selectedId:a,profileNavigation:!0,detailTemplate:"StdTiles",regionId:"FaceBookRegionSelector",noRecordsMsg:"We were unable to access your Facebook friends",data:c})}).fail(function(a){rwcore.FYI(a)})},invite_linkedin:function(a){var b=this;rwcore.LNMatch({offset:"0"}).done(function(c){b.GenericSummaryTilesPattern({summaryapplet:"PartnerProfileViewBar",summaryTemplate:"ProfileNavigation",viewTemplate:"LeftNavTilesDetailView",
detailapplet:"LinkedInConnectionList",upsertApplet:"LinkedInConnectionList",viewBarApplet:"PartnerProfileViewBar",clickRoute:"invite_linkedin",appletMenu:"EmptyMenu",viewTitle:"Invite LinkedIn Connections <font class='titlehighlight'>(limit to 25 per day)</font>",selectedId:a,profileNavigation:!0,detailTemplate:"LinkedInTiles",regionId:"LinkedIdRegionSelector",data:c})})},MemberListDetail:function(a){var b="All";"AllNewMembers"==a&&(b="All New Members",a=void 0);"NewPowerPartners"==a&&(b="New Power Partners",
a=void 0);"WhosLookingForMe"==a&&(b="New Members Looking for Me",a=void 0);var d=this;rwApp.fetchSavedSearch({searchName:b,searchGroup:"members"}).done(function(e){e=c.hasVal(e)&&0<e.models.length?e.models[0]:void 0;d.GenericListDetailPattern({listapplet:"MemberAppletList",usePaging:!0,sortby:"memberRankScore",sortOrder:"DESC",formapplet:rwApp.getPublicMemberApplet,upsertApplet:"PartyUpsertForm",appletMenu:rwApp.getAppletMenu,appletMenuRight:"MemberMenu",viewBarApplet:"MembersViewBar",clickRoute:"memberList",
actor:"PartyMgr",viewTitle:"All Members",searchSpec:{filter:[{expression:{partytype:"PARTNER"},ftype:"expr"}]},selectedId:a,listTemplate:"AllMembersListBadges",formTemplate:"StdFormMemberBadges",listItemClass:"rw_listitem hasBadges",refWizard:rwApp.ContactRefWizard,savedSearch:{searchGroup:"members",actor:"PartyMgr",bo:"Party",bc:"Party",searchAppletName:"MemberSearchForm",searchAppletTemplate:"SearchForm",title:"Member Search",dssName:b,dssModel:e}})})},PowerPartnerCenter:function(a){var b="My New Power Partners - Last 4 Weeks";
"NewPowerPartners"==a&&(b="My New Power Partners - Last 4 Weeks",a=void 0);var d=this;rwApp.fetchSavedSearch({searchName:b,searchGroup:"powerpartners"}).done(function(e){e=c.hasVal(e)&&0<e.models.length?e.models[0]:void 0;d.GenericListDetailPattern({listapplet:"MemberAppletList",usePaging:!0,sortby:"memberRankScore",sortOrder:"DESC",formapplet:"EmptyMenu",formTemplate:"EmptyMenu",viewBarApplet:"MembersViewBar",clickRoute:"PowerPartnerCenter",selectedId:a,appletMenu:"EditPowerPartnerProfessions",viewTemplate:"PowerCenterListDetailView",
upsertApplet:"PowerPartnerUpsertForm",viewTitle:"My Power Partners",listTemplate:"MembersDrillList",secondTierNav:[{label:"By Chapter",state:"selected",iconId:"ChapterHome_sm_sel",route:"",key:""},{label:"By Profession",state:"",iconId:"MapIcon_black",route:"PowerPartnerCenterByPro",key:""}],savedSearch:{searchGroup:"powerpartners",actor:"PartyMgr",bo:"Party",bc:"Party",searchAppletName:"MemberSearchForm",searchAppletTemplate:"SearchForm",title:"Member Search",notUserConfigurable:!0,dssName:b,dssModel:e},
done:function(a){if(c.hasVal(rwFB.powerpartner1)){var b=new ReferralWireView.ChartView({chartName:"PowerPartnerChapters",containerEl:"chartContainer",defaultHeight:500,pointSelectFunction:function(b){var e=a.searchModel;e.set({OrgId:b.point.id,org_businessName:b.point.name,noChartFilter:!0});a.applySavedSearch(e);b=b.point.name.replace("Successful","");b=b.replace("Thinkers","");c(".savedSearchName").html(b);c("#view-title-suffix").html(" -- "+b)}});b.searchRequest=a.options.listview.model.options.searchRequest;
a.ChartView=b;b.render()}else c(".leaderboard-need-details").removeClass("hidden"),c(".powerPartnerFrame").remove()}})})},PowerPartnerCenterByPro:function(a){var b=this;rwApp.fetchSavedSearch({searchName:"My New Power Partners - Last 4 Weeks",searchGroup:"powerpartners"}).done(function(d){d=c.hasVal(d)&&0<d.models.length?d.models[0]:void 0;b.GenericListDetailPattern({listapplet:"MemberAppletList",usePaging:!0,sortby:"memberRankScore",sortOrder:"DESC",formapplet:"EmptyMenu",formTemplate:"EmptyMenu",
viewBarApplet:"MembersViewBar",clickRoute:"PowerPartnerCenter",selectedId:a,appletMenu:"EditPowerPartnerProfessions",viewTemplate:"PowerCenterListDetailView",upsertApplet:"PowerPartnerUpsertForm",viewTitle:"My Power Partners",listTemplate:"MembersDrillList",secondTierNav:[{label:"By Chapter",state:"",iconId:"ChapterHome_sm_sel",route:"PowerPartnerCenter",key:""},{label:"By Profession",state:"selected",iconId:"MapIcon_black",route:"",key:""}],savedSearch:{searchGroup:"powerpartners",actor:"PartyMgr",
bo:"Party",bc:"Party",searchAppletName:"MemberSearchForm",searchAppletTemplate:"SearchForm",title:"Member Search",notUserConfigurable:!0,dssName:"My New Power Partners - Last 4 Weeks",dssModel:d},done:function(a){if(c.hasVal(rwFB.powerpartner1)){var b=new ReferralWireView.ChartView({chartName:"PowerPartnerProfessions",containerEl:"chartContainer",defaultHeight:500,pointSelectFunction:function(b){var d=a.searchModel;d.set({profession:b.point.name,noChartFilter:!0});a.applySavedSearch(d);b=b.point.name.replace("Successful",
"");c(".savedSearchName").html(b);c("#view-title-suffix").html(" -- "+b)}});b.searchRequest=a.options.listview.model.options.searchRequest;a.ChartView=b;b.render()}else c(".leaderboard-need-details").removeClass("hidden"),c(".powerPartnerFrame").remove()}})})},MemberListDetailDemo:function(a){this.GenericListDetailPattern({listapplet:"MemberAppletList",usePaging:!0,sortby:"firstName",formapplet:"PartyAppletForm",upsertApplet:"PartyUpsertForm",appletMenu:rwApp.getAppletMenu,appletMenuRight:"MemberMenu",
viewBarApplet:"MembersViewBar",clickRoute:"memberListDemo",actor:"PartyMgr",viewTitle:"All Members",searchSpec:{filter:[{expression:{partytype:"PARTNER_DEMO"},ftype:"expr"}]},selectedId:a,listTemplate:"AllMembersList",formTemplate:"StdFormMember",clientSideSortAttr:"fullName"})},MemberListDetailAdmin:function(a){this.GenericListDetailPattern({listapplet:"MemberAppletList",usePaging:!0,sortby:"firstName",formapplet:"PartyAppletFormAdmin",upsertApplet:"PartyUpsertFormAdmin",appletMenu:rwApp.getAppletMenu,
appletMenuRight:"MemberMenu",viewBarApplet:"MembersViewBar",clickRoute:"memberListAdmin",actor:"PartyMgr",viewTitle:"All Members",searchSpec:{filter:[{expression:{partytype:"PARTNER"},ftype:"expr"}]},selectedId:a,listTemplate:"AllMembersList",formTemplate:"StdFormMember",clientSideSortAttr:"fullName",savedSearch:{searchGroup:"members_admin",actor:"PartyMgr",bo:"Party",bc:"Party",searchAppletName:"MemberAdminSearchForm",searchAppletTemplate:"SearchForm",title:"Member Search"}})},BusinessDirectorySearch:function(a,
b){(new ReferralWire.HomePageModel).fetch({error:function(){window.location="/login.jsp"},success:function(d){d=new ReferralWire.HomePageView({model:d,template:"BusinessDirectoryHome"});c(rwApp.params.modules[1]).html(d.render().el).trigger("create");c.hasVal(rwFB.employerId)?c(".mainPanelBody").addClass("hasEmployer"):c(".mainPanelBody").addClass("noEmployer");c.hasVal(a)&&("none"!=a&&"undefined"!=a)&&c(".directory-search-input-business").attr("value",a);c.hasVal(b)&&("undefined"!=b&&"none"!=b)&&
c(".directory-search-input-zip").attr("value",b)}})},BusinessDirectoryMap:function(a,b,d,e){if(!c.hasVal(a)||"none"==a)a=void 0;var h=[];c.hasVal(b)&&"none"!=b&&(h[h.length]={ftype:"expr",expression:"{category:'"+b+"'}"});c.hasVal(e)&&"none"!=e&&(h[h.length]={ftype:"proximity",from:e,distance:20});this.GenericListDetailPattern({listapplet:"BusinessList",usePaging:!0,sortby:"businessRankScore",sortOrder:"DESC",formapplet:"BusinessForm",appletMenu:"EmptyMenu",viewBarApplet:"MembersViewBar",clickRoute:"BusinessDirectoryMap",
selectedId:a,act:"readAll",searchText:c.hasVal(d)&&"none"!=d?d:void 0,viewTitle:"Search Results",viewTemplate:"ListMapViewBizDirectory",searchSpec:0<h.length?{filter:h}:void 0,listTemplate:"BusinessDirectoryList",formTemplate:"StdFormMember",setFilter:!1,listMap:!0,calculatedFields:{categoryDisplay:function(a){return rwcore.getLovDisplayVal("PROFCAT",a.get("category"))}},secondTierNav:[{label:"Map",state:"",iconId:"",route:"BusinessDirectoryMap",key:"id",routeParams:{category:b,keyword:d,zipCode:e}},
{label:"Details",state:"",iconId:"",route:"BusinessDirectoryDetails",key:"id",routeParams:{category:b,keyword:d,zipCode:e}},{label:"New Search",state:"",iconId:"",route:"BusinessDirectorySearch",key:"",routeParams:{keyword:d,zipCode:e}}],done:function(a){a.options.listMapOptions={popTemplateSelector:".mapPopUpSelectorBusiness",fieldMap:{businessName:"ZBizName",about:"ZAbout",workPhone:"ZWorkPhone",workEmail:"ZEmail",logo:rwFB.CDN+"/images/emptyPic.png"}};a.renderListMap();a=a.options.listview.model.models.length;
c(".resultCount").html(1!=a?a+" Results":"1 Result");c(".resultsSummary-detail").html(c.getSearchResultDesc(b,d,e))}})},BusinessDirectoryDetails:function(a,b,d,e){if(!c.hasVal(a)||"none"==a)a=void 0;var h=[];c.hasVal(b)&&"none"!=b&&(h[h.length]={ftype:"expr",expression:"{category:'"+b+"'}"});c.hasVal(e)&&"none"!=e&&(h[h.length]={ftype:"proximity",from:e,distance:20});this.GenericListDetailPattern({listapplet:"BusinessList",usePaging:!0,sortby:"businessRankScore",sortOrder:"DESC",formapplet:"BusinessForm",
appletMenu:rwApp.getAppletMenu,viewBarApplet:"MembersViewBar",clickRoute:"BusinessDirectoryDetails",upsertApplet:"BusinessForm",selectedId:a,act:"readAll",searchText:c.hasVal(d)&&"none"!=d?d:void 0,viewTitle:"Search Results",viewTemplate:"ListViewBizDirectory",searchSpec:0<h.length?{filter:h}:void 0,listTemplate:"BusinessDirectoryList",formTemplate:"BusDirectoryDetailForm",setFilter:!1,inlineMap:!0,calculatedFields:{categoryDisplay:function(a){return rwcore.getLovDisplayVal("PROFCAT",a.get("category"))}},
secondTierNav:[{label:"Map",state:"",iconId:"",route:"BusinessDirectoryMap",key:"id",routeParams:{category:b,keyword:d,zipCode:e}},{label:"Details",state:"",iconId:"",route:"BusinessDirectoryDetails",key:"id",routeParams:{category:b,keyword:d,zipCode:e}},{label:"New Search",state:"",iconId:"",route:"BusinessDirectorySearch",key:"",routeParams:{keyword:d,zipCode:e}}],done:function(a){a=a.options.listview.model.models.length;c(".resultCount").html(1!=a?a+" Results":"1 Result");c(".resultsSummary-detail").html(c.getSearchResultDesc(b,
d,e))}})},speakerList:function(a){this.GenericListDetailPattern({listapplet:"SpeakerAppletList",usePaging:!0,sortby:"memberRankScore",sortOrder:"DESC",formapplet:"PartySpeakerForm",appletMenu:"EmptyMenu",viewBarApplet:"SpeakersViewBar",clickRoute:"speakerList",actor:"PartyMgr",viewTitle:"Speakers",selectedId:a,listTemplate:"SpeakersList",formTemplate:"SpeakerForm",savedSearch:{searchGroup:"speakers",actor:"PartyMgr",bo:"Party",bc:"Party",searchAppletName:"SpeakerSearchForm",searchAppletTemplate:"SearchForm",
title:"Speaker Search"}})},speakerMap:function(a){var b=this;rwApp.fetchSavedSearch({searchName:"Speakers within 50 Miles",searchGroup:"speakers"}).done(function(d){d=c.hasVal(d)&&0<d.models.length?d.models[0]:void 0;b.GenericListDetailPattern({listapplet:"MemberAppletList",sortby:"memberRankScore",sortOrder:"DESC",formapplet:"PartyAppletForm",upsertApplet:"PartyUpsertForm",appletMenu:"EmptyMenu",viewBarApplet:"SpeakersViewBar",clickRoute:"speakerMap",actor:"PartyMgr",viewTitle:"Speakers",searchSpec:{filter:[{expression:{partytype:"PARTNER"},
ftype:"expr"},{expression:{isSpeaker:"true"},ftype:"expr"}]},selectedId:a,listTemplate:"SpeakersList",formTemplate:"StdFormMember",viewTemplate:"ListMapView",savedSearch:{searchGroup:"speakers",actor:"PartyMgr",bo:"Party",bc:"Party",searchAppletName:"SpeakerSearchForm",searchAppletTemplate:"SearchForm",title:"Speaker Search",dssName:"Speakers within 50 Miles",dssModel:d},shape:"",listMap:!0,done:function(a){a.options.listMapOptions={popTemplateSelector:".mapPopUpSelectorSpeaker",fieldMap:{fullName:"ZfullName",
speakerTravelMiles:"ZMaxMiles",speakerBio:"ZBio",speakerPhone:"ZWorkPhone",speakerEmail:"ZEmail",photoUrl:rwFB.CDN+"/images/emptyPic.png"}};a.renderListMap()}})})},speakerEngagements:function(a){this.GenericMasterDetailPattern({masterApplet:"PartySpeakerShortForm",masterTemplate:"SpeakerFormNarrow",masterRecordId:a,parentKeyField:"id",appletMenu:"EmptyMenu",detailListApplet:"EventList",detailRenderer:ReferralWire.ListView,clientSideSortAttr:"datelong",clientSideSortDirection:"DESC",clickRoute:"speakerEngagements",
selectedId:a,detailListTemplate:"speakerEventList",detailSearchSpec:{Speaker1_Id:"id"},dynamicTitles:[{template:"ZValue Speaking Engagements",fields:[{fullName:"ZValue"}]}],viewBarApplet:"SpeakersViewBar",clientFKFilter:!0})},speakerReport:function(a){this.GenericSummaryDetailPattern({summaryapplet:"PartnerProfileViewBar",summaryTemplate:"SpeakerStatsFormNarrow",viewTemplate:"SpeakerSummaryChartView",detailapplet:"EmptyMenu",viewBarApplet:"SpeakersViewBar",clickRoute:"speakerReport",appletMenu:"EmptyMenu",
viewTitle:"Speaker Stats",selectedId:a,detailTemplate:"BasicForm",secondTierNav:[{label:"Speaker Engagements",state:"",iconId:"CalendarColorIcon_sm",route:"speakerReport",key:"id"},{label:"Speaker Ratings",state:"",iconId:"SingleStar_sm",route:"speakerRatingReport",key:"id"}],done:function(){(new ReferralWireView.ChartView({chartName:"SpeakerEngagementsChart",containerEl:"chart1"})).render()}})},speakerRatingReport:function(a){this.GenericSummaryDetailPattern({summaryapplet:"PartnerProfileViewBar",
summaryTemplate:"SpeakerStatsFormNarrow",viewTemplate:"SpeakerSummaryChartView",detailapplet:"EmptyMenu",viewBarApplet:"SpeakersViewBar",clickRoute:"speakerReport",appletMenu:"EmptyMenu",viewTitle:"Speaker Stats",selectedId:a,detailTemplate:"BasicForm",secondTierNav:[{label:"Speaker Engagements",state:"",iconId:"CalendarColorIcon_sm",route:"speakerReport",key:"id"},{label:"Speaker Ratings",state:"",iconId:"SingleStar_sm",route:"speakerRatingReport",key:"id"}],done:function(){(new ReferralWireView.ChartView({chartName:"AllSpeakerRatingsChart",
containerEl:"chart1"})).render()}})},PartnerListDetail:function(a){this.GenericListDetailPattern({listapplet:"ContactAppletList",usePaging:!0,sortby:"fullName",formapplet:rwApp.getContactProfessionalApplet,formapplet2:"PersonalContact",upsertApplet:"PersonalContact",formTemplate:rwApp.getContactProfessionalTemplate,viewBarApplet:rwApp.getAddrListViewBarApplet,viewBarTemplate:rwApp.getAddrViewBarTemplate,fixRecordApplet:"FixEnhancementMultipleForm",clickRoute:"partnerList",selectedId:a,appletMenu:"ContactListAppletMenu",
appletMenuRight:"ContactReferInviteMenu",viewTitle:"My Address Book",listTemplate:rwApp.getContactListTempl,viewTemplate:"ListSectionDetailView",upsertWizard:rwApp.ContactUpsertWizard(),refWizard:rwApp.ContactRefWizard,savedSearch:{searchGroup:"addressbook",actor:"PartnerMgr",bo:"Partner",bc:"Partner",searchAppletName:"AddressBookSearchForm",searchAppletTemplate:"SearchForm",title:"Addressbook Search"},editRefreshFunction:function(a,c){c.parentView.refreshInPlace(a)}})},partnerStats:function(a){this.GenericListDetailPattern({listapplet:"ContactAppletList",
usePaging:!0,sortby:"fullName",formapplet:rwApp.getContactProfessionalApplet,formTemplate:"EmptyMenu",viewBarApplet:rwApp.getAddrListViewBarApplet,viewBarTemplate:rwApp.getAddrViewBarTemplate,clickRoute:"partnerStats",selectedId:a,appletMenu:"EmptyMenu",viewTitle:"My Address Book Statistics",listTemplate:rwApp.getContactListTempl,savedSearch:{searchGroup:"addressbook",actor:"PartnerMgr",bo:"Partner",bc:"Partner",searchAppletName:"AddressBookSearchForm",searchAppletTemplate:"SearchForm",title:"Addressbook Search"},
done:function(a){var d=new ReferralWireView.ChartView({chartName:"AddressBookChart",containerEl:"chartContainer"});a.ChartView=d;d.render();c("#form1").remove()}})},awardList_admin:function(a){c("#singlePageWeb").addClass("adminPage");this.GenericListDetailPattern({listapplet:"AwardList",sortby:"awardName",formapplet:"AwardForm",upsertApplet:"AwardUpsertForm",formTemplate:"StdForm",viewBarApplet:"AwardViewBar",clickRoute:"awardList_admin",selectedId:a,appletMenu:"OrgListAppletMenu",viewTitle:"Awards Administration",
listTemplate:"AwardList"})},metricList_admin:function(a){c("#singlePageWeb").addClass("adminPage");this.GenericListDetailPattern({listapplet:"MetricList",sortby:"metricName",formapplet:"MetricForm",formTemplate:"BasicForm",viewBarApplet:"MetricViewBar",clickRoute:"metricList_admin",selectedId:a,appletMenu:"OrgListAppletMenu",viewTitle:"Metrics Administration",listTemplate:"SimpleList"})},imageList_admin:function(a){c("#singlePageWeb").addClass("adminPage");this.GenericListDetailPattern({listapplet:"ImageList",
sortby:"metricName",formapplet:"ImageForm",upsertApplet:"ImageUpsertForm",formTemplate:"BasicForm",viewBarApplet:"MetricViewBar",clickRoute:"imageList_admin",selectedId:a,appletMenu:"OrgListAppletMenu",viewTitle:"Images Administration",listTemplate:"ImageList",calculatedFields:{location:function(a){return a.get("photoUrl")}}})},emailTemplateList_admin:function(a){c("#singlePageWeb").addClass("adminPage");this.GenericListDetailPattern({listapplet:"EmailTemplateList",sortby:"templateName",formapplet:"EmailTemplateForm",
formTemplate:"EmailTemplateForm",viewBarApplet:"EmailTemplateViewBar",clickRoute:"emailTemplateList_admin",selectedId:a,appletMenu:"OrgListAppletMenu",viewTitle:"Email Template Administration",listTemplate:"SimpleList"})},reports_admin:function(a){c("#singlePageWeb").addClass("adminPage");var b=this;rwApp.fetchSavedSearch({searchName:"System",searchGroup:"reports"}).done(function(d){d=c.hasVal(d)&&0<d.models.length?d.models[0]:void 0;b.GenericListDetailPattern({listapplet:"ReportList",sortby:"templateName",
formapplet:"ReportForm",formTemplate:"BasicForm",viewBarApplet:"ReportViewBar",clickRoute:"reports_admin",selectedId:a,appletMenu:"ReportsMenu",viewTitle:"Reports Administration",listTemplate:"StdList",shape:"",calculatedFields:{metricDisplayName:function(a){a=a.get("metricName");return rwcore.getLovDisplayVal("FACT",a)},groupByDisplay:function(a){a=a.get("groupBy");return rwcore.getLovDisplayVal("GROUP_BY",a)},orderByDisplay:function(a){a=a.get("orderBy");return rwcore.getLovDisplayVal("ORDER_BY",
a)}},upsertWizard:{viewTemplate:"WizardUpsertView",stations:["Select Metric","Filter","Group and Sort"],firstApplet:{name:"ReportWizard1"},nextAppletFunctions:{ReportWizard1:function(a){a=rwApp.getReportModel({baseModel:a},{sActor:"PartyMgr"},{sBO:"Party"},{sBC:"Party"});return{name:a.get("searchapplet"),template:"SearchForm"}},MemberSearchForm:function(a){rwApp.rWizSetModel(a);return{name:"ReportWizard3"}},PartySearchForm:function(a){rwApp.rWizSetModel(a);return{name:"ReportWizard3"}},InvitationSearchForm:function(a){rwApp.rWizSetModel(a);
return{name:"ReportWizard3"}},ReferralSearchForm:function(a){rwApp.rWizSetModel(a);return{name:"ReportWizard3"}},AttendeeSearchForm:function(a){rwApp.rWizSetModel(a);return{name:"ReportWizard3"}},EventSearchForm:function(a){rwApp.rWizSetModel(a);return{name:"ReportWizard3"}}}},savedSearch:{searchGroup:"reports",actor:"ReportMgr",bo:"Report",bc:"Report",searchAppletName:"ReportSearchForm",searchAppletTemplate:"SearchForm",title:"Report Search",dssName:"System",dssModel:d},editRefreshFunction:function(a,
b){b.parentView.refreshInPlace(a)},isReport:!0})})},MemberSocial:function(a){var b=rwApp.ContactRefWizard_partnerRefWizard();this.GenericSummaryDetailPattern({selectedId:a,summaryapplet:rwApp.getPublicMemberApplet,summaryTemplate:"StdFormNarrow",actor:"PartyMgr",detailapplet:"Qualifications",detailTemplate:"QualificationsFormDisplay",viewBarApplet:"MembersViewBar",appletMenu:rwApp.getAppletMenu,appletMenuRight:"MemberMenu",viewTemplate:"ProfileDisplayView",clickRoute:"memberProfile",showProfileViewBar:!0,
viewTitle:"Member Profile",refWizard:b})},MemberMap:function(a){var b=rwApp.ContactRefWizard_partnerRefWizard();this.GenericSummaryDetailPattern({selectedId:a,summaryapplet:"PartyAppletForm",summaryTemplate:"StdFormNarrow",actor:"PartyMgr",detailapplet:"Qualifications",detailTemplate:"QualificationsFormDisplay",viewBarApplet:"MembersViewBar",appletMenu:"PartnerPrintMenu",appletMenuRight:"MemberMenu",viewTemplate:"ProfileDisplayMapView",clickRoute:"partnerSocial",showProfileViewBar:!0,secondTierNav:[{label:"Profile",
state:"",iconId:"recProspectIcon_sel",route:"memberProfile",key:"id"},{label:"Map",state:"selected",iconId:"googleMaps",route:"",key:""}],viewTitle:"Member Profile",refWizard:b,done:function(a){a.showMaps()}})},MemberPhotos:function(a){var b=rwApp.ContactRefWizard_partnerRefWizard();this.GenericSummaryDetailPattern({summaryapplet:"PartyAppletForm",summaryTemplate:"StdFormNarrow",detailapplet:"PartnerImages",actor:"PartyMgr",viewBarApplet:"MembersViewBar",clickRoute:"memberPhotos",selectedId:a,appletMenu:"EmptyMenu",
appletMenuRight:"MemberMenu",detailTemplate:"PhotoGalleryThumbsNoEdit",refWizard:b,viewTitle:"Member Photos"})},MemberOnlineInvites:function(a){this.GenericMasterDetailPattern({masterApplet:"PartyAppletForm",masterTemplate:"StdFormNarrow",masterRecordId:a,parentKeyField:"id",appletMenu:"EmptyMenu",detailListApplet:"MemberAppletList",detailRenderer:ReferralWireView.ListView,sortBy:"fullName",clickRoute:"MemberOnlineInvites",searchSpec:{filter:[{ftype:"time",fieldname:"joinedFullDate",period:"80640"},
{ftype:"expr",expression:"{partytype : 'PARTNER'}"}]},detailListTemplate:"InvitedMemberList",listItemClass:"invitedMember",detailSearchSpec:{invitedBy_Id:"id"},viewBarApplet:"MembersViewBar",dynamicTitles:[{template:"Members Invited Online by ZValue - Last Eight Weeks",fields:[{firstName:"ZValue"}]}],clientFKFilter:!0})},MostPRefInChapterDrill:function(a){this.GenericMasterDetailPattern({masterApplet:"PartyAppletForm",masterTemplate:"StdFormNarrow",masterRecordId:a,parentKeyField:"id",appletMenu:"EmptyMenu",
act:"readAll",detailListApplet:"BasicReferralList",detailRenderer:ReferralWireView.ListView,sortBy:"fullName",clickRoute:"MostPRefInChapterDrill",searchSpec:{filter:[{ftype:"time",fieldname:"rw_created_on",period:"80640"},{ftype:"expr",expression:"{referralType : 'CUST_FOR_PART'}"}]},detailListTemplate:"OutBox3rdPartnerList",detailSearchSpec:{fromId:"id"},viewBarApplet:"MembersViewBar",dynamicTitles:[{template:"Prospect Referrals Given by ZValue - Last Eight Weeks",fields:[{firstName:"ZValue"}]}],
clientFKFilter:!0})},MemberGuestInvites:function(a){this.GenericMasterDetailPattern({masterApplet:"PartyAppletForm",masterTemplate:"StdFormNarrow",masterRecordId:a,parentKeyField:"id",appletMenu:"EmptyMenu",detailListApplet:"AttendeeGuestList",detailRenderer:ReferralWireView.ListView,sortBy:"fullName",clickRoute:"MemberGuestInvites",searchSpec:{filter:[{ftype:"time",fieldname:"denorm_datetime",period:"80640"},{ftype:"expr",expression:"{partytype : {$ne:'PARTNER_DEMO'}}"}]},detailListTemplate:"ChapterMeetingAttendeeListNoAct",
detailSearchSpec:{newMemberSrc_partyId:"id"},viewBarApplet:"MembersViewBar",dynamicTitles:[{template:"Meeting Guests Invited by ZValue - Last Eight Weeks",fields:[{firstName:"ZValue"}]}],clientFKFilter:!0})},PartnerSocial:function(a){var b=rwApp.ContactRefWizard_partnerRefWizard();this.GenericSummaryDetailPattern({selectedId:a,summaryapplet:"PartnerAppletForm",summaryTemplate:"StdFormNarrowPub",detailapplet:"Qualifications",detailTemplate:"QualificationsFormDisplay",viewBarApplet:rwApp.getAddrListViewBarApplet,
appletMenu:"EmptyMenu",appletMenuRight:"PartnerMenu",viewTemplate:"ProfileDisplayView",clickRoute:"partnerProfile",showProfileViewBar:!0,viewTitle:"Partner Profile",refWizard:b})},PartnerMap:function(a){var b=rwApp.ContactRefWizard_partnerRefWizard();this.GenericSummaryDetailPattern({selectedId:a,summaryapplet:"PartnerAppletForm",summaryTemplate:"StdFormNarrowPub",detailapplet:"Qualifications",detailTemplate:"QualificationsFormDisplay",viewBarApplet:rwApp.getAddrListViewBarApplet,appletMenu:"PartnerPrintMenu",
appletMenuRight:"MemberMenu",viewTemplate:"ProfileDisplayMapView",clickRoute:"partnerSocial",showProfileViewBar:!0,secondTierNav:[{label:"Profile",state:"",iconId:"recProspectIcon_sel",route:"partnerProfile",key:"id"},{label:"Map",state:"selected",iconId:"googleMaps",route:"",key:""}],viewTitle:"Member Profile",refWizard:b,done:function(a){a.showMaps()}})},PartnerPhotos:function(a){var b=rwApp.ContactRefWizard_partnerRefWizard();this.GenericSummaryDetailPattern({summaryapplet:"PartnerAppletForm",
summaryTemplate:"StdFormNarrowPub",detailapplet:"PartnerImages",viewBarApplet:rwApp.getAddrListViewBarApplet,clickRoute:"partnerPhotos",selectedId:a,appletMenu:"EmptyMenu",appletMenuRight:"PartnerMenu",detailTemplate:"PhotoGalleryThumbsNoEdit",refWizard:b})},PartnerReferrals:function(a){var b=rwApp.ContactRefWizard_partnerRefWizard();this.ReferralsMasterTwoDetail({masterApplet:"PartnerAppletForm",masterRecordId:a,appletMenu:"EmptyMenu",appletMenuRight:"PartnerMenu",refWizard:b,clickRoute:"partnerReferrals",
detail1ListApplet:"ReferralInboxUnlimited",detail2ListApplet:"ReferralOutboxUnlimited",detail1ListTemplate:rwApp.getPartnerReferralReceivedTempl,detail2ListTemplate:rwApp.getPartnerReferralGivenTempl,viewBarApplet:rwApp.getAddrListViewBarApplet,viewBarTemplate:rwApp.getAddrViewBarTemplate,tooltipSource:"partnerReferrals",sortby:"rw_created_on",sortOrder:"DESC"})},PartnerRecommendations:function(a){var b=rwApp.ContactRefWizard_Recommendation();this.GenericMasterDetailPattern({masterApplet:"PartnerSocialForm",
masterTemplate:"SpecialtiesMasterPartner"(),masterRecordId:a,parentKeyField:"id",appletMenu:"EmptyMenu",detailListApplet:"RecommendedProspects",detailListTemplate:"RecommendationsList",searchSpec:{filter:[{ftype:"expr",expression:"{type : 'CUST_FOR_PART'}"},{ftype:"expr",expression:"{status : {$ne:'IGNORED'}}"}]},detailSearchSpec:{partnerId:"id"},dynamicTitles:[{template:"Recommendations for <span class='partnerName light'>ZValue</span>",fields:[{fullName:"ZValue"}]}],viewBarApplet:rwApp.getAddrRecViewBarApplet,
viewBarTemplate:rwApp.getAddrViewBarTemplate,MDTemplate:"MasterDetailViewNarrow"(),sortby:"score",sortOrder:"DESC",limit:3,secondTierNav:[{label:"Prospects",state:"selected",iconId:"recProspectIcon_sel",route:"",key:""},{label:"Power Partners",state:"",iconId:"recPowerPartner",route:"powerRecommendations",key:"id"},{label:"Service Providers",state:"",iconId:"recResources",route:"resourceRecommendations",key:"id"}],shareFunction:function(a){var b=a.detailRecord.get("contact_emailAddress");rwApp.sharePartnerInfo({model:a.model,
sendTo:b})},refWizard:b})},PowerPartnerRecommendations:function(a){var b=rwApp.ContactRefWizard_P2PRecommendation();this.GenericMasterDetailPattern({masterApplet:"PartnerSocialForm",masterTemplate:"SpecialtiesMasterPartner"(),masterRecordId:a,parentKeyField:"id",appletMenu:"EmptyMenu",detailListApplet:"RecommendedProspects",detailListTemplate:"RecommendationsList",searchSpec:{filter:[{ftype:"expr",expression:"{type : 'PART_FOR_PART'}"}]},detailSearchSpec:{partnerId:"id"},dynamicTitles:[{template:"Recommendations for <span class='partnerName light'>ZValue</span>",
fields:[{fullName:"ZValue"}]}],viewBarApplet:rwApp.getAddrRecViewBarApplet,viewBarTemplate:rwApp.getAddrViewBarTemplate,MDTemplate:"MasterDetailViewNarrow"(),sortby:"score",sortOrder:"DESC",limit:3,secondTierNav:[{label:"Prospects",state:"",iconId:"recProspectIcon",route:"partnerRecommendations",key:"id"},{label:"Power Partners",state:"selected",iconId:"recPowerPartner_sel",route:"",key:""},{label:"Service Providers",state:"",iconId:"recResources",route:"resourceRecommendations",key:"id"}],shareFunction:function(a){var b=
a.detailRecord.get("contact_emailAddress");rwApp.sharePartnerInfo({model:a.model,sendTo:b})},refWizard:b})},ResourceRecommendations:function(a){var b=rwApp.ContactRefWizard_ServProvRecommendation();this.GenericMasterDetailPattern({masterApplet:"PartnerSocialForm",masterTemplate:"SpecialtiesMasterPartner"(),masterRecordId:a,parentKeyField:"id",appletMenu:"EmptyMenu",detailListApplet:"RecommendedProspects",detailListTemplate:"RecommendationsList",searchSpec:{filter:[{ftype:"expr",expression:"{type : 'PART_FOR_CUST'}"}]},
detailSearchSpec:{partnerId:"id"},dynamicTitles:[{template:"Recommendations for <span class='partnerName light'>ZValue</span>",fields:[{fullName:"ZValue"}]}],viewBarApplet:rwApp.getAddrRecViewBarApplet,viewBarTemplate:rwApp.getAddrViewBarTemplate,MDTemplate:"MasterDetailViewNarrow"(),sortby:"score",sortOrder:"DESC",limit:3,secondTierNav:[{label:"Prospects",state:"",iconId:"recProspectIcon",route:"partnerRecommendations",key:"id"},{label:"Power Partners",state:"",iconId:"recPowerPartner",route:"powerRecommendations",
key:"id"},{label:"Service Providers",state:"selected",iconId:"recResources_sel",route:"",key:""}],shareFunction:function(a){var b=a.detailRecord.get("partner_emailAddress");rwApp.sharePartnerInfo({model:a.detailRecord,sendTo:b})},refWizard:b})},OrgListDetail:function(a){this.GenericListDetailPattern({listapplet:"OrganizationAppletList",sortby:"businessName",formapplet:"OrganizationAppletForm",viewBarApplet:"OrgViewBar",clickRoute:"OrgList",selectedId:a,appletMenu:rwApp.getAppletMenu,viewTitle:"Chapters",
listTemplate:"ChapterList",formTemplate:"ChapterHomeForm",inlineMap:!0,upsertApplet:"OrganizationAppletForm",inlineClock:"meetingHour",secondTierNav:[{label:"Chapter Info",state:"selected",iconId:"ChapterHome_sm_sel",route:"",key:""},{label:"Map",state:"",iconId:"MapIcon_black",route:"OrgListMap",key:""}],savedSearch:{searchGroup:" ",actor:"OrgMgr",bo:"Organization",bc:"Organization",searchAppletName:"OrgSearchForm",searchAppletTemplate:"SearchForm",title:"Chapter Search"}})},OrgListMap:function(a){this.GenericListDetailPattern({listapplet:"OrganizationAppletList",
sortby:"businessName",formapplet:"OrganizationAppletForm",viewBarApplet:"OrgViewBar",clickRoute:"OrgListMap",selectedId:a,appletMenu:"EmptyMenu",viewTitle:"Chapters",viewTemplate:"ChapterDisplayView",listTemplate:"ChapterList",formTemplate:"ChapterHomeForm",listMap:!0,secondTierNav:[{label:"Chapter Info",state:"",iconId:"ChapterHome_sm",route:"OrgList",key:"id"},{label:"Map",state:"selected",iconId:"MapIcon_sm",route:"",key:""}],viewTemplate:"ListMapView",savedSearch:{searchGroup:"chapters",actor:"OrgMgr",
bo:"Organization",bc:"Organization",searchAppletName:"OrgSearchForm",searchAppletTemplate:"SearchForm",title:"Chapter Search"},shape:"",listMap:!0,done:function(a){a.options.listMapOptions={popTemplateSelector:".mapPopUpSelectorChapter",fieldMap:{photoUrl:rwFB.CDN+"/images/emptyPic.png",businessName:"Zbusiness",ambassador_fullName:"ZAmbassador",greeting:"Zgreeting",meetingDayOfWeek:{placeHolder:"ZDayOfWeek",transform:function(a){return c.getDayOfWeek(a)}},meetingHour:{placeHolder:"ZTime",transform:function(a){return c.getTimeStringVal(a)}},
streetAddress1_work:"ZStreet",cityAddress_work:"ZCity",establishmentName:"ZEstablishment"}};a.renderListMap()}})},OrgMembers:function(a){this.GenericMasterDetailPattern({masterApplet:"OrganizationShortForm",masterTemplate:"ChapterFormNarrow",masterRecordId:a,parentKeyField:"id",appletMenu:"EmptyMenu",detailListApplet:"MemberAppletList",detailRenderer:ReferralWireView.ListView,sortby:"fullName",clickRoute:"OrgMembers",detailListTemplate:"ChapterMemberList",detailSearchSpec:{OrgId:"id"},dynamicTitles:[{template:"ZValue Members",
fields:[{businessName:"ZValue"}]}],viewBarApplet:"OrgViewBar",clientFKFilter:!0})},OrgPhotos:function(a){this.GenericSummaryDetailPattern({summaryapplet:"OrganizationShortForm",summaryTemplate:"ChapterFormNarrow",detailapplet:"ProfileImages",viewBarApplet:"OrgViewBar",clickRoute:"OrgPhotos",viewTitle:"Chapter Photos",selectedId:a,appletMenu:rwApp.getAppletMenu,detailTemplate:"PhotoGalleryThumbs"})},OrgEvents:function(a){this.GenericMasterDetailPattern({masterApplet:"OrganizationShortForm",masterTemplate:"ChapterFormNarrow",
masterRecordId:a,parentKeyField:"id",appletMenu:rwApp.getAppletMenu,detailListApplet:rwApp.getEventsList,detailRenderer:ReferralWireView.ListView,upsertApplet:"EventNewForm",parentDefaultVals:{OrgId:"id",locationName:"establishmentName",locationImageUrl:"logoUrl",datetime:{functionName:c.calcNextMeeting,functionArg:["meetingDayOfWeek","meetingHour"]},date:{functionName:c.calcNextMeetingDate,functionArg:["meetingDayOfWeek"]},day:{functionName:c.calcNextMeetingDay,functionArg:["meetingDayOfWeek"]},
title:"businessName",streetAddress1_work:"streetAddress1_work",cityAddress_work:"cityAddress_work",stateAddress_work:"stateAddress_work",postalCodeAddress_work:"postalCodeAddress_work"},clickRoute:"OrgEvents",clientSideSortAttr:"datelong",clientSideSortDirection:"DESC",detailListTemplate:"EventList",detailSearchSpec:{OrgId:"id"},dynamicTitles:[{template:"ZValue Events",fields:[{businessName:"ZValue"}]}],viewBarApplet:"OrgViewBar",clientFKFilter:!0,listItemClass:"childList",done:function(a){c(".masterDetailListFrame").addClass("eventList");
var d=a.options.masterview.model.get("id");a=a.options.masterview.model.get("ambassadorId");!("true"==rwFB.isAmbassador&&rwFB.OrgId==d)&&a!=rwFB.uId&&c(".viewtitle").html("Upcoming "+c(".viewtitle").html())}})},OrgDashboard:function(a){this.GenericMasterDetailPattern({masterApplet:"OrganizationShortForm",masterTemplate:"ChapterFormNarrow",masterRecordId:a,parentKeyField:"id",appletMenu:"EmptyMenu",detailListApplet:"AttendeeInvitedOrCheckedInList",detailRenderer:ReferralWireView.TableChartView,detailListTemplate:"AttendenceChart",
detailSearchSpec:{OrgId:"id"},viewTitle:"Dashboard",MDTemplate:"ChapterDashBoardView",viewBarApplet:"OrgViewBar",clientFKFilter:!0,clickRoute:"OrgDashboard",secondTierNav:[{label:"Attendance",state:"selected",iconId:"EventCheckedIn_sm",route:"",key:""},{label:"Online Invitations",state:"",iconId:"OnlineInvites_sm",route:"OrgDashReferrals",key:"id"},{label:"Meeting Guests",state:"",iconId:"EventGuest_sm_black",route:"OrgDashGuests",key:"id"},{label:"Referrals",state:"",iconId:"EventGuest_sm_black",
route:"OrgDashProspectRef",key:"id"}]})},OrgDashReferrals:function(a){this.GenericMasterDetailPattern({masterApplet:"OrganizationShortForm",masterTemplate:"ChapterFormNarrow",masterRecordId:a,parentKeyField:"id",appletMenu:"EmptyMenu",act:"mostOnlineInvitesInChapter",detailListApplet:"MostInvitesInChapter",detailRenderer:ReferralWireView.BasicChartView,detailListTemplate:"AttendenceChart",detailSearchSpec:{invitedBy_OrgId:"id"},viewTitle:"Dashboard - New Members Invited Online",MDTemplate:"ChapterDashBoardViewChart",
viewBarApplet:"OrgViewBar",clickRoute:"OrgDashboard",secondTierNav:[{label:"Attendance",state:"",iconId:"EventCheckedIn_sm_black",route:"OrgDashboard",key:"id"},{label:"Online Invitations",state:"selected",iconId:"OnlineInvites_sm_sel",route:"",key:""},{label:"Meeting Guests",state:"",iconId:"EventGuest_sm_black",route:"OrgDashGuests",key:"id"},{label:"Referrals",state:"",iconId:"EventGuest_sm_black",route:"OrgDashProspectRef",key:"id"}],transformOptions:{transformFunction:c.formatGroupBy,categoryField:"fullName",
drillDownString:"#MemberOnlineInvites/ZIdentifier",ZIdentifier:"_id",series:[{name:"numNewMembers",field:"count",label:"New Members"}]},done:function(a){a=a.primaryChildListView.chartData;chartData={topMembers:a.categoryAry,title:"Last Eight Weeks",topMemberValues:a.series.numNewMembers.values,unitLabel:"",renderTo:"chart1"};c.renderStandardBarChart(chartData);c("#chartTitle").html("Top 5 All Stars: Most New Online Invitations Accepted")}})},OrgDashProspectRef:function(a){this.GenericMasterDetailPattern({masterApplet:"OrganizationShortForm",
masterTemplate:"ChapterFormNarrow",masterRecordId:a,parentKeyField:"id",appletMenu:"EmptyMenu",act:"mostPRefInChapter",detailListApplet:"MostInvitesInChapter",detailRenderer:ReferralWireView.BasicChartView,detailListTemplate:"AttendenceChart",detailSearchSpec:{fromId:"id"},viewTitle:"Dashboard - Prospect Referrals Given",MDTemplate:"ChapterDashBoardViewChart",viewBarApplet:"OrgViewBar",clickRoute:"OrgDashboard",secondTierNav:[{label:"Attendance",state:"",iconId:"EventCheckedIn_sm_black",route:"OrgDashboard",
key:"id"},{label:"Online Invitations",state:"",iconId:"OnlineInvites_sm",route:"OrgDashReferrals",key:"id"},{label:"Meeting Guests",state:"",iconId:"EventGuest_sm_black",route:"OrgDashGuests",key:"id"},{label:"Referrals",state:"selected",iconId:"EventGuest_sm_black",route:"OrgDashProspectRef",key:"id"}],transformOptions:{transformFunction:c.formatGroupBy,categoryField:"fullName",drillDownString:"#MostPRefInChapterDrill/ZIdentifier",ZIdentifier:"_id",series:[{name:"numNewMembers",field:"count",label:"New Members"}]},
done:function(a){a=a.primaryChildListView.chartData;chartData={topMembers:a.categoryAry,title:"Last Eight Weeks",topMemberValues:a.series.numNewMembers.values,unitLabel:"",renderTo:"chart1"};c.renderStandardBarChart(chartData);c("#chartTitle").html("Top 5 All Stars: Most New Prospect Referrals Given")}})},OrgDashGuests:function(a){this.GenericMasterDetailPattern({masterApplet:"OrganizationShortForm",masterTemplate:"ChapterFormNarrow",masterRecordId:a,parentKeyField:"id",appletMenu:"EmptyMenu",act:"mostGuestInvitesInChapter",
detailListApplet:"MostInvitesInChapter",detailRenderer:ReferralWireView.BasicChartView,detailSearchSpec:{fromBusinessId:"id"},viewTitle:"Dashboard - New Members Invited to Meetings",MDTemplate:"ChapterDashBoardViewChart",viewBarApplet:"OrgViewBar",clientFKFilter:!0,clickRoute:"OrgDashboard",secondTierNav:[{label:"Attendance",state:"",iconId:"EventCheckedIn_sm_black",route:"OrgDashboard",key:"id"},{label:"Online Invitations",state:"",iconId:"OnlineInvites_sm",route:"OrgDashReferrals",key:"id"},{label:"Meeting Guests",
state:"selected",iconId:"EventGuest_sm",route:"",key:""},{label:"Referrals",state:"",iconId:"EventGuest_sm_black",route:"OrgDashProspectRef",key:"id"}],transformOptions:{transformFunction:c.formatGroupBy,categoryField:"fullName",drillDownString:"#MemberGuestInvites/ZIdentifier",ZIdentifier:"_id",series:[{name:"numGuests",field:"count",label:"New Members"}]},done:function(a){a=a.primaryChildListView.chartData;chartData={topMembers:a.categoryAry,title:"Last Eight Weeks",topMemberValues:a.series.numGuests.values,
unitLabel:"",renderTo:"chart1"};c.renderStandardBarChart(chartData);c("#chartTitle").html("Top 5 All Stars: Most New Meeting Guests")}})},AllUpcomingEvents:function(a){var b=[],d=rwFB.postalCode;b[0]={ftype:"time",period:"120",max:"10080",fieldname:"datetime"};c.hasVal(d)&&(b[1]={ftype:"proximity",from:d,distance:50});this.GenericListDetailPattern({listapplet:"UpcomingEventList",usePaging:!0,sortby:"datelong",bo:"Event",bc:"Event",searchSpec:{filter:b},calculatedFields:{dayName:function(a){a=f.isObject(a.get("datetime"))?
a.get("datetime").$date:a.get("datetime");var b=rwcore.getLovDisplayVal("WEEKDAY",(new Date(a)).getDay());return b+=", "+dateFormat(new Date(a),"mmm d")},orgPhotoUrl:function(a){return a.get("photoUrl")}},formapplet:"EventMasterForm",viewBarApplet:"EventsViewBar",clickRoute:"AllUpcomingEvents",selectedId:a,appletMenu:rwApp.getAppletMenu,viewTitle:"All Upcoming Meetings - Next 7 Days",listTemplate:"AllEventList",formTemplate:"EventFormAll",inlineMap:!0,done:function(){c(".rw_details").addClass("event")}})},
MyEvents:function(){var a;a="{partyId:'myid'}".replace("myid",rwFB.uId);this.GenericListDetailPattern({listapplet:"MyEvents",usePaging:!0,searchSpec:{filter:[{ftype:"expr",expression:"{status:'CHECKEDIN'}"},{ftype:"expr",expression:a}]},sortby:"denorm_datetime",sortOrder:"DESC",bo:"Attendee",bc:"Attendee",formapplet:"EventMasterForm",viewBarApplet:"EventsViewBar",clickRoute:"MyEvents",appletMenu:"EmptyMenu",viewTitle:"My Events",listTemplate:"MyEventList",formTemplate:"EventFormAll",inlineMap:!0,
calculatedFields:{orgPhotoUrl:function(a){return a.get("Org_photoUrl")}},done:function(){c(".rw_details").addClass("event")}})},EventExpected:function(a){this.GenericMasterDetailPattern({masterApplet:"EventNewForm",masterTemplate:"EventFormNarrow",masterRecordId:a,parentKeyField:"id",appletMenu:rwApp.getAppletMenu,detailListApplet:"AttendeeExpectedList",detailRenderer:ReferralWireView.ListView,MDTemplate:"MasterDetailSearchListView",sortby:"fullName_denorm",detailListTemplate:rwApp.getTemplate,detailSearchSpec:{eventId:"id"},
viewTitle:"Expecting",viewBarApplet:"AttendeeViewBar",clientFKFilter:!0,clickRoute:"EventExpected",upsertApplet:"EventEditForm",filter:!0,usePaging:!0,listItemClass:"rw_listitem buttonright"})},EventCheckedIn:function(a){this.GenericMasterDetailPattern({masterApplet:"EventNewForm",upsertApplet:"EventNewForm",masterTemplate:"EventFormNarrow",masterRecordId:a,parentKeyField:"id",appletMenu:rwApp.getAppletMenu,detailListApplet:"AttendeeCheckedInList",detailRenderer:ReferralWireView.ListView,searchSpec:{filter:[{ftype:"expr",
expression:"{status : 'CHECKEDIN'}"}]},MDTemplate:"MasterDetailSearchListView",sortby:"fullName_denorm",detailListTemplate:rwApp.getTemplate,detailSearchSpec:{eventId:"id"},clientFKFilter:!0,clickRoute:"EventCheckedIn",viewTitle:"Checked In",viewBarApplet:"AttendeeViewBar",filter:!0,usePaging:!0,listItemClass:"rw_listitem buttonright"})},EventGuests:function(a){this.GenericMasterDetailPattern({masterApplet:"EventNewForm",masterTemplate:"EventFormNarrow",masterRecordId:a,parentKeyField:"id",appletMenu:rwApp.getAppletMenu,
detailListApplet:"AttendeeCheckedInList",clientSideSortAttr:"fullName",detailListTemplate:rwApp.getTemplate,detailSearchSpec:{eventId:"id"},clientFKFilter:!0,searchSpec:{filter:[{ftype:"expr",expression:"{guestType : {$in:['FLOATER','NEW_MEMBER']}}"},{ftype:"expr",expression:"{status : 'CHECKEDIN'}"}]},clickRoute:"EventGuests",viewTitle:"Guests",viewBarApplet:"AttendeeViewBar"})},professionList:function(a){this.GenericListDetailPattern({listapplet:"ProfessionPickApplet",sortby:"DisplaySeq",formapplet:"LOVFormApplet",
formTemplate:"PlainForm",viewBarApplet:"ProfessionListViewBar",clickRoute:"professionList",selectedId:a,appletMenu:"EmptyMenu",viewTitle:"Professions",listTemplate:"SimpleList",listItemClass:"rw_listitem shortRow"})},professionTarget:function(a){this.MasterDetailWithNextPrev({nextPrev:{listapplet:"ProfessionPickAppletOld",sortby:"DisplaySeq"},masterApplet:"LOVFormApplet",masterTemplate:"PlainForm",masterRecordId:a,parentKeyField:"id",appletMenu:"ProfileTargetMenu",detailListApplet:"SelectedLOVs",
detailRenderer:ReferralWireView.ListView,clientSideSortAttr:"child_DisplaySeq",detailListTemplate:"SimpleList",detailSearchSpec:{parentId:"id"},searchSpec:{filter:[{ftype:"expr",expression:"{child_LovType : 'CONSUMER_CHAR'}"}]},dynamicTitles:[{template:"Default Target Criteria",fields:[{firstName:"ZValue"}]}],viewBarApplet:"ProfessionTargetViewBar",upsertWizard:{saveFunction:rwApp.SaveLovAssociation,saveAssociationLovTypes:["CONSUMER_CHAR","CONSUMER_EVENT","BUSINESS_CHAR","BUSINESS_EVENT"],viewTemplate:"WizardUpsertView",
stations:["Consumer Profile","Consumer Events","Business Profile","Business Events"],firstApplet:{name:"ConsumerCharCriteria",renderer:ReferralWireView.AssociationView,template:"StdList",setFilter:!1,toApplet:"SelectedLOVs",toSetFilter:!1,toHtmlTemplate:"SimpleList",toClientSideSortAttr:"child_DisplaySeq",toCustomRowAttr:{attrName:"data-icon",attrVal:"delete"},associationMap:rwApp.professionCriteriaAssociationMap},nextAppletFunctions:{ConsumerCharCriteria:function(){return{name:"ConsumerEventsCriteria",
renderer:ReferralWireView.AssociationView,template:"StdList",setFilter:!1,toApplet:"SelectedLOVs",toSetFilter:!1,toHtmlTemplate:"SimpleList",toClientSideSortAttr:"child_DisplaySeq",toCustomRowAttr:{attrName:"data-icon",attrVal:"delete"},associationMap:rwApp.professionCriteriaAssociationMap}},ConsumerEventsCriteria:function(){return{name:"BusinessCharCriteria",renderer:ReferralWireView.AssociationView,template:"StdList",setFilter:!1,toApplet:"SelectedLOVs",toSetFilter:!1,toHtmlTemplate:"SimpleList",
toClientSideSortAttr:"child_DisplaySeq",toCustomRowAttr:{attrName:"data-icon",attrVal:"delete"},associationMap:rwApp.professionCriteriaAssociationMap}},BusinessCharCriteria:function(){return{name:"BusinessEventsCriteria",renderer:ReferralWireView.AssociationView,template:"StdList",setFilter:!1,toApplet:"SelectedLOVs",toSetFilter:!1,toHtmlTemplate:"SimpleList",toClientSideSortAttr:"child_DisplaySeq",toCustomRowAttr:{attrName:"data-icon",attrVal:"delete"},associationMap:rwApp.professionCriteriaAssociationMap}}}}})},
professionRefReason:function(a){this.MasterDetailWithNextPrev({nextPrev:{listapplet:"ProfessionPickAppletOld",sortby:"DisplaySeq"},masterApplet:"LOVFormApplet",masterTemplate:"PlainForm",masterRecordId:a,parentKeyField:"id",appletMenu:"ProfileTargetMenu",detailListApplet:"SelectedLOVs",detailRenderer:ReferralWireView.ListView,sortby:"child_DisplaySeq",detailListTemplate:"SimpleList",detailSearchSpec:{parentId:"id"},searchSpec:{filter:[{ftype:"expr",expression:"{child_LovType : 'C2P_REF_REASON'}"}]},
dynamicTitles:[{template:"Referral Reasons",fields:[{firstName:"ZValue"}]}],viewBarApplet:"ProfessionReasonViewBar",upsertWizard:{saveFunction:rwApp.SaveLovAssociation,saveAssociationLovTypes:["C2P_REF_REASON"],viewTemplate:"WizardUpsertView",stations:["Reasons","Skip"],firstApplet:{name:"ReferralReasons",renderer:ReferralWireView.AssociationView,template:"StdList",setFilter:!1,toApplet:"SelectedLOVs",toSetFilter:!1,toHtmlTemplate:"SimpleList",toClientSideSortAttr:"child_DisplaySeq",toCustomRowAttr:{attrName:"data-icon",
attrVal:"delete"},associationMap:rwApp.professionCriteriaAssociationMap},nextAppletFunctions:{ReferralReasons:function(){return{name:"ReferralReasons",renderer:ReferralWireView.AssociationView,template:"StdList",setFilter:!1,toApplet:"SelectedLOVs",toSetFilter:!1,toHtmlTemplate:"SimpleList",toClientSideSortAttr:"child_DisplaySeq",toCustomRowAttr:{attrName:"data-icon",attrVal:"delete"},associationMap:rwApp.professionCriteriaAssociationMap}}}}})},PowerPartners:function(a){this.MasterDetailWithNextPrev({nextPrev:{listapplet:"ProfessionPickAppletOld",
sortby:"DisplaySeq"},masterApplet:"LOVFormApplet",masterTemplate:"PlainForm",masterRecordId:a,parentKeyField:"id",appletMenu:"ProfileTargetMenu",detailListApplet:"SelectedLOVs",detailRenderer:ReferralWireView.ListView,sortby:"child_DisplaySeq",detailListTemplate:"SimpleList",detailSearchSpec:{parentId:"id"},dynamicTitles:[{template:"Default Power Partners",fields:[{firstName:"ZValue"}]}],viewBarApplet:"ProfessionReasonViewBar",upsertWizard:{saveFunction:rwApp.SaveCriteria,viewTemplate:"WizardUpsertView",
stations:["Wealth and Property","Household","Professional"],firstApplet:{name:"ReferralReasons",renderer:ReferralWireView.AssociationView,template:"StdList",setFilter:!1,toApplet:"SelectedLOVs",toSetFilter:!1,toHtmlTemplate:"SimpleList",toClientSideSortAttr:"child_DisplaySeq",toCustomRowAttr:{attrName:"data-icon",attrVal:"delete"},associationMap:rwApp.professionCriteriaAssociationMap},nextAppletFunctions:{ReferralReasons:function(){return{name:"ReferralReasons",renderer:ReferralWireView.AssociationView,
template:"StdList",setFilter:!1,toApplet:"SelectedLOVs",toSetFilter:!1,toHtmlTemplate:"SimpleList",toClientSideSortAttr:"child_DisplaySeq",toCustomRowAttr:{attrName:"data-icon",attrVal:"delete"},associationMap:rwApp.professionCriteriaAssociationMap}}}}})},criteriaList:function(a){this.GenericListDetailPattern({listapplet:"CriteriaListApplet",sortby:"DisplaySeq",formapplet:"LOVFormApplet",formTemplate:"PlainForm",viewBarApplet:"CriteriaViewBar",clickRoute:"criteriaList",selectedId:a,appletMenu:"EmptyMenu",
viewTitle:"Criteria",listTemplate:"SimpleList",listItemClass:"rw_listitem shortRow",viewTemplate:"StdListDetailView"})},criteriaRefReason:function(a){this.MasterDetailWithNextPrev({masterApplet:"LOVFormApplet",masterTemplate:"PlainForm",masterRecordId:a,parentKeyField:"id",nextPrev:{listapplet:"CriteriaListApplet",sortby:"DisplaySeq"},appletMenu:"ProfileTargetMenu",detailListApplet:"SelectedLOVs",detailRenderer:ReferralWireView.ListView,clientSideSortAttr:"child_DisplaySeq",detailListTemplate:"SimpleList",
detailSearchSpec:{parentId:"id"},clientFKFilter:!0,searchSpec:{filter:[{ftype:"expr",expression:"{child_LovType : 'C2P_REF_REASON'}"}]},dynamicTitles:[{template:"Criteria <-> Referral Reasons Map",fields:[{firstName:"ZValue"}]}],viewBarApplet:"CriteriaReasonViewBar",upsertWizard:{saveFunction:rwApp.SaveLovAssociation,saveAssociationLovTypes:["C2P_REF_REASON"],viewTemplate:"WizardUpsertView",stations:["Referral Reasons","Same"],firstApplet:{name:"ReferralReasons",renderer:ReferralWireView.AssociationView,
template:"StdList",setFilter:!1,toApplet:"SelectedLOVs",toSetFilter:!1,toHtmlTemplate:"SimpleList",toClientSideSortAttr:"child_DisplaySeq",toCustomRowAttr:{attrName:"data-icon",attrVal:"delete"},associationMap:rwApp.professionCriteriaAssociationMap},nextAppletFunctions:{ReferralReasons:function(){return{name:"ReferralReasons",renderer:ReferralWireView.AssociationView,template:"StdList",setFilter:!1,toApplet:"SelectedLOVs",toSetFilter:!1,toHtmlTemplate:"SimpleList",toClientSideSortAttr:"child_DisplaySeq",
toCustomRowAttr:{attrName:"data-icon",attrVal:"delete"},associationMap:rwApp.professionCriteriaAssociationMap}}}}})},criteriaInfoConnect:function(a){this.MasterDetailWithNextPrev({masterApplet:"LOVFormApplet",masterTemplate:"PlainForm",masterRecordId:a,parentKeyField:"id",nextPrev:{listapplet:"CriteriaListApplet",sortby:"DisplaySeq"},appletMenu:"MasterDetailNewMenu",detailListApplet:"SelectedLOVs",detailRenderer:ReferralWireView.ListView,clientSideSortAttr:"child_DisplaySeq",clickRoute:"criteriaInfoConnect",
detailListTemplate:"SimpleList",detailSearchSpec:{parentId:"id"},clientFKFilter:!0,searchSpec:{filter:[{ftype:"expr",expression:"{child_LovType : 'INFOCONNECT'}"}]},dynamicTitles:[{template:"Criteria :: InfoConnect Map",fields:[{firstName:"ZValue"}]}],viewBarApplet:"CriteriaInfoConnectViewBar",upsertApplet:"CriteriaInfoConnectMap",parentDefaultVals:{parentId:"id",parent_GlobalVal:"GlobalVal",parent_DisplayVal:"DisplayVal",parent_LovType:"LovType"}})},infoConnectList:function(a){this.GenericListDetailPattern({listapplet:"GenericLovList",
searchSpec:{filter:[{ftype:"expr",expression:"{LovType : 'INFOCONNECT'}"}]},sortby:"DisplaySeq",formapplet:"LOVFormApplet",formTemplate:"PlainForm",viewBarApplet:"InfoConnectViewBar",clickRoute:"infoConnectList",selectedId:a,appletMenu:"EmptyMenu",viewTitle:"InfoConnect Values",listTemplate:"SimpleList",listItemClass:"rw_listitem shortRow",viewTemplate:"StdListDetailView"})},infoConCriteria:function(a){this.MasterDetailWithNextPrev({masterApplet:"LOVFormApplet",masterTemplate:"PlainForm",masterRecordId:a,
parentKeyField:"id",nextPrev:{listapplet:"GenericLovList",searchSpec:{filter:[{ftype:"expr",expression:"{LovType : 'INFOCONNECT'}"}]}},appletMenu:"MasterDetailNewMenu",detailListApplet:"IC_CriteriaMap",searchSpec:{filter:[{ftype:"expr",expression:"{parent_LovType : {$in:['CONSUMER_CHAR','CONSUMER_EVENT','BUSINESS_CHAR','BUSINESS_EVENT']}}"}]},clientSideSortAttr:"parent_DisplaySeq",clickRoute:"infoConCriteria",detailListTemplate:"StdExpandableChildList",detailSearchSpec:{childId:"id"},clientFKFilter:!0,
viewTitle:"InfoConnect::Criteria Map",viewBarApplet:"InfoConnectCriteriaViewBar",upsertApplet:"InfoConnectCriteriaMap",parentDefaultVals:{childId:"id",child_GlobalVal:"GlobalVal",child_DisplayVal:"DisplayVal",child_LovType:"LovType"}})},infoConParty:function(a){this.MasterDetailWithNextPrev({masterApplet:"LOVFormApplet",masterTemplate:"PlainForm",masterRecordId:a,parentKeyField:"id",nextPrev:{listapplet:"GenericLovList",searchSpec:{filter:[{ftype:"expr",expression:"{LovType : 'INFOCONNECT'}"}]}},
appletMenu:"MasterDetailNewMenu",detailListApplet:"IC_CriteriaMap",searchSpec:{filter:[{ftype:"expr",expression:"{parent_LovType : 'CONTACT_ATTRIB'}"}]},clientSideSortAttr:"parent_DisplaySeq",clickRoute:"infoConParty",detailListTemplate:"StdExpandableChildList",detailSearchSpec:{childId:"id"},clientFKFilter:!0,viewTitle:"InfoConnect::Contact Attributes Map",viewBarApplet:"InfoConnectPartyViewBar",upsertApplet:"InfoConnectPartyMap",parentDefaultVals:{childId:"id",child_GlobalVal:"GlobalVal",child_DisplayVal:"DisplayVal",
child_LovType:"LovType"}})},AssocListDetail:function(a){this.GenericListDetailPattern({listapplet:"AssociationAppletList",sortby:"businessName",formapplet:"AssociationAppletForm",viewBarApplet:"AssocViewBar",clickRoute:"AssocList",selectedId:a})},referralLBMyProf:function(a){this.GenericSummaryDetailPattern({summaryapplet:"PartyAppletForm",summaryTemplate:"LeaderBoardFormLikeMe",viewTemplate:"LeaderBoardSummaryDetailView",detailapplet:"PartyAppletForm",upsertApplet:"LeaderboardUpsertForm",viewBarApplet:"ReferralViewBar",
clickRoute:"referralLBMyProf",appletMenu:"EmptyMenu",dynamicTitles:[{template:"Most Valuable Professionals",fields:[{profession:"Professional"}]}],selectedId:a,detailTemplate:"LeaderBoardMissingData",secondTierNav:[{label:"Top Power Partners",state:"",iconId:"Partner_sm",route:"referralLBMyPowerPartners",key:"id"},{label:"Leaders in my Profession",state:"",iconId:"Profession_sm_sel",route:"referralLBMyProf",key:"id"}],done:function(a){var d=a.options.listview.model.get("profession"),e=a.options.listview.model.get("postalCodeAddress_work");
a=a.options.listview.model.get("powerpartner1");c.hasVal(d)&&c.hasVal(e)&&c.hasVal(a)?(new ReferralWireView.ChartView({chartName:"ConvRefMyProf",containerEl:"chart1",contextVars:{myprofession:d},catformat:c.formatThumbnailCat})).render():c("#form1").show()}})},referralLBMyPowerPartners:function(a){this.GenericSummaryDetailPattern({summaryapplet:"PartyAppletForm",summaryTemplate:"LeaderBoardFormPowerPartners",viewTemplate:"LeaderBoardSummaryDetailView",detailapplet:"PartyAppletForm",upsertApplet:"LeaderboardUpsertForm",
viewBarApplet:"ReferralViewBar",clickRoute:"referralLBMyPowerPartners",appletMenu:"EmptyMenu",viewTitle:"Most Valuable Power Partners",selectedId:a,detailTemplate:"LeaderBoardMissingData",secondTierNav:[{label:"Top Power Partners",state:"",iconId:"Partner_sm",route:"referralLBMyPowerPartners",key:"id"},{label:"Leaders in my Profession",state:"",iconId:"Profession_sm_sel",route:"referralLBMyProf",key:"id"}],done:function(a){var d=a.options.listview.model.get("profession"),e=a.options.listview.model.get("postalCodeAddress_work");
a=a.options.listview.model.get("powerpartner1");c.hasVal(d)&&c.hasVal(e)&&c.hasVal(a)?(new ReferralWireView.ChartView({chartName:"ConvRefMyPowerPartners",containerEl:"chart1",contextVars:{mypowerpartners:a},catformat:c.formatThumbnailCat})).render():c("#form1").show()}})},leaderBoardViewMeta:{summaryapplet:"PartnerProfileViewBar",summaryTemplate:"ProfileNavigation",viewTemplate:"LeftSecondTierNavSummaryDetailView",detailapplet:"PartyAppletForm",upsertApplet:"PartyUpsertForm",viewBarApplet:"ReferralViewBar",
clickRoute:"referralLeaderBoardMade",appletMenu:"EmptyMenu",viewTitle:"Leaderboard",selectedId:rwFB.uId,detailTemplate:"LeaderboardMade",viewBarTemplate:"ReferralViewBarTemplate",secondTierNav:[{label:"All Prospect Referrals Made",state:"",iconId:"referralSent_sm",route:"referralLeaderBoardMade",key:""},{label:"Prospect Referrals Converted",state:"",iconId:"referralSentConverted_sm",route:"referralLeaderBoardConverted",key:""},{label:"New Members Invited",state:"",iconId:"referralNewInvitations_sm",
route:"referralLeaderBoardInvited",key:""},{label:"Guests Invited to Meetings",state:"",iconId:"meetinGuestColor_sm",route:"referralLeaderBoardGuests",key:""}],done:function(){}},referralLeaderBoardMade:function(){rwApp.leaderBoardViewMeta.done=function(a){rwApp.renderReferralleaderBoardChart("prospects",a,"chapter")};this.GenericSummaryDetailPattern(rwApp.leaderBoardViewMeta)},referralLeaderBoardConverted:function(){rwApp.leaderBoardViewMeta.done=function(a){rwApp.renderReferralleaderBoardChart("converted",
a,"chapter")};this.GenericSummaryDetailPattern(rwApp.leaderBoardViewMeta)},referralLeaderBoardInvited:function(){rwApp.leaderBoardViewMeta.done=function(){rwApp.renderReferralleaderBoardChart("invited".ldview,"chapter")};this.GenericSummaryDetailPattern(rwApp.leaderBoardViewMeta)},referralLeaderBoardGuests:function(){var a=f.clone(this.leaderBoardViewMeta);a.viewTitle="Leaderboard - Guests Invited";a.done=function(){c(".metricHeader").html("similiar to the other leaderboards")};this.GenericSummaryDetailPattern(a)},
renderReferralleaderBoardChart:function(a,b){var d=function(a,b,d,q){var l="lbc_"+a+d;console.log(l);a=b.options.detailview.model.get("OrgId");var u=b.options.detailview.model.get("profession");q=new rwcore.StandardCollection({module:"AnalyticsMgr",act:"getChart",name:l,since_date:new Date((new Date).getTime()-6048E5*q),OrgId:a,profession:u});c.when(q.sync()).done(function(a){var e=[],m="bar";if("_chapter"==d)for(var k=0;k<a.length;k++)e[k]={_id:a.models[k].get("_id").fromId,y:a.models[k].get("total"),
imgUrl:a.models[k].get("photoUrl"),name:a.models[k].get("fullName"),color:a.models[k].get("_id").fromId==rwFB.uId?"green":"gray"};else if("_self_professionAvg"==d||"_self_networkAvg"==d)e[0]={_id:a.models[0].get("_id").fromId,y:a.models[0].get("total"),imgUrl:a.models[0].get("photoUrl"),name:a.models[0].get("fullName"),color:"gold"},e[1]={_id:a.models[1].get("_id"),y:a.models[1].get(a.models[1].get("_id")),imgUrl:rwFB.CDN+"/images/average.jpeg",name:a.models[1].get("_id"),color:"green"},m="bar";e=
f.sortBy(e,function(a){return a.y});a=f.find(e,function(a){return a._id==rwFB.uId});c("#myMetric1").text(a.y);c("#lbc_header").html(c(".metricNarrative#"+l).html());c(".metricNarrative #myMetric2").text(a.y);c(".chartTitle#lbc_header").html(c(".chartTitle#"+l).html());c(".chartSubTitle#lbc_header").html(c(".chartSubTitle#"+d).html());a=c("#lbc_header .distanceFromBoard #chapterName");f.isUndefined(a)||a.text(b.options.detailview.model.get("org_businessName"));a=c(".chartSubTitle #chapterName");f.isUndefined(a)||
a.text(b.options.detailview.model.get("org_businessName"));(new ReferralWireView.ChartView({containerEl:"#chart1",chartType:m,series:e,pointWidth:40,seriesName:l,formatter:function(){var a=this.value,b=f.find(e,function(b){return b.name==a}),c=b.name,b=f.isUndefined(b.imgUrl)?rwFB.CDN+"/images/emptyPic.png":b.imgUrl,b="<div class='chartLabelFrame'><img class='chartLabelImg' src='Zsrc'><div class='chartLabelName'>ZfullName</div></div>".replace("Zsrc",b);return b=b.replace("ZfullName",c)}})).render()})};
d(a,b,c("input[name*=dimension]:checked").val(),8);c("input[name*=dimension]").change(function(){d(a,b,c("input[name*=dimension]:checked").val(),8)})},ReferralInbox:function(a){this.GenericListDetailPattern({listapplet:"ReferralInboxList",act:"InBox",listTemplate:"InBoxList",clientSideSortAttr:"statusCategory",calculatedFields:{statusCategory:function(a){return c.getProspectReferralStatusOrder(a)}},searchSpec:{filter:[{ftype:"expr",expression:"{referralType : 'CUST_FOR_PART'}"},{ftype:"expr",expression:"{archiveFlag : { $ne: 'true' }}"}]},
formapplet:"ReferralInboxForm",formTemplate:rwApp.getReferralViewForm,viewBarApplet:"ReferralViewBar",viewTitle:"Received: Prospect Referrals",appletMenu:"ReferralInboxMenu",appletMenuTemplate:"ReferralMenuTemplate",viewBarTemplate:"ReferralViewBarTemplate",clickRoute:"referralInbox",selectedId:a,tooltipSource:"referralInbox",secondTierNav:[{label:"Connections",state:"",iconId:"recProspectIcon_sel",route:"ReferralInboxConnections",key:""},{label:"Prospects",state:"selected",iconId:"googleMaps",route:"",
key:""}]})},ReferralInboxConnections:function(a){this.GenericListDetailPattern({listapplet:"ReferralInboxList",act:"InBox",listTemplate:"InBoxList",clientSideSortAttr:"statusOrder",calculatedFields:{statusCategory:function(a){return c.getConnectionReferralStatus(a).msg},statusOrder:function(a){return c.getConnectionReferralStatus(a).order}},searchSpec:{filter:[{ftype:"expr",expression:"{referralType : {$in:['PART_FOR_PART','PART_INVITE']}}"},{ftype:"expr",expression:"{archiveFlag : { $ne: 'true' }}"}]},
formapplet:"ReferralInboxForm",formTemplate:rwApp.getReferralViewForm,viewBarApplet:"ReferralViewBar",viewTitle:"Received: Invitations and Connections",appletMenu:"ReferralInboxMenu",appletMenuTemplate:"ReferralMenuTemplate",viewBarTemplate:"ReferralViewBarTemplate",clickRoute:"referralInbox",selectedId:a,tooltipSource:"referralInbox",secondTierNav:[{label:"Connections",state:"selected",iconId:"recProspectIcon_sel",route:"",key:""},{label:"Prospects",state:"",iconId:"googleMaps",route:"referralInbox",
key:""}]})},ReferralProspect:function(a){this.GenericSummaryDetailPattern({summaryapplet:"ReferralProspect",detailapplet:"EmptyApplet",viewBarApplet:"ReferralProspectViewBar",clickRoute:"ReferralProspect",selectedId:a,appletMenu:"ReferralInboxMenu",appletMenuTemplate:"ReferralMenuTemplate",viewTitle:"Prospect Background",dynamicTitles:[{template:"Not the right LinkedIn Member? Choose another <font class='contactName light'>ZValue YValue</font> here",fields:[{contact_firstName:"ZValue"},{contact_lastName:"YValue"}]}],
summaryTemplate:"ReferralProspectSummaryForm",viewTemplate:"MashupView",detailTemplate:"NoRecordForm",showLinkedInProfile:!0,tooltipSource:"referralProspect"})},ReferralOutbox:function(a){this.GenericListDetailPattern({listapplet:"ReferralOutboxList",act:"OutBox",listTemplate:"OutBoxList",clientSideSortAttr:"statusCategory",calculatedFields:{statusCategory:function(a){return c.getProspectReferralStatusOrder(a)}},searchSpec:{filter:[{ftype:"expr",expression:"{referralType : 'CUST_FOR_PART'}"}]},sortby:"rw_created_on",
sortOrder:"DESC",formapplet:"ReferralInboxForm",formTemplate:rwApp.getReferralViewOutForm,viewTitle:"Prospect Referrals from Me",viewBarApplet:"ReferralViewBar",appletMenu:"ReferralOutBoxMenu",appletMenuTemplate:"ReferralMenuTemplate",viewBarTemplate:"ReferralViewBarTemplate",clickRoute:"referralOutbox",selectedId:a,tooltipSource:"referralOutbox",secondTierNav:[{label:"Connections",state:"",iconId:"recProspectIcon_sel",route:"ReferralOutboxConnections",key:""},{label:"Prospects",state:"selected",
iconId:"googleMaps",route:"",key:""}]})},ReferralOutboxConnections:function(a){this.GenericListDetailPattern({listapplet:"ReferralOutboxList",act:"OutBox",listTemplate:"OutBoxList",clientSideSortAttr:"statusOrder",calculatedFields:{statusCategory:function(a){return c.getConnectionReferralOutStatus(a).msg},statusOrder:function(a){return c.getConnectionReferralOutStatus(a).order}},searchSpec:{filter:[{ftype:"expr",expression:"{referralType : {$in:['PART_FOR_PART','PART_INVITE']}}"}]},sortby:"rw_created_on",
sortOrder:"DESC",formapplet:"ReferralInboxForm",formTemplate:rwApp.getReferralViewOutForm,viewTitle:"Referrals and Invitations From Me",viewBarApplet:"ReferralViewBar",appletMenu:"ReferralOutBoxMenu",appletMenuTemplate:"ReferralMenuTemplate",viewBarTemplate:"ReferralViewBarTemplate",clickRoute:"referralOutbox",selectedId:a,tooltipSource:"referralOutbox",secondTierNav:[{label:"Connections",state:"selected",iconId:"recProspectIcon_sel",route:"",key:""},{label:"Prospects",state:"",iconId:"googleMaps",
route:"referralOutbox",key:""}]})},ReferralArchive:function(a){this.GenericListDetailPattern({listapplet:"ReferralInboxArchive",act:"InBox",listTemplate:"InBoxList",sortby:"rw_created_on",sortOrder:"DESC",formapplet:"ReferralInboxForm",formTemplate:rwApp.getReferralViewForm,viewBarApplet:"ReferralViewBar",viewTitle:"Referrals and Invitations Received",appletMenu:"ReferralArchiveMenu",viewBarTemplate:"ReferralViewBarTemplate",clickRoute:"referralInbox",selectedId:a,tooltipSource:"referralInbox"})},
ReferralOffersList:function(a){this.GenericListDetailPattern({listapplet:"ReferralOfferList",listTemplate:"StdList",formapplet:"ReferralOfferForm",formTemplate:"StdFormPlain",viewBarApplet:"ReferralOffersViewBar",clickRoute:"offers",viewTitle:"My Offers",selectedId:a})},renderMap:function(a){var b=a.mArray,d=a.targetSelector,e=c.hasVal(a.zoom)?a.zoom:14,f=c.hasVal(a.centerAddress)?a.centerAddress:"330 Elati Ct. Danville CA 94526";c(d).gmap3("clear","markers");var j=this;j.options=a;0<b.length?c(d).gmap3({map:{options:{center:f,
zoom:e,maxZoom:17}},marker:{values:b,options:{draggable:!1},events:{click:function(a,b,d){j.options.parentView.setNavContext(d.tag);b=c(this).gmap3("get");var e=c(this).gmap3({get:{name:"infowindow"}});e?(e.open(b,a),e.setContent(d.data)):c(this).gmap3({infowindow:{anchor:a,options:{content:d.data,maxWidth:450}}})}}},autofit:0<b.length?{}:void 0}):c(d).html("<div class='noresults'>0 results</div>")},getMapMarkerArray:function(a,b,d){var e={},h=null,j,q=[],l=0,p;for(p in a){var g=a[p];if(c.hasVal(g.options)&&
"PartnerMgr"==g.options.module){var n=c.hasVal(g.get("streetAddress1_work_pub"))?g.get("streetAddress1_work_pub"):"";j=c.hasVal(g.get("streetAddress2_work_pub"))?g.get("streetAddress2_work_pub"):"";var m=c.hasVal(g.get("cityAddress_work_pub"))?g.get("cityAddress_work_pub"):"",k=c.hasVal(g.get("stateAddress_work_pub"))?g.get("stateAddress_work_pub"):"",t=c.hasVal(g.get("postalCodeAddress_work_pub"))?g.get("postalCodeAddress_work_pub"):"",r=c.hasVal(g.get("latitude_work_pub"))?g.get("latitude_work_pub"):
"",s=c.hasVal(g.get("longitude_work_pub"))?g.get("longitude_work_pub"):""}else n=c.hasVal(g.get("streetAddress1_work"))?g.get("streetAddress1_work"):"",j=c.hasVal(g.get("streetAddress2_work"))?g.get("streetAddress2_work"):"",m=c.hasVal(g.get("cityAddress_work"))?g.get("cityAddress_work"):"",k=c.hasVal(g.get("stateAddress_work"))?g.get("stateAddress_work"):"",t=c.hasVal(g.get("postalCodeAddress_work"))?g.get("postalCodeAddress_work"):"",r=c.hasVal(g.get("latitude_work"))?parseFloat(g.get("latitude_work")):
void 0,s=c.hasVal(g.get("longitude_work"))?parseFloat(g.get("longitude_work")):void 0;1==a.length&&(s=r=void 0);n=n+" "+j+" "+m+" "+k+" "+t;j=f.template("Snippets")();j=c(j).find(b).html();for(item in d)m="",k=d[item],c.hasVal(g.get(item))?(modelVal=g.get(item),400<modelVal.length&&(modelVal=modelVal.substr(0,400)+"..."),f.isObject(k)?(m=k.transform(modelVal),k=k.placeHolder):m=modelVal):f.isObject(k)&&(k=k.placeHolder),j=j.replace(RegExp(k,"g"),m);m=j;j=new google.maps.LatLngBounds;c.hasVal(r)&&
c.hasVal(s)?(g={latLng:[r,s],tag:g.get("id"),data:m},null==h&&(h=[r,s]),q[l]=g,l++):c.hasVal(t)&&(g={address:n,tag:g.get("id"),data:m},q[l]=g,l++)}e.markerArray=q;e.latlngbounds=j;e.centerAddress=h;return e},showLinkedInList:function(a){c("#selectorPlaceholder").hide();c("#linkedInSelector").show();f.isUndefined(IN)||IN.User.authorize(function(){ReferralWirePattern.lnPeopleSearch(a.firstName,a.lastName,a.zipCode,{success:function(b){var d=new ReferralWireView.RadioList({applet:"LinkedInProfileList",
template:"LNRadioList",updateview:a.dview,model:b,lnId:a.contactLNId,htmlOnly:!0,success:function(){}});c(".choiceList").html(d.render(d.model).el).trigger("create");d=a.contactLNId;if(f.isUndefined(a.contactLNId)||f.isNull(a.contactLNId)||""==a.contactLNId)d=b.models[0].get("LNProfileId"),rwApp.updateKeyFieldSilent({dview:a.dview,setFieldMap:{contactLNId:d}});rwApp.showLinkedInProfile(d)}})})},showLinkedInProfile:function(a){if(c.hasVal(a)&&c.hasVal(localStorage)&&c.hasVal(localStorage.getItem(a))){var b=
localStorage.getItem(a),b=jQuery.parseJSON(b),d=new rwcore.StandardModel({module:"UserMgr"});for(item in b)d.set(item,b[item]);rwApp.renderLinkedInProfile(d)}else f.isUndefined(IN)||IN.User.authorize(function(){ReferralWirePattern.GetUserLinkedInProfile(a,{success:function(b){if(c.hasVal(localStorage)){var d=JSON.stringify(b);localStorage.setItem(a,d)}rwApp.renderLinkedInProfile(b)},error:function(a){"Throttle limit for calls to this resource is reached."==a.message&&c(".profilePlatter").html("<font style='color:red;font-style:italic'>The number of LinkedIn profiles that can be viewed through ReferralWire in this 24 period has been reached. To view more prospect profiles, please visit <a href='http://www.linkedin.com' target='_blank'>LinkedIn</a> directly, or check back later.</font>")}})})},
renderLinkedInProfile:function(a){var b=new ReferralWireView.FormView({applet:"LinkedInProfileForm",templateHTML:"LinkedInProfile",model:a,success:function(){},error:rwcore.showError});c(".profilePlatter").html(b.render(b.model).el);c("#positions").replaceWith(c.getFormattedLinkedInPositions(a.get("positions").values))},regLNProfile:function(){f.isUndefined(IN)||IN.User.authorize(function(){ReferralWirePattern.GetUserLinkedInProfile("me",{success:function(a){var b=new ReferralWireView.FormView({applet:"RegistrationForm",
templateHTML:"RegistrationTemplate",success:function(){rwApp.navigate("#home",{trigger:!0})},error:rwcore.showError});b.setDefaultModel(a);b.model.set({LNProfileId:a.get("LNProfileId")});b.model.set({LNProfile:a.get("LNProfile")});c("#regForm").html(b.render().el).trigger("create")}})})},admin:function(a){c(rwApp.params.modules[1]).html(f.template("mainAdmin",{})).trigger("create");f.isUndefined(a)||("charts"===a?ReferralWirePattern.ChartAdminPattern({containerEl:"#adminContainer"}):"metrics"===a?
ReferralWirePattern.SystemMetricsReport({containerEl:"#adminContainer"}):"imageList"===a?ReferralWirePattern.SystemMetricsReport({containerEl:"#imageList"}):"tenant"===a&&ReferralWirePattern.TenantAdmin({containerEl:"#adminContainer"}))},accountadmin:function(a){c("#singlePageWeb").addClass("adminPage");this.GenericListDetailPattern({listapplet:"TenantList",listTemplate:"TenantList",formapplet:"TenantDetailsView",formTemplate:"BasicForm",clickRoute:"accountadmin",selectedId:a,appletMenu:"TenantUpdateMenu",
viewTitle:"Account Administration",upsertApplet:"TenantDetailsEdit",viewBarApplet:"TenantViewBar"})},TenantReports:function(){var a=new Date("2014/01/01"),b=new rwcore.StandardCollection({module:"AnalyticsMgr",act:"getTrackerChart",name:"EventSeries",event:"UM_REGISTER",unit:"dayOfMonth",since_date:a});c.when(b.sync()).done(function(b){for(var c=[],f=0;f<b.length;f++){var j={};j.name=b.models[f].get("_id").dayOfMonth;j.y=b.models[f].get("total");c[f]=j}(new ReferralWireView.ChartView({containerEl:"#chartContainer",
ChartType:"line",ChartTitle:"Registrations Report",subTitle:a.toDateString()+" - "+(new Date).toDateString(),yAxisTitle:"total",xAxisTitle:"dayOfMonth",series:c,formatter:function(){return"<span>"+this.value+"</span>"}})).render()})},tenant:function(a){c("#singlePageWeb").addClass("adminPage");this.GenericListDetailPattern({listapplet:"TenantList",listTemplate:"TenantList",usePaging:!0,sortby:"tenant",formapplet:"TenantDetailsView",formTemplate:"BasicForm",viewBarApplet:"TenantListViewBarMaster",
clickRoute:"tenant",selectedId:a,appletMenu:"TenantMasterMenu",viewTitle:"Account Administration",upsertApplet:"TenantDetailsEditMaster"})},listadmin:function(a,b){c("#singlePageWeb").addClass("adminPage");c.hasVal(a)||(a="profession");var d={profession:{viewTitle:"Professions List Administration",list:"ProfessionListApplet",formAppletView:"ProfessionViewApplet",formAppletUpdate:"ProfessionUpdateApplet",listTemplate:"SimpleList",formTemplate:"BasicForm"},generic:{viewTitle:"Generic List Administration",
list:"GenericLovList",formAppletView:"LOVFormApplet",formAppletUpdate:"LOVFormApplet",listTemplate:"SimpleList",formTemplate:"BasicForm"},onlinehelp:{viewTitle:"Online Help Videos Administration",list:"OnlineHelpListApplet",formAppletView:"OnlineHelpViewApplet",formAppletUpdate:"OnlineHelpUpdateApplet",listTemplate:"SimpleList",formTemplate:"BasicForm"}};this.GenericListDetailPattern({listapplet:d[a].list,listTemplate:d[a].listTemplate,usePaging:!0,sortby:"DisplayVal",formapplet:d[a].formAppletView,
formTemplate:d[a].formTemplate,viewBarApplet:"ListAdminViewBar",clickRoute:"listadmin/"+a,selectedId:b,appletMenu:"TenantMasterMenu",viewTitle:d[a].viewTitle,upsertApplet:d[a].formAppletUpdate})}});p.ReferralWireRouter=ReferralWireRouter=n;return p.ReferralWireRouter});
